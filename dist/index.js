"use strict";var Uu=Object.create;var cn=Object.defineProperty;var ju=Object.getOwnPropertyDescriptor;var Mu=Object.getOwnPropertyNames;var zu=Object.getPrototypeOf,Lu=Object.prototype.hasOwnProperty;var se=(e,t)=>()=>(e&&(t=e(e=0)),t);var U=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),qu=(e,t)=>{for(var r in t)cn(e,r,{get:t[r],enumerable:!0})},Ya=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Mu(t))!Lu.call(e,i)&&i!==r&&cn(e,i,{get:()=>t[i],enumerable:!(n=ju(t,i))||n.enumerable});return e};var Dt=(e,t,r)=>(r=e!=null?Uu(zu(e)):{},Ya(t||!e||!e.__esModule?cn(r,"default",{value:e,enumerable:!0}):r,e)),Fu=e=>Ya(cn({},"__esModule",{value:!0}),e);var fn=U(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.toCommandProperties=Ut.toCommandValue=void 0;function Hu(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Ut.toCommandValue=Hu;function Gu(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Ut.toCommandProperties=Gu});var ts=U(Se=>{"use strict";var Zu=Se&&Se.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Wu=Se&&Se.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vu=Se&&Se.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Zu(t,e,r);return Wu(t,e),t};Object.defineProperty(Se,"__esModule",{value:!0});Se.issue=Se.issueCommand=void 0;var Ku=Vu(require("os")),Qa=fn();function es(e,t,r){let n=new ii(e,t,r);process.stdout.write(n.toString()+Ku.EOL)}Se.issueCommand=es;function Xu(e,t=""){es(e,{},t)}Se.issue=Xu;var Ja="::",ii=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Ja+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${Ju(i)}`)}}return t+=`${Ja}${Yu(this.message)}`,t}};function Yu(e){return Qa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Ju(e){return Qa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function gr(){return ln>un.length-16&&(rs.default.randomFillSync(un),ln=0),un.slice(ln,ln+=16)}var rs,un,ln,ai=se(()=>{rs=Dt(require("crypto")),un=new Uint8Array(256),ln=un.length});var ns,is=se(()=>{ns=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Qu(e){return typeof e=="string"&&ns.test(e)}var st,vr=se(()=>{is();st=Qu});function ed(e,t=0){let r=(re[e[t+0]]+re[e[t+1]]+re[e[t+2]]+re[e[t+3]]+"-"+re[e[t+4]]+re[e[t+5]]+"-"+re[e[t+6]]+re[e[t+7]]+"-"+re[e[t+8]]+re[e[t+9]]+"-"+re[e[t+10]]+re[e[t+11]]+re[e[t+12]]+re[e[t+13]]+re[e[t+14]]+re[e[t+15]]).toLowerCase();if(!st(r))throw TypeError("Stringified UUID is invalid");return r}var re,ot,br=se(()=>{vr();re=[];for(let e=0;e<256;++e)re.push((e+256).toString(16).substr(1));ot=ed});function td(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let a=e.node||as,s=e.clockseq!==void 0?e.clockseq:si;if(a==null||s==null){let d=e.random||(e.rng||gr)();a==null&&(a=as=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),s==null&&(s=si=(d[6]<<8|d[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:ci+1,f=o-oi+(l-ci)/1e4;if(f<0&&e.clockseq===void 0&&(s=s+1&16383),(f<0||o>oi)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");oi=o,ci=l,si=s,o+=122192928e5;let c=((o&268435455)*1e4+l)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let u=o/4294967296*1e4&268435455;i[n++]=u>>>8&255,i[n++]=u&255,i[n++]=u>>>24&15|16,i[n++]=u>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let d=0;d<6;++d)i[n+d]=a[d];return t||ot(i)}var as,si,oi,ci,ss,os=se(()=>{ai();br();oi=0,ci=0;ss=td});function rd(e){if(!st(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var dn,fi=se(()=>{vr();dn=rd});function nd(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function hn(e,t,r){function n(i,a,s,o){if(typeof i=="string"&&(i=nd(i)),typeof a=="string"&&(a=dn(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(a),l.set(i,a.length),l=r(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,s){o=o||0;for(let f=0;f<16;++f)s[o+f]=l[f];return s}return ot(l)}try{n.name=e}catch{}return n.DNS=id,n.URL=ad,n}var id,ad,li=se(()=>{br();fi();id="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ad="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function sd(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),cs.default.createHash("md5").update(e).digest()}var cs,fs,ls=se(()=>{cs=Dt(require("crypto"));fs=sd});var od,us,ds=se(()=>{li();ls();od=hn("v3",48,fs),us=od});function cd(e,t,r){e=e||{};let n=e.random||(e.rng||gr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return ot(n)}var hs,ws=se(()=>{ai();br();hs=cd});function fd(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),ps.default.createHash("sha1").update(e).digest()}var ps,ms,_s=se(()=>{ps=Dt(require("crypto"));ms=fd});var ld,gs,vs=se(()=>{li();_s();ld=hn("v5",80,ms),gs=ld});var bs,ys=se(()=>{bs="00000000-0000-0000-0000-000000000000"});function ud(e){if(!st(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var xs,Es=se(()=>{vr();xs=ud});var ks={};qu(ks,{NIL:()=>bs,parse:()=>dn,stringify:()=>ot,v1:()=>ss,v3:()=>us,v4:()=>hs,v5:()=>gs,validate:()=>st,version:()=>xs});var Ss=se(()=>{os();ds();ws();vs();ys();Es();vr();br();fi()});var As=U(Oe=>{"use strict";var dd=Oe&&Oe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),hd=Oe&&Oe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Rs=Oe&&Oe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&dd(t,e,r);return hd(t,e),t};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.prepareKeyValueMessage=Oe.issueFileCommand=void 0;var Os=Rs(require("fs")),ui=Rs(require("os")),wd=(Ss(),Fu(ks)),Ts=fn();function pd(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Os.existsSync(r))throw new Error(`Missing file at path: ${r}`);Os.appendFileSync(r,`${Ts.toCommandValue(t)}${ui.EOL}`,{encoding:"utf8"})}Oe.issueFileCommand=pd;function md(e,t){let r=`ghadelimiter_${wd.v4()}`,n=Ts.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${ui.EOL}${n}${ui.EOL}${r}`}Oe.prepareKeyValueMessage=md});var Is=U(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.checkBypass=jt.getProxyUrl=void 0;function _d(e){let t=e.protocol==="https:";if($s(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)try{return new URL(r)}catch{if(!r.startsWith("http://")&&!r.startsWith("https://"))return new URL(`http://${r}`)}else return}jt.getProxyUrl=_d;function $s(e){if(!e.hostname)return!1;let t=e.hostname;if(gd(t))return!0;let r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);let i=[e.hostname.toUpperCase()];typeof n=="number"&&i.push(`${i[0]}:${n}`);for(let a of r.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(a==="*"||i.some(s=>s===a||s.endsWith(`.${a}`)||a.startsWith(".")&&s.endsWith(`${a}`)))return!0;return!1}jt.checkBypass=$s;function gd(e){let t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Ns=U(Mt=>{"use strict";var S_=require("net"),vd=require("tls"),di=require("http"),Bs=require("https"),bd=require("events"),O_=require("assert"),yd=require("util");Mt.httpOverHttp=xd;Mt.httpsOverHttp=Ed;Mt.httpOverHttps=kd;Mt.httpsOverHttps=Sd;function xd(e){var t=new Ke(e);return t.request=di.request,t}function Ed(e){var t=new Ke(e);return t.request=di.request,t.createSocket=Ps,t.defaultPort=443,t}function kd(e){var t=new Ke(e);return t.request=Bs.request,t}function Sd(e){var t=new Ke(e);return t.request=Bs.request,t.createSocket=Ps,t.defaultPort=443,t}function Ke(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||di.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,i,a,s){for(var o=Cs(i,a,s),l=0,f=t.requests.length;l<f;++l){var c=t.requests[l];if(c.host===o.host&&c.port===o.port){t.requests.splice(l,1),c.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}yd.inherits(Ke,bd.EventEmitter);Ke.prototype.addRequest=function(t,r,n,i){var a=this,s=hi({request:t},a.options,Cs(r,n,i));if(a.sockets.length>=this.maxSockets){a.requests.push(s);return}a.createSocket(s,function(o){o.on("free",l),o.on("close",f),o.on("agentRemove",f),t.onSocket(o);function l(){a.emit("free",o,s)}function f(c){a.removeSocket(o),o.removeListener("free",l),o.removeListener("close",f),o.removeListener("agentRemove",f)}})};Ke.prototype.createSocket=function(t,r){var n=this,i={};n.sockets.push(i);var a=hi({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(a.localAddress=t.localAddress),a.proxyAuth&&(a.headers=a.headers||{},a.headers["Proxy-Authorization"]="Basic "+new Buffer(a.proxyAuth).toString("base64")),ct("making CONNECT request");var s=n.request(a);s.useChunkedEncodingByDefault=!1,s.once("response",o),s.once("upgrade",l),s.once("connect",f),s.once("error",c),s.end();function o(u){u.upgrade=!0}function l(u,d,h){process.nextTick(function(){f(u,d,h)})}function f(u,d,h){if(s.removeAllListeners(),d.removeAllListeners(),u.statusCode!==200){ct("tunneling socket could not be established, statusCode=%d",u.statusCode),d.destroy();var w=new Error("tunneling socket could not be established, statusCode="+u.statusCode);w.code="ECONNRESET",t.request.emit("error",w),n.removeSocket(i);return}if(h.length>0){ct("got illegal response body from proxy"),d.destroy();var w=new Error("got illegal response body from proxy");w.code="ECONNRESET",t.request.emit("error",w),n.removeSocket(i);return}return ct("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=d,r(d)}function c(u){s.removeAllListeners(),ct(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var d=new Error("tunneling socket could not be established, cause="+u.message);d.code="ECONNRESET",t.request.emit("error",d),n.removeSocket(i)}};Ke.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function Ps(e,t){var r=this;Ke.prototype.createSocket.call(r,e,function(n){var i=e.request.getHeader("host"),a=hi({},r.options,{socket:n,servername:i?i.replace(/:.*$/,""):e.host}),s=vd.connect(0,a);r.sockets[r.sockets.indexOf(n)]=s,t(s)})}function Cs(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function hi(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var i=Object.keys(n),a=0,s=i.length;a<s;++a){var o=i[a];n[o]!==void 0&&(e[o]=n[o])}}return e}var ct;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ct=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:ct=function(){};Mt.debug=ct});var Us=U((T_,Ds)=>{Ds.exports=Ns()});var Ms=U(L=>{"use strict";var Od=L&&L.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Rd=L&&L.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),vn=L&&L.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Od(t,e,r);return Rd(t,e),t},V=L&&L.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{f(n.next(c))}catch(u){s(u)}}function l(c){try{f(n.throw(c))}catch(u){s(u)}}function f(c){c.done?a(c.value):i(c.value).then(o,l)}f((n=n.apply(e,t||[])).next())})};Object.defineProperty(L,"__esModule",{value:!0});L.HttpClient=L.isHttps=L.HttpClientResponse=L.HttpClientError=L.getProxyUrl=L.MediaTypes=L.Headers=L.HttpCodes=void 0;var wn=vn(require("http")),wi=vn(require("https")),js=vn(Is()),pn=vn(Us()),Be;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Be=L.HttpCodes||(L.HttpCodes={}));var oe;(function(e){e.Accept="accept",e.ContentType="content-type"})(oe=L.Headers||(L.Headers={}));var ft;(function(e){e.ApplicationJson="application/json"})(ft=L.MediaTypes||(L.MediaTypes={}));function Td(e){let t=js.getProxyUrl(new URL(e));return t?t.href:""}L.getProxyUrl=Td;var Ad=[Be.MovedPermanently,Be.ResourceMoved,Be.SeeOther,Be.TemporaryRedirect,Be.PermanentRedirect],$d=[Be.BadGateway,Be.ServiceUnavailable,Be.GatewayTimeout],Id=["OPTIONS","GET","DELETE","HEAD"],Bd=10,Pd=5,_n=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};L.HttpClientError=_n;var gn=class{constructor(t){this.message=t}readBody(){return V(this,void 0,void 0,function*(){return new Promise(t=>V(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}readBodyBuffer(){return V(this,void 0,void 0,function*(){return new Promise(t=>V(this,void 0,void 0,function*(){let r=[];this.message.on("data",n=>{r.push(n)}),this.message.on("end",()=>{t(Buffer.concat(r))})}))})}};L.HttpClientResponse=gn;function Cd(e){return new URL(e).protocol==="https:"}L.isHttps=Cd;var pi=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return V(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return V(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return V(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return V(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return V(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,i){return V(this,void 0,void 0,function*(){return this.request(t,r,n,i)})}getJson(t,r={}){return V(this,void 0,void 0,function*(){r[oe.Accept]=this._getExistingOrDefaultHeader(r,oe.Accept,ft.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return V(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[oe.Accept]=this._getExistingOrDefaultHeader(n,oe.Accept,ft.ApplicationJson),n[oe.ContentType]=this._getExistingOrDefaultHeader(n,oe.ContentType,ft.ApplicationJson);let a=yield this.post(t,i,n);return this._processResponse(a,this.requestOptions)})}putJson(t,r,n={}){return V(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[oe.Accept]=this._getExistingOrDefaultHeader(n,oe.Accept,ft.ApplicationJson),n[oe.ContentType]=this._getExistingOrDefaultHeader(n,oe.ContentType,ft.ApplicationJson);let a=yield this.put(t,i,n);return this._processResponse(a,this.requestOptions)})}patchJson(t,r,n={}){return V(this,void 0,void 0,function*(){let i=JSON.stringify(r,null,2);n[oe.Accept]=this._getExistingOrDefaultHeader(n,oe.Accept,ft.ApplicationJson),n[oe.ContentType]=this._getExistingOrDefaultHeader(n,oe.ContentType,ft.ApplicationJson);let a=yield this.patch(t,i,n);return this._processResponse(a,this.requestOptions)})}request(t,r,n,i){return V(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let a=new URL(r),s=this._prepareRequest(t,a,i),o=this._allowRetries&&Id.includes(t)?this._maxRetries+1:1,l=0,f;do{if(f=yield this.requestRaw(s,n),f&&f.message&&f.message.statusCode===Be.Unauthorized){let u;for(let d of this.handlers)if(d.canHandleAuthentication(f)){u=d;break}return u?u.handleAuthentication(this,s,n):f}let c=this._maxRedirects;for(;f.message.statusCode&&Ad.includes(f.message.statusCode)&&this._allowRedirects&&c>0;){let u=f.message.headers.location;if(!u)break;let d=new URL(u);if(a.protocol==="https:"&&a.protocol!==d.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield f.readBody(),d.hostname!==a.hostname)for(let h in i)h.toLowerCase()==="authorization"&&delete i[h];s=this._prepareRequest(t,d,i),f=yield this.requestRaw(s,n),c--}if(!f.message.statusCode||!$d.includes(f.message.statusCode))return f;l+=1,l<o&&(yield f.readBody(),yield this._performExponentialBackoff(l))}while(l<o);return f})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,i)=>{function a(s,o){s?i(s):o?n(o):i(new Error("Unknown error"))}this.requestRawWithCallback(t,r,a)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function a(l,f){i||(i=!0,n(l,f))}let s=t.httpModule.request(t.options,l=>{let f=new gn(l);a(void 0,f)}),o;s.on("socket",l=>{o=l}),s.setTimeout(this._socketTimeout||3*6e4,()=>{o&&o.end(),a(new Error(`Request timeout: ${t.options.path}`))}),s.on("error",function(l){a(l)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let i={};i.parsedUrl=r;let a=i.parsedUrl.protocol==="https:";i.httpModule=a?wi:wn;let s=a?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):s,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(let o of this.handlers)o.prepareRequest(i.options);return i}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},mn(this.requestOptions.headers),mn(t||{})):mn(t||{})}_getExistingOrDefaultHeader(t,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=mn(this.requestOptions.headers)[r]),t[r]||i||n}_getAgent(t){let r,n=js.getProxyUrl(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),this._keepAlive&&!i&&(r=this._agent),r)return r;let a=t.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||wn.globalAgent.maxSockets),n&&n.hostname){let o={maxSockets:s,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},l,f=n.protocol==="https:";a?l=f?pn.httpsOverHttps:pn.httpsOverHttp:l=f?pn.httpOverHttps:pn.httpOverHttp,r=l(o),this._proxyAgent=r}if(this._keepAlive&&!r){let o={keepAlive:this._keepAlive,maxSockets:s};r=a?new wi.Agent(o):new wn.Agent(o),this._agent=r}return r||(r=a?wi.globalAgent:wn.globalAgent),a&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return V(this,void 0,void 0,function*(){t=Math.min(Bd,t);let r=Pd*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,i)=>V(this,void 0,void 0,function*(){let a=t.message.statusCode||0,s={statusCode:a,result:null,headers:{}};a===Be.NotFound&&n(s);function o(c,u){if(typeof u=="string"){let d=new Date(u);if(!isNaN(d.valueOf()))return d}return u}let l,f;try{f=yield t.readBody(),f&&f.length>0&&(r&&r.deserializeDates?l=JSON.parse(f,o):l=JSON.parse(f),s.result=l),s.headers=t.message.headers}catch{}if(a>299){let c;l&&l.message?c=l.message:f&&f.length>0?c=f:c=`Failed request: (${a})`;let u=new _n(c,a);u.result=s.result,i(u)}else n(s)}))})}};L.HttpClient=pi;var mn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var zs=U(je=>{"use strict";var vi=je&&je.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{f(n.next(c))}catch(u){s(u)}}function l(c){try{f(n.throw(c))}catch(u){s(u)}}function f(c){c.done?a(c.value):i(c.value).then(o,l)}f((n=n.apply(e,t||[])).next())})};Object.defineProperty(je,"__esModule",{value:!0});je.PersonalAccessTokenCredentialHandler=je.BearerCredentialHandler=je.BasicCredentialHandler=void 0;var mi=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};je.BasicCredentialHandler=mi;var _i=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return vi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};je.BearerCredentialHandler=_i;var gi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};je.PersonalAccessTokenCredentialHandler=gi});var Fs=U(zt=>{"use strict";var Ls=zt&&zt.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{f(n.next(c))}catch(u){s(u)}}function l(c){try{f(n.throw(c))}catch(u){s(u)}}function f(c){c.done?a(c.value):i(c.value).then(o,l)}f((n=n.apply(e,t||[])).next())})};Object.defineProperty(zt,"__esModule",{value:!0});zt.OidcClient=void 0;var Nd=Ms(),Dd=zs(),qs=yi(),bi=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Nd.HttpClient("actions/oidc-client",[new Dd.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Ls(this,void 0,void 0,function*(){let a=(r=(yield e.createHttpClient().getJson(t).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!a)throw new Error("Response json body do not have ID Token field");return a})}static getIDToken(t){return Ls(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let i=encodeURIComponent(t);r=`${r}&audience=${i}`}qs.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return qs.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};zt.OidcClient=bi});var Si=U(we=>{"use strict";var xi=we&&we.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{f(n.next(c))}catch(u){s(u)}}function l(c){try{f(n.throw(c))}catch(u){s(u)}}function f(c){c.done?a(c.value):i(c.value).then(o,l)}f((n=n.apply(e,t||[])).next())})};Object.defineProperty(we,"__esModule",{value:!0});we.summary=we.markdownSummary=we.SUMMARY_DOCS_URL=we.SUMMARY_ENV_VAR=void 0;var Ud=require("os"),Ei=require("fs"),{access:jd,appendFile:Md,writeFile:zd}=Ei.promises;we.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";we.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var ki=class{constructor(){this._buffer=""}filePath(){return xi(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[we.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${we.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield jd(t,Ei.constants.R_OK|Ei.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let i=Object.entries(n).map(([a,s])=>` ${a}="${s}"`).join("");return r?`<${t}${i}>${r}</${t}>`:`<${t}${i}>`}write(t){return xi(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?zd:Md)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return xi(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Ud.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),i=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(i).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",i=t.map(s=>this.wrap("li",s)).join(""),a=this.wrap(n,i);return this.addRaw(a).addEOL()}addTable(t){let r=t.map(i=>{let a=i.map(s=>{if(typeof s=="string")return this.wrap("td",s);let{header:o,data:l,colspan:f,rowspan:c}=s,u=o?"th":"td",d=Object.assign(Object.assign({},f&&{colspan:f}),c&&{rowspan:c});return this.wrap(u,l,d)}).join("");return this.wrap("tr",a)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:i,height:a}=n||{},s=Object.assign(Object.assign({},i&&{width:i}),a&&{height:a}),o=this.wrap("img",null,Object.assign({src:t,alt:r},s));return this.addRaw(o).addEOL()}addHeading(t,r){let n=`h${r}`,i=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",a=this.wrap(i,t);return this.addRaw(a).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),i=this.wrap("blockquote",t,n);return this.addRaw(i).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Hs=new ki;we.markdownSummary=Hs;we.summary=Hs});var Gs=U(pe=>{"use strict";var Ld=pe&&pe.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),qd=pe&&pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Fd=pe&&pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ld(t,e,r);return qd(t,e),t};Object.defineProperty(pe,"__esModule",{value:!0});pe.toPlatformPath=pe.toWin32Path=pe.toPosixPath=void 0;var Hd=Fd(require("path"));function Gd(e){return e.replace(/[\\]/g,"/")}pe.toPosixPath=Gd;function Zd(e){return e.replace(/[/]/g,"\\")}pe.toWin32Path=Zd;function Wd(e){return e.replace(/[/\\]/g,Hd.sep)}pe.toPlatformPath=Wd});var yi=U(C=>{"use strict";var Vd=C&&C.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Kd=C&&C.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Zs=C&&C.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Vd(t,e,r);return Kd(t,e),t},Ws=C&&C.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{f(n.next(c))}catch(u){s(u)}}function l(c){try{f(n.throw(c))}catch(u){s(u)}}function f(c){c.done?a(c.value):i(c.value).then(o,l)}f((n=n.apply(e,t||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});C.getIDToken=C.getState=C.saveState=C.group=C.endGroup=C.startGroup=C.info=C.notice=C.warning=C.error=C.debug=C.isDebug=C.setFailed=C.setCommandEcho=C.setOutput=C.getBooleanInput=C.getMultilineInput=C.getInput=C.addPath=C.setSecret=C.exportVariable=C.ExitCode=void 0;var Re=ts(),yt=As(),Lt=fn(),Vs=Zs(require("os")),Xd=Zs(require("path")),Yd=Fs(),Ks;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Ks=C.ExitCode||(C.ExitCode={}));function Jd(e,t){let r=Lt.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return yt.issueFileCommand("ENV",yt.prepareKeyValueMessage(e,t));Re.issueCommand("set-env",{name:e},r)}C.exportVariable=Jd;function Qd(e){Re.issueCommand("add-mask",{},e)}C.setSecret=Qd;function eh(e){process.env.GITHUB_PATH||""?yt.issueFileCommand("PATH",e):Re.issueCommand("add-path",{},e),process.env.PATH=`${e}${Xd.delimiter}${process.env.PATH}`}C.addPath=eh;function Oi(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}C.getInput=Oi;function th(e,t){let r=Oi(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}C.getMultilineInput=th;function rh(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],i=Oi(e,t);if(r.includes(i))return!0;if(n.includes(i))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}C.getBooleanInput=rh;function nh(e,t){if(process.env.GITHUB_OUTPUT||"")return yt.issueFileCommand("OUTPUT",yt.prepareKeyValueMessage(e,t));process.stdout.write(Vs.EOL),Re.issueCommand("set-output",{name:e},Lt.toCommandValue(t))}C.setOutput=nh;function ih(e){Re.issue("echo",e?"on":"off")}C.setCommandEcho=ih;function ah(e){process.exitCode=Ks.Failure,Xs(e)}C.setFailed=ah;function sh(){return process.env.RUNNER_DEBUG==="1"}C.isDebug=sh;function oh(e){Re.issueCommand("debug",{},e)}C.debug=oh;function Xs(e,t={}){Re.issueCommand("error",Lt.toCommandProperties(t),e instanceof Error?e.toString():e)}C.error=Xs;function ch(e,t={}){Re.issueCommand("warning",Lt.toCommandProperties(t),e instanceof Error?e.toString():e)}C.warning=ch;function fh(e,t={}){Re.issueCommand("notice",Lt.toCommandProperties(t),e instanceof Error?e.toString():e)}C.notice=fh;function lh(e){process.stdout.write(e+Vs.EOL)}C.info=lh;function Ys(e){Re.issue("group",e)}C.startGroup=Ys;function Js(){Re.issue("endgroup")}C.endGroup=Js;function uh(e,t){return Ws(this,void 0,void 0,function*(){Ys(e);let r;try{r=yield t()}finally{Js()}return r})}C.group=uh;function dh(e,t){if(process.env.GITHUB_STATE||"")return yt.issueFileCommand("STATE",yt.prepareKeyValueMessage(e,t));Re.issueCommand("save-state",{name:e},Lt.toCommandValue(t))}C.saveState=dh;function hh(e){return process.env[`STATE_${e}`]||""}C.getState=hh;function wh(e){return Ws(this,void 0,void 0,function*(){return yield Yd.OidcClient.getIDToken(e)})}C.getIDToken=wh;var ph=Si();Object.defineProperty(C,"summary",{enumerable:!0,get:function(){return ph.summary}});var mh=Si();Object.defineProperty(C,"markdownSummary",{enumerable:!0,get:function(){return mh.markdownSummary}});var Ri=Gs();Object.defineProperty(C,"toPosixPath",{enumerable:!0,get:function(){return Ri.toPosixPath}});Object.defineProperty(C,"toWin32Path",{enumerable:!0,get:function(){return Ri.toWin32Path}});Object.defineProperty(C,"toPlatformPath",{enumerable:!0,get:function(){return Ri.toPlatformPath}})});var eo=U((N_,Qs)=>{"use strict";var ve=function(e){if(e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.domainReentrant){if(typeof process>"u"||typeof process.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=e.timeout||ve.DEFAULT_TIMEOUT,this.maxOccupationTime=e.maxOccupationTime||ve.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=e.maxExecutionTime||ve.DEFAULT_MAX_EXECUTION_TIME,e.maxPending===1/0||Number.isInteger(e.maxPending)&&e.maxPending>=0?this.maxPending=e.maxPending:this.maxPending=ve.DEFAULT_MAX_PENDING};ve.DEFAULT_TIMEOUT=0;ve.DEFAULT_MAX_OCCUPATION_TIME=0;ve.DEFAULT_MAX_EXECUTION_TIME=0;ve.DEFAULT_MAX_PENDING=1e3;ve.prototype.acquire=function(e,t,r,n){if(Array.isArray(e))return this._acquireBatch(e,t,r,n);if(typeof t!="function")throw new Error("You must pass a function to execute");var i=null,a=null,s=null;typeof r!="function"&&(n=r,r=null,s=new this.Promise(function(_,x){i=_,a=x})),n=n||{};var o=!1,l=null,f=null,c=null,u=this,d=function(_,x,E){f&&(clearTimeout(f),f=null),c&&(clearTimeout(c),c=null),_&&(u.queues[e]&&u.queues[e].length===0&&delete u.queues[e],u.domainReentrant&&delete u.domains[e]),o||(s?x?a(x):i(E):typeof r=="function"&&r(x,E),o=!0),_&&u.queues[e]&&u.queues[e].length>0&&u.queues[e].shift()()},h=function(_){if(o)return d(_);l&&(clearTimeout(l),l=null),u.domainReentrant&&_&&(u.domains[e]=process.domain);var x=n.maxExecutionTime||u.maxExecutionTime;if(x&&(c=setTimeout(function(){u.queues[e]&&d(_,new Error("Maximum execution time is exceeded "+e))},x)),t.length===1){var E=!1;try{t(function(y,b){E||(E=!0,d(_,y,b))})}catch(y){E||(E=!0,d(_,y))}}else u._promiseTry(function(){return t()}).then(function(y){d(_,void 0,y)},function(y){d(_,y)})};if(u.domainReentrant&&process.domain&&(h=process.domain.bind(h)),!u.queues[e])u.queues[e]=[],h(!0);else if(u.domainReentrant&&process.domain&&process.domain===u.domains[e])h(!1);else if(u.queues[e].length>=u.maxPending)d(!1,new Error("Too many pending tasks in queue "+e));else{var w=function(){h(!0)};n.skipQueue?u.queues[e].unshift(w):u.queues[e].push(w);var m=n.timeout||u.timeout;m&&(l=setTimeout(function(){l=null,d(!1,new Error("async-lock timed out in queue "+e))},m))}var g=n.maxOccupationTime||u.maxOccupationTime;if(g&&(f=setTimeout(function(){u.queues[e]&&d(!1,new Error("Maximum occupation time is exceeded in queue "+e))},g)),s)return s};ve.prototype._acquireBatch=function(e,t,r,n){typeof r!="function"&&(n=r,r=null);var i=this,a=function(o,l){return function(f){i.acquire(o,l,f,n)}},s=e.reduceRight(function(o,l){return a(l,o)},t);if(typeof r=="function")s(r);else return new this.Promise(function(o,l){s.length===1?s(function(f,c){f?l(f):o(c)}):o(s())})};ve.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0};ve.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(t){return this.Promise.reject(t)}};Qs.exports=ve});var ro=U((D_,to)=>{"use strict";to.exports=eo()});var no=U((U_,Ti)=>{typeof Object.create=="function"?Ti.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ti.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var io=U((j_,$i)=>{try{if(Ai=require("util"),typeof Ai.inherits!="function")throw"";$i.exports=Ai.inherits}catch{$i.exports=no()}var Ai});var Bi=U((Ii,so)=>{var bn=require("buffer"),Me=bn.Buffer;function ao(e,t){for(var r in e)t[r]=e[r]}Me.from&&Me.alloc&&Me.allocUnsafe&&Me.allocUnsafeSlow?so.exports=bn:(ao(bn,Ii),Ii.Buffer=xt);function xt(e,t,r){return Me(e,t,r)}xt.prototype=Object.create(Me.prototype);ao(Me,xt);xt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Me(e,t,r)};xt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Me(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};xt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Me(e)};xt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return bn.SlowBuffer(e)}});var fo=U((M_,co)=>{var oo=Bi().Buffer;function yn(e,t){this._block=oo.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}yn.prototype.update=function(e,t){typeof e=="string"&&(t=t||"utf8",e=oo.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,a=this._len,s=0;s<i;){for(var o=a%n,l=Math.min(i-s,n-o),f=0;f<l;f++)r[o+f]=e[s+f];a+=l,s+=l,a%n===0&&this._update(r)}return this._len+=i,this};yn.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=this._len*8;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(r&4294967295)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a};yn.prototype._update=function(){throw new Error("_update must be implemented by subclass")};co.exports=yn});var ho=U((z_,uo)=>{var _h=io(),lo=fo(),gh=Bi().Buffer,vh=[1518500249,1859775393,-1894007588,-899497514],bh=new Array(80);function yr(){this.init(),this._w=bh,lo.call(this,64,56)}_h(yr,lo);yr.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function yh(e){return e<<1|e>>>31}function xh(e){return e<<5|e>>>27}function Eh(e){return e<<30|e>>>2}function kh(e,t,r,n){return e===0?t&r|~t&n:e===2?t&r|t&n|r&n:t^r^n}yr.prototype._update=function(e){for(var t=this._w,r=this._a|0,n=this._b|0,i=this._c|0,a=this._d|0,s=this._e|0,o=0;o<16;++o)t[o]=e.readInt32BE(o*4);for(;o<80;++o)t[o]=yh(t[o-3]^t[o-8]^t[o-14]^t[o-16]);for(var l=0;l<80;++l){var f=~~(l/20),c=xh(r)+kh(f,n,i,a)+s+t[l]+vh[f]|0;s=a,a=i,i=Eh(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0};yr.prototype._hash=function(){var e=gh.allocUnsafe(20);return e.writeInt32BE(this._a|0,0),e.writeInt32BE(this._b|0,4),e.writeInt32BE(this._c|0,8),e.writeInt32BE(this._d|0,12),e.writeInt32BE(this._e|0,16),e};uo.exports=yr});var po=U(Pi=>{var wo;(function(e){typeof DO_NOT_EXPORT_CRC>"u"?typeof Pi=="object"?e(Pi):typeof define=="function"&&define.amd?define(function(){var t={};return e(t),t}):e(wo={}):e(wo={})})(function(e){e.version="1.2.2";function t(){for(var v=0,O=new Array(256),k=0;k!=256;++k)v=k,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,v=v&1?-306674912^v>>>1:v>>>1,O[k]=v;return typeof Int32Array<"u"?new Int32Array(O):O}var r=t();function n(v){var O=0,k=0,R=0,S=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)S[R]=v[R];for(R=0;R!=256;++R)for(k=v[R],O=256+R;O<4096;O+=256)k=S[O]=k>>>8^v[k&255];var B=[];for(R=1;R!=16;++R)B[R-1]=typeof Int32Array<"u"?S.subarray(R*256,R*256+256):S.slice(R*256,R*256+256);return B}var i=n(r),a=i[0],s=i[1],o=i[2],l=i[3],f=i[4],c=i[5],u=i[6],d=i[7],h=i[8],w=i[9],m=i[10],g=i[11],_=i[12],x=i[13],E=i[14];function y(v,O){for(var k=O^-1,R=0,S=v.length;R<S;)k=k>>>8^r[(k^v.charCodeAt(R++))&255];return~k}function b(v,O){for(var k=O^-1,R=v.length-15,S=0;S<R;)k=E[v[S++]^k&255]^x[v[S++]^k>>8&255]^_[v[S++]^k>>16&255]^g[v[S++]^k>>>24]^m[v[S++]]^w[v[S++]]^h[v[S++]]^d[v[S++]]^u[v[S++]]^c[v[S++]]^f[v[S++]]^l[v[S++]]^o[v[S++]]^s[v[S++]]^a[v[S++]]^r[v[S++]];for(R+=15;S<R;)k=k>>>8^r[(k^v[S++])&255];return~k}function A(v,O){for(var k=O^-1,R=0,S=v.length,B=0,N=0;R<S;)B=v.charCodeAt(R++),B<128?k=k>>>8^r[(k^B)&255]:B<2048?(k=k>>>8^r[(k^(192|B>>6&31))&255],k=k>>>8^r[(k^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,N=v.charCodeAt(R++)&1023,k=k>>>8^r[(k^(240|B>>8&7))&255],k=k>>>8^r[(k^(128|B>>2&63))&255],k=k>>>8^r[(k^(128|N>>6&15|(B&3)<<4))&255],k=k>>>8^r[(k^(128|N&63))&255]):(k=k>>>8^r[(k^(224|B>>12&15))&255],k=k>>>8^r[(k^(128|B>>6&63))&255],k=k>>>8^r[(k^(128|B&63))&255]);return~k}e.table=r,e.bstr=y,e.buf=b,e.str=A})});var Xe=U(ce=>{"use strict";var Sh=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function Oh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}ce.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var n in r)Oh(r,n)&&(e[n]=r[n])}}return e};ce.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var Rh={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+n),i);return}for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){var t,r,n,i,a,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,i),i+=a.length;return s}},Th={arraySet:function(e,t,r,n,i){for(var a=0;a<n;a++)e[i+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};ce.setTyped=function(e){e?(ce.Buf8=Uint8Array,ce.Buf16=Uint16Array,ce.Buf32=Int32Array,ce.assign(ce,Rh)):(ce.Buf8=Array,ce.Buf16=Array,ce.Buf32=Array,ce.assign(ce,Th))};ce.setTyped(Sh)});var jo=U(Ht=>{"use strict";var Ah=Xe(),$h=4,mo=0,_o=1,Ih=2;function Ft(e){for(var t=e.length;--t>=0;)e[t]=0}var Bh=0,Eo=1,Ph=2,Ch=3,Nh=258,zi=29,Rr=256,Er=Rr+1+zi,qt=30,Li=19,ko=2*Er+1,Et=15,Ci=16,Dh=7,qi=256,So=16,Oo=17,Ro=18,ji=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],xn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Uh=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],To=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],jh=512,Ye=new Array((Er+2)*2);Ft(Ye);var xr=new Array(qt*2);Ft(xr);var kr=new Array(jh);Ft(kr);var Sr=new Array(Nh-Ch+1);Ft(Sr);var Fi=new Array(zi);Ft(Fi);var En=new Array(qt);Ft(En);function Ni(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var Ao,$o,Io;function Di(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Bo(e){return e<256?kr[e]:kr[256+(e>>>7)]}function Or(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function me(e,t,r){e.bi_valid>Ci-r?(e.bi_buf|=t<<e.bi_valid&65535,Or(e,e.bi_buf),e.bi_buf=t>>Ci-e.bi_valid,e.bi_valid+=r-Ci):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function ze(e,t,r){me(e,r[t*2],r[t*2+1])}function Po(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function Mh(e){e.bi_valid===16?(Or(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function zh(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length,f,c,u,d,h,w,m=0;for(d=0;d<=Et;d++)e.bl_count[d]=0;for(r[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<ko;f++)c=e.heap[f],d=r[r[c*2+1]*2+1]+1,d>l&&(d=l,m++),r[c*2+1]=d,!(c>n)&&(e.bl_count[d]++,h=0,c>=o&&(h=s[c-o]),w=r[c*2],e.opt_len+=w*(d+h),a&&(e.static_len+=w*(i[c*2+1]+h)));if(m!==0){do{for(d=l-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(d=l;d!==0;d--)for(c=e.bl_count[d];c!==0;)u=e.heap[--f],!(u>n)&&(r[u*2+1]!==d&&(e.opt_len+=(d-r[u*2+1])*r[u*2],r[u*2+1]=d),c--)}}function Co(e,t,r){var n=new Array(Et+1),i=0,a,s;for(a=1;a<=Et;a++)n[a]=i=i+r[a-1]<<1;for(s=0;s<=t;s++){var o=e[s*2+1];o!==0&&(e[s*2]=Po(n[o]++,o))}}function Lh(){var e,t,r,n,i,a=new Array(Et+1);for(r=0,n=0;n<zi-1;n++)for(Fi[n]=r,e=0;e<1<<ji[n];e++)Sr[r++]=n;for(Sr[r-1]=n,i=0,n=0;n<16;n++)for(En[n]=i,e=0;e<1<<xn[n];e++)kr[i++]=n;for(i>>=7;n<qt;n++)for(En[n]=i<<7,e=0;e<1<<xn[n]-7;e++)kr[256+i++]=n;for(t=0;t<=Et;t++)a[t]=0;for(e=0;e<=143;)Ye[e*2+1]=8,e++,a[8]++;for(;e<=255;)Ye[e*2+1]=9,e++,a[9]++;for(;e<=279;)Ye[e*2+1]=7,e++,a[7]++;for(;e<=287;)Ye[e*2+1]=8,e++,a[8]++;for(Co(Ye,Er+1,a),e=0;e<qt;e++)xr[e*2+1]=5,xr[e*2]=Po(e,5);Ao=new Ni(Ye,ji,Rr+1,Er,Et),$o=new Ni(xr,xn,0,qt,Et),Io=new Ni(new Array(0),Uh,0,Li,Dh)}function No(e){var t;for(t=0;t<Er;t++)e.dyn_ltree[t*2]=0;for(t=0;t<qt;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Li;t++)e.bl_tree[t*2]=0;e.dyn_ltree[qi*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Do(e){e.bi_valid>8?Or(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function qh(e,t,r,n){Do(e),n&&(Or(e,r),Or(e,~r)),Ah.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function go(e,t,r,n){var i=t*2,a=r*2;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function Ui(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&go(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!go(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function vo(e,t,r){var n,i,a=0,s,o;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],i=e.pending_buf[e.l_buf+a],a++,n===0?ze(e,i,t):(s=Sr[i],ze(e,s+Rr+1,t),o=ji[s],o!==0&&(i-=Fi[s],me(e,i,o)),n--,s=Bo(n),ze(e,s,r),o=xn[s],o!==0&&(n-=En[s],me(e,n,o)));while(a<e.last_lit);ze(e,qi,t)}function Mi(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,s,o,l=-1,f;for(e.heap_len=0,e.heap_max=ko,s=0;s<a;s++)r[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=l<2?++l:0,r[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=n[f*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)Ui(e,r,s);f=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ui(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,r[f*2]=r[s*2]+r[o*2],e.depth[f]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,r[s*2+1]=r[o*2+1]=f,e.heap[1]=f++,Ui(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],zh(e,t),Co(r,l,e.bl_count)}function bo(e,t,r){var n,i=-1,a,s=t[0*2+1],o=0,l=7,f=4;for(s===0&&(l=138,f=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],!(++o<l&&a===s)&&(o<f?e.bl_tree[a*2]+=o:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[So*2]++):o<=10?e.bl_tree[Oo*2]++:e.bl_tree[Ro*2]++,o=0,i=a,s===0?(l=138,f=3):a===s?(l=6,f=3):(l=7,f=4))}function yo(e,t,r){var n,i=-1,a,s=t[0*2+1],o=0,l=7,f=4;for(s===0&&(l=138,f=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++o<l&&a===s)){if(o<f)do ze(e,a,e.bl_tree);while(--o!==0);else a!==0?(a!==i&&(ze(e,a,e.bl_tree),o--),ze(e,So,e.bl_tree),me(e,o-3,2)):o<=10?(ze(e,Oo,e.bl_tree),me(e,o-3,3)):(ze(e,Ro,e.bl_tree),me(e,o-11,7));o=0,i=a,s===0?(l=138,f=3):a===s?(l=6,f=3):(l=7,f=4)}}function Fh(e){var t;for(bo(e,e.dyn_ltree,e.l_desc.max_code),bo(e,e.dyn_dtree,e.d_desc.max_code),Mi(e,e.bl_desc),t=Li-1;t>=3&&e.bl_tree[To[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function Hh(e,t,r,n){var i;for(me(e,t-257,5),me(e,r-1,5),me(e,n-4,4),i=0;i<n;i++)me(e,e.bl_tree[To[i]*2+1],3);yo(e,e.dyn_ltree,t-1),yo(e,e.dyn_dtree,r-1)}function Gh(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return mo;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return _o;for(r=32;r<Rr;r++)if(e.dyn_ltree[r*2]!==0)return _o;return mo}var xo=!1;function Zh(e){xo||(Lh(),xo=!0),e.l_desc=new Di(e.dyn_ltree,Ao),e.d_desc=new Di(e.dyn_dtree,$o),e.bl_desc=new Di(e.bl_tree,Io),e.bi_buf=0,e.bi_valid=0,No(e)}function Uo(e,t,r,n){me(e,(Bh<<1)+(n?1:0),3),qh(e,t,r,!0)}function Wh(e){me(e,Eo<<1,3),ze(e,qi,Ye),Mh(e)}function Vh(e,t,r,n){var i,a,s=0;e.level>0?(e.strm.data_type===Ih&&(e.strm.data_type=Gh(e)),Mi(e,e.l_desc),Mi(e,e.d_desc),s=Fh(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&t!==-1?Uo(e,t,r,n):e.strategy===$h||a===i?(me(e,(Eo<<1)+(n?1:0),3),vo(e,Ye,xr)):(me(e,(Ph<<1)+(n?1:0),3),Hh(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),vo(e,e.dyn_ltree,e.dyn_dtree)),No(e),n&&Do(e)}function Kh(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Sr[r]+Rr+1)*2]++,e.dyn_dtree[Bo(t)*2]++),e.last_lit===e.lit_bufsize-1}Ht._tr_init=Zh;Ht._tr_stored_block=Uo;Ht._tr_flush_block=Vh;Ht._tr_tally=Kh;Ht._tr_align=Wh});var Hi=U((H_,Mo)=>{"use strict";function Xh(e,t,r,n){for(var i=e&65535|0,a=e>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0}Mo.exports=Xh});var Gi=U((G_,zo)=>{"use strict";function Yh(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var Jh=Yh();function Qh(e,t,r,n){var i=Jh,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[(e^t[s])&255];return e^-1}zo.exports=Qh});var kn=U((Z_,Lo)=>{"use strict";Lo.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var Xo=U(Fe=>{"use strict";var fe=Xe(),Te=jo(),Go=Hi(),lt=Gi(),e0=kn(),Rt=0,t0=1,r0=3,pt=4,qo=5,qe=0,Fo=1,Ae=-2,n0=-3,Zi=-5,i0=-1,a0=1,Sn=2,s0=3,o0=4,c0=0,f0=2,An=8,l0=9,u0=15,d0=8,h0=29,w0=256,Vi=w0+1+h0,p0=30,m0=19,_0=2*Vi+1,g0=15,j=3,ht=258,Pe=ht+j+1,v0=32,$n=42,Ki=69,On=73,Rn=91,Tn=103,kt=113,Ar=666,Y=1,$r=2,St=3,Wt=4,b0=3;function wt(e,t){return e.msg=e0[t],t}function Ho(e){return(e<<1)-(e>4?9:0)}function dt(e){for(var t=e.length;--t>=0;)e[t]=0}function ut(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(fe.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function ne(e,t){Te._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ut(e.strm)}function z(e,t){e.pending_buf[e.pending++]=t}function Tr(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function y0(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,fe.arraySet(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=Go(e.adler,t,i,r):e.state.wrap===2&&(e.adler=lt(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function Zo(e,t){var r=e.max_chain_length,n=e.strstart,i,a,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-Pe?e.strstart-(e.w_size-Pe):0,f=e.window,c=e.w_mask,u=e.prev,d=e.strstart+ht,h=f[n+s-1],w=f[n+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do if(i=t,!(f[i+s]!==w||f[i+s-1]!==h||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<d);if(a=ht-(d-n),n=d-ht,a>s){if(e.match_start=t,s=a,a>=o)break;h=f[n+s-1],w=f[n+s]}}while((t=u[t&c])>l&&--r!==0);return s<=e.lookahead?s:e.lookahead}function Ot(e){var t=e.w_size,r,n,i,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Pe)){fe.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);a+=t}if(e.strm.avail_in===0)break;if(n=y0(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=j)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+j-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<j)););}while(e.lookahead<Pe&&e.strm.avail_in!==0)}function x0(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ot(e),e.lookahead===0&&t===Rt)return Y;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,ne(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Pe&&(ne(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===pt?(ne(e,!0),e.strm.avail_out===0?St:Wt):(e.strstart>e.block_start&&(ne(e,!1),e.strm.avail_out===0),Y)}function Wi(e,t){for(var r,n;;){if(e.lookahead<Pe){if(Ot(e),e.lookahead<Pe&&t===Rt)return Y;if(e.lookahead===0)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Pe&&(e.match_length=Zo(e,r)),e.match_length>=j)if(n=Te._tr_tally(e,e.strstart-e.match_start,e.match_length-j),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=j){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=Te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ne(e,!1),e.strm.avail_out===0))return Y}return e.insert=e.strstart<j-1?e.strstart:j-1,t===pt?(ne(e,!0),e.strm.avail_out===0?St:Wt):e.last_lit&&(ne(e,!1),e.strm.avail_out===0)?Y:$r}function Gt(e,t){for(var r,n,i;;){if(e.lookahead<Pe){if(Ot(e),e.lookahead<Pe&&t===Rt)return Y;if(e.lookahead===0)break}if(r=0,e.lookahead>=j&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=j-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Pe&&(e.match_length=Zo(e,r),e.match_length<=5&&(e.strategy===a0||e.match_length===j&&e.strstart-e.match_start>4096)&&(e.match_length=j-1)),e.prev_length>=j&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-j,n=Te._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-j),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+j-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=j-1,e.strstart++,n&&(ne(e,!1),e.strm.avail_out===0))return Y}else if(e.match_available){if(n=Te._tr_tally(e,0,e.window[e.strstart-1]),n&&ne(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Te._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<j-1?e.strstart:j-1,t===pt?(ne(e,!0),e.strm.avail_out===0?St:Wt):e.last_lit&&(ne(e,!1),e.strm.avail_out===0)?Y:$r}function E0(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=ht){if(Ot(e),e.lookahead<=ht&&t===Rt)return Y;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=j&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=e.strstart+ht;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=ht-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=j?(r=Te._tr_tally(e,1,e.match_length-j),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ne(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===pt?(ne(e,!0),e.strm.avail_out===0?St:Wt):e.last_lit&&(ne(e,!1),e.strm.avail_out===0)?Y:$r}function k0(e,t){for(var r;;){if(e.lookahead===0&&(Ot(e),e.lookahead===0)){if(t===Rt)return Y;break}if(e.match_length=0,r=Te._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ne(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===pt?(ne(e,!0),e.strm.avail_out===0?St:Wt):e.last_lit&&(ne(e,!1),e.strm.avail_out===0)?Y:$r}function Le(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var Zt;Zt=[new Le(0,0,0,0,x0),new Le(4,4,8,4,Wi),new Le(4,5,16,8,Wi),new Le(4,6,32,32,Wi),new Le(4,4,16,16,Gt),new Le(8,16,32,32,Gt),new Le(8,16,128,128,Gt),new Le(8,32,128,256,Gt),new Le(32,128,258,1024,Gt),new Le(32,258,258,4096,Gt)];function S0(e){e.window_size=2*e.w_size,dt(e.head),e.max_lazy_match=Zt[e.level].max_lazy,e.good_match=Zt[e.level].good_length,e.nice_match=Zt[e.level].nice_length,e.max_chain_length=Zt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=j-1,e.match_available=0,e.ins_h=0}function O0(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=An,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new fe.Buf16(_0*2),this.dyn_dtree=new fe.Buf16((2*p0+1)*2),this.bl_tree=new fe.Buf16((2*m0+1)*2),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new fe.Buf16(g0+1),this.heap=new fe.Buf16(2*Vi+1),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new fe.Buf16(2*Vi+1),dt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Wo(e){var t;return!e||!e.state?wt(e,Ae):(e.total_in=e.total_out=0,e.data_type=f0,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?$n:kt,e.adler=t.wrap===2?0:1,t.last_flush=Rt,Te._tr_init(t),qe)}function Vo(e){var t=Wo(e);return t===qe&&S0(e.state),t}function R0(e,t){return!e||!e.state||e.state.wrap!==2?Ae:(e.state.gzhead=t,qe)}function Ko(e,t,r,n,i,a){if(!e)return Ae;var s=1;if(t===i0&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>l0||r!==An||n<8||n>15||t<0||t>9||a<0||a>o0)return wt(e,Ae);n===8&&(n=9);var o=new O0;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+j-1)/j),o.window=new fe.Buf8(o.w_size*2),o.head=new fe.Buf16(o.hash_size),o.prev=new fe.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new fe.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=(1+2)*o.lit_bufsize,o.level=t,o.strategy=a,o.method=r,Vo(e)}function T0(e,t){return Ko(e,t,An,u0,d0,c0)}function A0(e,t){var r,n,i,a;if(!e||!e.state||t>qo||t<0)return e?wt(e,Ae):Ae;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===Ar&&t!==pt)return wt(e,e.avail_out===0?Zi:Ae);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===$n)if(n.wrap===2)e.adler=0,z(n,31),z(n,139),z(n,8),n.gzhead?(z(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),z(n,n.gzhead.time&255),z(n,n.gzhead.time>>8&255),z(n,n.gzhead.time>>16&255),z(n,n.gzhead.time>>24&255),z(n,n.level===9?2:n.strategy>=Sn||n.level<2?4:0),z(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(z(n,n.gzhead.extra.length&255),z(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=lt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Ki):(z(n,0),z(n,0),z(n,0),z(n,0),z(n,0),z(n,n.level===9?2:n.strategy>=Sn||n.level<2?4:0),z(n,b0),n.status=kt);else{var s=An+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=Sn||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,s|=o<<6,n.strstart!==0&&(s|=v0),s+=31-s%31,n.status=kt,Tr(n,s),n.strstart!==0&&(Tr(n,e.adler>>>16),Tr(n,e.adler&65535)),e.adler=1}if(n.status===Ki)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),ut(e),i=n.pending,n.pending===n.pending_buf_size));)z(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=On)}else n.status=On;if(n.status===On)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),ut(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,z(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.gzindex=0,n.status=Rn)}else n.status=Rn;if(n.status===Rn)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),ut(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,z(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=lt(e.adler,n.pending_buf,n.pending-i,i)),a===0&&(n.status=Tn)}else n.status=Tn;if(n.status===Tn&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&ut(e),n.pending+2<=n.pending_buf_size&&(z(n,e.adler&255),z(n,e.adler>>8&255),e.adler=0,n.status=kt)):n.status=kt),n.pending!==0){if(ut(e),e.avail_out===0)return n.last_flush=-1,qe}else if(e.avail_in===0&&Ho(t)<=Ho(r)&&t!==pt)return wt(e,Zi);if(n.status===Ar&&e.avail_in!==0)return wt(e,Zi);if(e.avail_in!==0||n.lookahead!==0||t!==Rt&&n.status!==Ar){var l=n.strategy===Sn?k0(n,t):n.strategy===s0?E0(n,t):Zt[n.level].func(n,t);if((l===St||l===Wt)&&(n.status=Ar),l===Y||l===St)return e.avail_out===0&&(n.last_flush=-1),qe;if(l===$r&&(t===t0?Te._tr_align(n):t!==qo&&(Te._tr_stored_block(n,0,0,!1),t===r0&&(dt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),ut(e),e.avail_out===0))return n.last_flush=-1,qe}return t!==pt?qe:n.wrap<=0?Fo:(n.wrap===2?(z(n,e.adler&255),z(n,e.adler>>8&255),z(n,e.adler>>16&255),z(n,e.adler>>24&255),z(n,e.total_in&255),z(n,e.total_in>>8&255),z(n,e.total_in>>16&255),z(n,e.total_in>>24&255)):(Tr(n,e.adler>>>16),Tr(n,e.adler&65535)),ut(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?qe:Fo)}function $0(e){var t;return!e||!e.state?Ae:(t=e.state.status,t!==$n&&t!==Ki&&t!==On&&t!==Rn&&t!==Tn&&t!==kt&&t!==Ar?wt(e,Ae):(e.state=null,t===kt?wt(e,n0):qe))}function I0(e,t){var r=t.length,n,i,a,s,o,l,f,c;if(!e||!e.state||(n=e.state,s=n.wrap,s===2||s===1&&n.status!==$n||n.lookahead))return Ae;for(s===1&&(e.adler=Go(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(s===0&&(dt(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new fe.Buf8(n.w_size),fe.arraySet(c,t,r-n.w_size,n.w_size,0),t=c,r=n.w_size),o=e.avail_in,l=e.next_in,f=e.input,e.avail_in=r,e.next_in=0,e.input=t,Ot(n);n.lookahead>=j;){i=n.strstart,a=n.lookahead-(j-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+j-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--a);n.strstart=i,n.lookahead=j-1,Ot(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=j-1,n.match_available=0,e.next_in=l,e.input=f,e.avail_in=o,n.wrap=s,qe}Fe.deflateInit=T0;Fe.deflateInit2=Ko;Fe.deflateReset=Vo;Fe.deflateResetKeep=Wo;Fe.deflateSetHeader=R0;Fe.deflate=A0;Fe.deflateEnd=$0;Fe.deflateSetDictionary=I0;Fe.deflateInfo="pako deflate (from Nodeca project)"});var Xi=U(Vt=>{"use strict";var In=Xe(),Yo=!0,Jo=!0;try{String.fromCharCode.apply(null,[0])}catch{Yo=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Jo=!1}var Ir=new In.Buf8(256);for(Je=0;Je<256;Je++)Ir[Je]=Je>=252?6:Je>=248?5:Je>=240?4:Je>=224?3:Je>=192?2:1;var Je;Ir[254]=Ir[254]=1;Vt.string2buf=function(e){var t,r,n,i,a,s=e.length,o=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new In.Buf8(o),a=0,i=0;a<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};function Qo(e,t){if(t<65534&&(e.subarray&&Jo||!e.subarray&&Yo))return String.fromCharCode.apply(null,In.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}Vt.buf2binstring=function(e){return Qo(e,e.length)};Vt.binstring2buf=function(e){for(var t=new In.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t};Vt.buf2string=function(e,t){var r,n,i,a,s=t||e.length,o=new Array(s*2);for(n=0,r=0;r<s;){if(i=e[r++],i<128){o[n++]=i;continue}if(a=Ir[i],a>4){o[n++]=65533,r+=a-1;continue}for(i&=a===2?31:a===3?15:7;a>1&&r<s;)i=i<<6|e[r++]&63,a--;if(a>1){o[n++]=65533;continue}i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|i&1023)}return Qo(o,n)};Vt.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Ir[e[r]]>t?r:t}});var Yi=U((K_,ec)=>{"use strict";function B0(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}ec.exports=B0});var ic=U(Cr=>{"use strict";var Br=Xo(),Pr=Xe(),Qi=Xi(),ea=kn(),P0=Yi(),nc=Object.prototype.toString,C0=0,Ji=4,Kt=0,tc=1,rc=2,N0=-1,D0=0,U0=8;function Tt(e){if(!(this instanceof Tt))return new Tt(e);this.options=Pr.assign({level:N0,method:U0,chunkSize:16384,windowBits:15,memLevel:8,strategy:D0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new P0,this.strm.avail_out=0;var r=Br.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Kt)throw new Error(ea[r]);if(t.header&&Br.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(typeof t.dictionary=="string"?n=Qi.string2buf(t.dictionary):nc.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=Br.deflateSetDictionary(this.strm,n),r!==Kt)throw new Error(ea[r]);this._dict_set=!0}}Tt.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;a=t===~~t?t:t===!0?Ji:C0,typeof e=="string"?r.input=Qi.string2buf(e):nc.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Pr.Buf8(n),r.next_out=0,r.avail_out=n),i=Br.deflate(r,a),i!==tc&&i!==Kt)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(a===Ji||a===rc))&&(this.options.to==="string"?this.onData(Qi.buf2binstring(Pr.shrinkBuf(r.output,r.next_out))):this.onData(Pr.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==tc);return a===Ji?(i=Br.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Kt):(a===rc&&(this.onEnd(Kt),r.avail_out=0),!0)};Tt.prototype.onData=function(e){this.chunks.push(e)};Tt.prototype.onEnd=function(e){e===Kt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ta(e,t){var r=new Tt(t);if(r.push(e,!0),r.err)throw r.msg||ea[r.err];return r.result}function j0(e,t){return t=t||{},t.raw=!0,ta(e,t)}function M0(e,t){return t=t||{},t.gzip=!0,ta(e,t)}Cr.Deflate=Tt;Cr.deflate=ta;Cr.deflateRaw=j0;Cr.gzip=M0});var sc=U((Y_,ac)=>{"use strict";var Bn=30,z0=12;ac.exports=function(t,r){var n,i,a,s,o,l,f,c,u,d,h,w,m,g,_,x,E,y,b,A,v,O,k,R,S;n=t.state,i=t.next_in,R=t.input,a=i+(t.avail_in-5),s=t.next_out,S=t.output,o=s-(r-t.avail_out),l=s+(t.avail_out-257),f=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,w=n.hold,m=n.bits,g=n.lencode,_=n.distcode,x=(1<<n.lenbits)-1,E=(1<<n.distbits)-1;e:do{m<15&&(w+=R[i++]<<m,m+=8,w+=R[i++]<<m,m+=8),y=g[w&x];t:for(;;){if(b=y>>>24,w>>>=b,m-=b,b=y>>>16&255,b===0)S[s++]=y&65535;else if(b&16){A=y&65535,b&=15,b&&(m<b&&(w+=R[i++]<<m,m+=8),A+=w&(1<<b)-1,w>>>=b,m-=b),m<15&&(w+=R[i++]<<m,m+=8,w+=R[i++]<<m,m+=8),y=_[w&E];r:for(;;){if(b=y>>>24,w>>>=b,m-=b,b=y>>>16&255,b&16){if(v=y&65535,b&=15,m<b&&(w+=R[i++]<<m,m+=8,m<b&&(w+=R[i++]<<m,m+=8)),v+=w&(1<<b)-1,v>f){t.msg="invalid distance too far back",n.mode=Bn;break e}if(w>>>=b,m-=b,b=s-o,v>b){if(b=v-b,b>u&&n.sane){t.msg="invalid distance too far back",n.mode=Bn;break e}if(O=0,k=h,d===0){if(O+=c-b,b<A){A-=b;do S[s++]=h[O++];while(--b);O=s-v,k=S}}else if(d<b){if(O+=c+d-b,b-=d,b<A){A-=b;do S[s++]=h[O++];while(--b);if(O=0,d<A){b=d,A-=b;do S[s++]=h[O++];while(--b);O=s-v,k=S}}}else if(O+=d-b,b<A){A-=b;do S[s++]=h[O++];while(--b);O=s-v,k=S}for(;A>2;)S[s++]=k[O++],S[s++]=k[O++],S[s++]=k[O++],A-=3;A&&(S[s++]=k[O++],A>1&&(S[s++]=k[O++]))}else{O=s-v;do S[s++]=S[O++],S[s++]=S[O++],S[s++]=S[O++],A-=3;while(A>2);A&&(S[s++]=S[O++],A>1&&(S[s++]=S[O++]))}}else if(b&64){t.msg="invalid distance code",n.mode=Bn;break e}else{y=_[(y&65535)+(w&(1<<b)-1)];continue r}break}}else if(b&64)if(b&32){n.mode=z0;break e}else{t.msg="invalid literal/length code",n.mode=Bn;break e}else{y=g[(y&65535)+(w&(1<<b)-1)];continue t}break}}while(i<a&&s<l);A=m>>3,i-=A,m-=A<<3,w&=(1<<m)-1,t.next_in=i,t.next_out=s,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=s<l?257+(l-s):257-(s-l),n.hold=w,n.bits=m}});var hc=U((J_,dc)=>{"use strict";var oc=Xe(),Xt=15,cc=852,fc=592,lc=0,ra=1,uc=2,L0=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],q0=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],F0=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],H0=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];dc.exports=function(t,r,n,i,a,s,o,l){var f=l.bits,c=0,u=0,d=0,h=0,w=0,m=0,g=0,_=0,x=0,E=0,y,b,A,v,O,k=null,R=0,S,B=new oc.Buf16(Xt+1),N=new oc.Buf16(Xt+1),F=null,de=0,at,he,Ve;for(c=0;c<=Xt;c++)B[c]=0;for(u=0;u<i;u++)B[r[n+u]]++;for(w=f,h=Xt;h>=1&&B[h]===0;h--);if(w>h&&(w=h),h===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,l.bits=1,0;for(d=1;d<h&&B[d]===0;d++);for(w<d&&(w=d),_=1,c=1;c<=Xt;c++)if(_<<=1,_-=B[c],_<0)return-1;if(_>0&&(t===lc||h!==1))return-1;for(N[1]=0,c=1;c<Xt;c++)N[c+1]=N[c]+B[c];for(u=0;u<i;u++)r[n+u]!==0&&(o[N[r[n+u]]++]=u);if(t===lc?(k=F=o,S=19):t===ra?(k=L0,R-=257,F=q0,de-=257,S=256):(k=F0,F=H0,S=-1),E=0,u=0,c=d,O=s,m=w,g=0,A=-1,x=1<<w,v=x-1,t===ra&&x>cc||t===uc&&x>fc)return 1;for(;;){at=c-g,o[u]<S?(he=0,Ve=o[u]):o[u]>S?(he=F[de+o[u]],Ve=k[R+o[u]]):(he=32+64,Ve=0),y=1<<c-g,b=1<<m,d=b;do b-=y,a[O+(E>>g)+b]=at<<24|he<<16|Ve|0;while(b!==0);for(y=1<<c-1;E&y;)y>>=1;if(y!==0?(E&=y-1,E+=y):E=0,u++,--B[c]===0){if(c===h)break;c=r[n+o[u]]}if(c>w&&(E&v)!==A){for(g===0&&(g=w),O+=d,m=c-g,_=1<<m;m+g<h&&(_-=B[m+g],!(_<=0));)m++,_<<=1;if(x+=1<<m,t===ra&&x>cc||t===uc&&x>fc)return 1;A=E&v,a[A]=w<<24|m<<16|O-s|0}}return E!==0&&(a[O+E]=c-g<<24|64<<16|0),l.bits=w,0}});var Vc=U(Ce=>{"use strict";var be=Xe(),ca=Hi(),He=Gi(),G0=sc(),Nr=hc(),Z0=0,Mc=1,zc=2,wc=4,W0=5,Pn=6,At=0,V0=1,K0=2,$e=-2,Lc=-3,fa=-4,X0=-5,pc=8,qc=1,mc=2,_c=3,gc=4,vc=5,bc=6,yc=7,xc=8,Ec=9,kc=10,Dn=11,Qe=12,na=13,Sc=14,ia=15,Oc=16,Rc=17,Tc=18,Ac=19,Cn=20,Nn=21,$c=22,Ic=23,Bc=24,Pc=25,Cc=26,aa=27,Nc=28,Dc=29,G=30,la=31,Y0=32,J0=852,Q0=592,ew=15,tw=ew;function Uc(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function rw(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new be.Buf16(320),this.work=new be.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fc(e){var t;return!e||!e.state?$e:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=qc,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new be.Buf32(J0),t.distcode=t.distdyn=new be.Buf32(Q0),t.sane=1,t.back=-1,At)}function Hc(e){var t;return!e||!e.state?$e:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,Fc(e))}function Gc(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?$e:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Hc(e))}function Zc(e,t){var r,n;return e?(n=new rw,e.state=n,n.window=null,r=Gc(e,t),r!==At&&(e.state=null),r):$e}function nw(e){return Zc(e,tw)}var jc=!0,sa,oa;function iw(e){if(jc){var t;for(sa=new be.Buf32(512),oa=new be.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nr(Mc,e.lens,0,288,sa,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nr(zc,e.lens,0,32,oa,0,e.work,{bits:5}),jc=!1}e.lencode=sa,e.lenbits=9,e.distcode=oa,e.distbits=5}function Wc(e,t,r,n){var i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new be.Buf8(a.wsize)),n>=a.wsize?(be.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),be.arraySet(a.window,t,r-n,i,a.wnext),n-=i,n?(be.arraySet(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function aw(e,t){var r,n,i,a,s,o,l,f,c,u,d,h,w,m,g=0,_,x,E,y,b,A,v,O,k=new be.Buf8(4),R,S,B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return $e;r=e.state,r.mode===Qe&&(r.mode=na),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,f=r.hold,c=r.bits,u=o,d=l,O=At;e:for(;;)switch(r.mode){case qc:if(r.wrap===0){r.mode=na;break}for(;c<16;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(r.wrap&2&&f===35615){r.check=0,k[0]=f&255,k[1]=f>>>8&255,r.check=He(r.check,k,2,0),f=0,c=0,r.mode=mc;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=G;break}if((f&15)!==pc){e.msg="unknown compression method",r.mode=G;break}if(f>>>=4,c-=4,v=(f&15)+8,r.wbits===0)r.wbits=v;else if(v>r.wbits){e.msg="invalid window size",r.mode=G;break}r.dmax=1<<v,e.adler=r.check=1,r.mode=f&512?kc:Qe,f=0,c=0;break;case mc:for(;c<16;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(r.flags=f,(r.flags&255)!==pc){e.msg="unknown compression method",r.mode=G;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=G;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&(k[0]=f&255,k[1]=f>>>8&255,r.check=He(r.check,k,2,0)),f=0,c=0,r.mode=_c;case _c:for(;c<32;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.head&&(r.head.time=f),r.flags&512&&(k[0]=f&255,k[1]=f>>>8&255,k[2]=f>>>16&255,k[3]=f>>>24&255,r.check=He(r.check,k,4,0)),f=0,c=0,r.mode=gc;case gc:for(;c<16;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&(k[0]=f&255,k[1]=f>>>8&255,r.check=He(r.check,k,2,0)),f=0,c=0,r.mode=vc;case vc:if(r.flags&1024){for(;c<16;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&(k[0]=f&255,k[1]=f>>>8&255,r.check=He(r.check,k,2,0)),f=0,c=0}else r.head&&(r.head.extra=null);r.mode=bc;case bc:if(r.flags&1024&&(h=r.length,h>o&&(h=o),h&&(r.head&&(v=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),be.arraySet(r.head.extra,n,a,h,v)),r.flags&512&&(r.check=He(r.check,n,h,a)),o-=h,a+=h,r.length-=h),r.length))break e;r.length=0,r.mode=yc;case yc:if(r.flags&2048){if(o===0)break e;h=0;do v=n[a+h++],r.head&&v&&r.length<65536&&(r.head.name+=String.fromCharCode(v));while(v&&h<o);if(r.flags&512&&(r.check=He(r.check,n,h,a)),o-=h,a+=h,v)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=xc;case xc:if(r.flags&4096){if(o===0)break e;h=0;do v=n[a+h++],r.head&&v&&r.length<65536&&(r.head.comment+=String.fromCharCode(v));while(v&&h<o);if(r.flags&512&&(r.check=He(r.check,n,h,a)),o-=h,a+=h,v)break e}else r.head&&(r.head.comment=null);r.mode=Ec;case Ec:if(r.flags&512){for(;c<16;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=G;break}f=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Qe;break;case kc:for(;c<32;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}e.adler=r.check=Uc(f),f=0,c=0,r.mode=Dn;case Dn:if(r.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=f,r.bits=c,K0;e.adler=r.check=1,r.mode=Qe;case Qe:if(t===W0||t===Pn)break e;case na:if(r.last){f>>>=c&7,c-=c&7,r.mode=aa;break}for(;c<3;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}switch(r.last=f&1,f>>>=1,c-=1,f&3){case 0:r.mode=Sc;break;case 1:if(iw(r),r.mode=Cn,t===Pn){f>>>=2,c-=2;break e}break;case 2:r.mode=Rc;break;case 3:e.msg="invalid block type",r.mode=G}f>>>=2,c-=2;break;case Sc:for(f>>>=c&7,c-=c&7;c<32;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=G;break}if(r.length=f&65535,f=0,c=0,r.mode=ia,t===Pn)break e;case ia:r.mode=Oc;case Oc:if(h=r.length,h){if(h>o&&(h=o),h>l&&(h=l),h===0)break e;be.arraySet(i,n,a,h,s),o-=h,a+=h,l-=h,s+=h,r.length-=h;break}r.mode=Qe;break;case Rc:for(;c<14;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(r.nlen=(f&31)+257,f>>>=5,c-=5,r.ndist=(f&31)+1,f>>>=5,c-=5,r.ncode=(f&15)+4,f>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=G;break}r.have=0,r.mode=Tc;case Tc:for(;r.have<r.ncode;){for(;c<3;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.lens[B[r.have++]]=f&7,f>>>=3,c-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},O=Nr(Z0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid code lengths set",r.mode=G;break}r.have=0,r.mode=Ac;case Ac:for(;r.have<r.nlen+r.ndist;){for(;g=r.lencode[f&(1<<r.lenbits)-1],_=g>>>24,x=g>>>16&255,E=g&65535,!(_<=c);){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(E<16)f>>>=_,c-=_,r.lens[r.have++]=E;else{if(E===16){for(S=_+2;c<S;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(f>>>=_,c-=_,r.have===0){e.msg="invalid bit length repeat",r.mode=G;break}v=r.lens[r.have-1],h=3+(f&3),f>>>=2,c-=2}else if(E===17){for(S=_+3;c<S;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}f>>>=_,c-=_,v=0,h=3+(f&7),f>>>=3,c-=3}else{for(S=_+7;c<S;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}f>>>=_,c-=_,v=0,h=11+(f&127),f>>>=7,c-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=G;break}for(;h--;)r.lens[r.have++]=v}}if(r.mode===G)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=G;break}if(r.lenbits=9,R={bits:r.lenbits},O=Nr(Mc,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,O){e.msg="invalid literal/lengths set",r.mode=G;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},O=Nr(zc,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,O){e.msg="invalid distances set",r.mode=G;break}if(r.mode=Cn,t===Pn)break e;case Cn:r.mode=Nn;case Nn:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=f,r.bits=c,G0(e,d),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,f=r.hold,c=r.bits,r.mode===Qe&&(r.back=-1);break}for(r.back=0;g=r.lencode[f&(1<<r.lenbits)-1],_=g>>>24,x=g>>>16&255,E=g&65535,!(_<=c);){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(x&&!(x&240)){for(y=_,b=x,A=E;g=r.lencode[A+((f&(1<<y+b)-1)>>y)],_=g>>>24,x=g>>>16&255,E=g&65535,!(y+_<=c);){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}f>>>=y,c-=y,r.back+=y}if(f>>>=_,c-=_,r.back+=_,r.length=E,x===0){r.mode=Cc;break}if(x&32){r.back=-1,r.mode=Qe;break}if(x&64){e.msg="invalid literal/length code",r.mode=G;break}r.extra=x&15,r.mode=$c;case $c:if(r.extra){for(S=r.extra;c<S;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Ic;case Ic:for(;g=r.distcode[f&(1<<r.distbits)-1],_=g>>>24,x=g>>>16&255,E=g&65535,!(_<=c);){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(!(x&240)){for(y=_,b=x,A=E;g=r.distcode[A+((f&(1<<y+b)-1)>>y)],_=g>>>24,x=g>>>16&255,E=g&65535,!(y+_<=c);){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}f>>>=y,c-=y,r.back+=y}if(f>>>=_,c-=_,r.back+=_,x&64){e.msg="invalid distance code",r.mode=G;break}r.offset=E,r.extra=x&15,r.mode=Bc;case Bc:if(r.extra){for(S=r.extra;c<S;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=G;break}r.mode=Pc;case Pc:if(l===0)break e;if(h=d-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=G;break}h>r.wnext?(h-=r.wnext,w=r.wsize-h):w=r.wnext-h,h>r.length&&(h=r.length),m=r.window}else m=i,w=s-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do i[s++]=m[w++];while(--h);r.length===0&&(r.mode=Nn);break;case Cc:if(l===0)break e;i[s++]=r.length,l--,r.mode=Nn;break;case aa:if(r.wrap){for(;c<32;){if(o===0)break e;o--,f|=n[a++]<<c,c+=8}if(d-=l,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?He(r.check,i,d,s-d):ca(r.check,i,d,s-d)),d=l,(r.flags?f:Uc(f))!==r.check){e.msg="incorrect data check",r.mode=G;break}f=0,c=0}r.mode=Nc;case Nc:if(r.wrap&&r.flags){for(;c<32;){if(o===0)break e;o--,f+=n[a++]<<c,c+=8}if(f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=G;break}f=0,c=0}r.mode=Dc;case Dc:O=V0;break e;case G:O=Lc;break e;case la:return fa;case Y0:default:return $e}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,r.hold=f,r.bits=c,(r.wsize||d!==e.avail_out&&r.mode<G&&(r.mode<aa||t!==wc))&&Wc(e,e.output,e.next_out,d-e.avail_out)?(r.mode=la,fa):(u-=e.avail_in,d-=e.avail_out,e.total_in+=u,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?He(r.check,i,d,e.next_out-d):ca(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Qe?128:0)+(r.mode===Cn||r.mode===ia?256:0),(u===0&&d===0||t===wc)&&O===At&&(O=X0),O)}function sw(e){if(!e||!e.state)return $e;var t=e.state;return t.window&&(t.window=null),e.state=null,At}function ow(e,t){var r;return!e||!e.state||(r=e.state,!(r.wrap&2))?$e:(r.head=t,t.done=!1,At)}function cw(e,t){var r=t.length,n,i,a;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==Dn)?$e:n.mode===Dn&&(i=1,i=ca(i,t,r,0),i!==n.check)?Lc:(a=Wc(e,t,r,r),a?(n.mode=la,fa):(n.havedict=1,At))}Ce.inflateReset=Hc;Ce.inflateReset2=Gc;Ce.inflateResetKeep=Fc;Ce.inflateInit=nw;Ce.inflateInit2=Zc;Ce.inflate=aw;Ce.inflateEnd=sw;Ce.inflateGetHeader=ow;Ce.inflateSetDictionary=cw;Ce.inflateInfo="pako inflate (from Nodeca project)"});var ua=U((eg,Kc)=>{"use strict";Kc.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var Yc=U((tg,Xc)=>{"use strict";function fw(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Xc.exports=fw});var Qc=U(Ur=>{"use strict";var Yt=Vc(),Dr=Xe(),Un=Xi(),K=ua(),da=kn(),lw=Yi(),uw=Yc(),Jc=Object.prototype.toString;function $t(e){if(!(this instanceof $t))return new $t(e);this.options=Dr.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lw,this.strm.avail_out=0;var r=Yt.inflateInit2(this.strm,t.windowBits);if(r!==K.Z_OK)throw new Error(da[r]);if(this.header=new uw,Yt.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Un.string2buf(t.dictionary):Jc.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Yt.inflateSetDictionary(this.strm,t.dictionary),r!==K.Z_OK)))throw new Error(da[r])}$t.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,s,o,l,f,c=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?K.Z_FINISH:K.Z_NO_FLUSH,typeof e=="string"?r.input=Un.binstring2buf(e):Jc.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Dr.Buf8(n),r.next_out=0,r.avail_out=n),a=Yt.inflate(r,K.Z_NO_FLUSH),a===K.Z_NEED_DICT&&i&&(a=Yt.inflateSetDictionary(this.strm,i)),a===K.Z_BUF_ERROR&&c===!0&&(a=K.Z_OK,c=!1),a!==K.Z_STREAM_END&&a!==K.Z_OK)return this.onEnd(a),this.ended=!0,!1;r.next_out&&(r.avail_out===0||a===K.Z_STREAM_END||r.avail_in===0&&(s===K.Z_FINISH||s===K.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=Un.utf8border(r.output,r.next_out),l=r.next_out-o,f=Un.buf2string(r.output,o),r.next_out=l,r.avail_out=n-l,l&&Dr.arraySet(r.output,r.output,o,l,0),this.onData(f)):this.onData(Dr.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(c=!0)}while((r.avail_in>0||r.avail_out===0)&&a!==K.Z_STREAM_END);return a===K.Z_STREAM_END&&(s=K.Z_FINISH),s===K.Z_FINISH?(a=Yt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===K.Z_OK):(s===K.Z_SYNC_FLUSH&&(this.onEnd(K.Z_OK),r.avail_out=0),!0)};$t.prototype.onData=function(e){this.chunks.push(e)};$t.prototype.onEnd=function(e){e===K.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Dr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ha(e,t){var r=new $t(t);if(r.push(e,!0),r.err)throw r.msg||da[r.err];return r.result}function dw(e,t){return t=t||{},t.raw=!0,ha(e,t)}Ur.Inflate=$t;Ur.inflate=ha;Ur.inflateRaw=dw;Ur.ungzip=ha});var rf=U((ng,tf)=>{"use strict";var hw=Xe().assign,ww=ic(),pw=Qc(),mw=ua(),ef={};hw(ef,ww,pw,mw);tf.exports=ef});var sf=U((ig,af)=>{"use strict";var nf=(e,t)=>function(...r){let n=t.promiseModule;return new n((i,a)=>{t.multiArgs?r.push((...s)=>{t.errorFirst?s[0]?a(s):(s.shift(),i(s)):i(s)}):t.errorFirst?r.push((s,o)=>{s?a(s):i(o)}):r.push(i),e.apply(this,r)})};af.exports=(e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);let r=typeof e;if(!(e!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${e===null?"null":r}\``);let n=a=>{let s=o=>typeof o=="string"?a===o:o.test(a);return t.include?t.include.some(s):!t.exclude.some(s)},i;r==="function"?i=function(...a){return t.excludeMain?e(...a):nf(e,t).apply(this,a)}:i=Object.create(Object.getPrototypeOf(e));for(let a in e){let s=e[a];i[a]=typeof s=="function"&&n(a)?nf(s,t):s}return i}});var mf=U((ag,pf)=>{function of(e){return Array.isArray(e)?e:[e]}var uf="",cf=" ",wa="\\",_w=/^\s+$/,gw=/(?:[^\\]|^)\\$/,vw=/^\\!/,bw=/^\\#/,yw=/\r?\n/g,xw=/^\.*\/|^\.+$/,pa="/",df="node-ignore";typeof Symbol<"u"&&(df=Symbol.for("node-ignore"));var ff=df,Ew=(e,t,r)=>Object.defineProperty(e,t,{value:r}),kw=/([0-z])-([0-z])/g,hf=()=>!1,Sw=e=>e.replace(kw,(t,r,n)=>r.charCodeAt(0)<=n.charCodeAt(0)?t:uf),Ow=e=>{let{length:t}=e;return e.slice(0,t-t%2)},Rw=[[/\\?\s+$/,e=>e.indexOf("\\")===0?cf:uf],[/\\\s/g,()=>cf],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let n=r.replace(/\\\*/g,"[^\\/]*");return t+n}],[/\\\\\\(?=[$.|*+(){^])/g,()=>wa],[/\\\\/g,()=>wa],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,n,i)=>t===wa?`\\[${r}${Ow(n)}${i}`:i==="]"&&n.length%2===0?`[${Sw(r)}${n}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],lf=Object.create(null),Tw=(e,t)=>{let r=lf[e];return r||(r=Rw.reduce((n,i)=>n.replace(i[0],i[1].bind(e)),e),lf[e]=r),t?new RegExp(r,"i"):new RegExp(r)},ga=e=>typeof e=="string",Aw=e=>e&&ga(e)&&!_w.test(e)&&!gw.test(e)&&e.indexOf("#")!==0,$w=e=>e.split(yw),ma=class{constructor(t,r,n,i){this.origin=t,this.pattern=r,this.negative=n,this.regex=i}},Iw=(e,t)=>{let r=e,n=!1;e.indexOf("!")===0&&(n=!0,e=e.substr(1)),e=e.replace(vw,"!").replace(bw,"#");let i=Tw(e,t);return new ma(r,e,n,i)},Bw=(e,t)=>{throw new t(e)},et=(e,t,r)=>ga(e)?e?et.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),wf=e=>xw.test(e);et.isNotRelative=wf;et.convert=e=>e;var _a=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:n=!1}={}){Ew(this,ff,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[ff]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(Aw(t)){let r=Iw(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,of(ga(t)?$w(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let n=!1,i=!1;return this._rules.forEach(a=>{let{negative:s}=a;if(i===s&&n!==i||s&&!n&&!i&&!r)return;a.regex.test(t)&&(n=!s,i=s)}),{ignored:n,unignored:i}}_test(t,r,n,i){let a=t&&et.convert(t);return et(a,t,this._allowRelativePaths?hf:Bw),this._t(a,r,n,i)}_t(t,r,n,i){if(t in r)return r[t];if(i||(i=t.split(pa)),i.pop(),!i.length)return r[t]=this._testOne(t,n);let a=this._t(i.join(pa)+pa,r,n,i);return r[t]=a.ignored?a:this._testOne(t,n)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return of(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},jn=e=>new _a(e),Pw=e=>et(e&&et.convert(e),e,hf);jn.isPathValid=Pw;jn.default=jn;pf.exports=jn;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");et.convert=e;let t=/^[a-z]:\//i;et.isNotRelative=r=>t.test(r)||wf(r)}});var gf=U((sg,_f)=>{"use strict";function Cw(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ge(e,t,r){return t=t instanceof RegExp?t:new RegExp(Cw(t),"g"),e.replace(t,r)}var Nw={clean:function(t){if(typeof t!="string")throw new Error("Expected a string, received: "+t);return t=Ge(t,"./","/"),t=Ge(t,"..","."),t=Ge(t," ","-"),t=Ge(t,/^[~^:?*\\\-]/g,""),t=Ge(t,/[~^:?*\\]/g,"-"),t=Ge(t,/[~^:?*\\\-]$/g,""),t=Ge(t,"@{","-"),t=Ge(t,/\.$/g,""),t=Ge(t,/\/$/g,""),t=Ge(t,/\.lock$/g,""),t}};_f.exports=Nw});var bf=U((og,vf)=>{vf.exports=function(e,t){var r=e,n=t,i=r.length,a=n.length,s=!1,o=null,l=i+1,f=[],c=[],u=[],d="",h=-1,w=0,m=1,g,_,x=function(){i>=a&&(g=r,_=i,r=n,n=g,i=a,a=_,s=!0,l=i+1)},E=function(v,O,k){return{x:v,y:O,k}},y=function(v,O){return{elem:v,t:O}},b=function(v,O,k){var R,S,B;for(O>k?R=f[v-1+l]:R=f[v+1+l],B=Math.max(O,k),S=B-v;S<i&&B<a&&r[S]===n[B];)++S,++B;return f[v+l]=c.length,c[c.length]=new E(S,B,R),B},A=function(v){var O,k,R,S,B;for(O=k=1,R=S=0,B=v.length-1;B>=0;--B)for(;R<v[B].x||S<v[B].y;)v[B].y-v[B].x>S-R?(s?u[u.length]=new y(n[S],h):u[u.length]=new y(n[S],m),++k,++S):v[B].y-v[B].x<S-R?(s?u[u.length]=new y(r[R],m):u[u.length]=new y(r[R],h),++O,++R):(u[u.length]=new y(r[R],w),d+=r[R],++O,++k,++R,++S)};return x(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return d},getses:function(){return u},compose:function(){var v,O,k,R,S,B,N,F;for(v=a-i,O=i+a+3,k={},N=0;N<O;++N)k[N]=-1,f[N]=-1;R=-1;do{for(++R,F=-R;F<=v-1;++F)k[F+l]=b(F,k[F-1+l]+1,k[F+1+l]);for(F=v+R;F>=v+1;--F)k[F+l]=b(F,k[F-1+l]+1,k[F+1+l]);k[v+l]=b(v,k[v-1+l]+1,k[v+1+l])}while(k[v+l]!==a);for(o=v+2*R,S=f[v+l],B=[];S!==-1;)B[B.length]=new E(c[S].x,c[S].y,null),S=c[S].k;A(B)}}}});var Ef=U((cg,xf)=>{var Dw=bf();function Uw(e,t){var r=new Dw(e,t);r.compose();for(var n=r.getses(),i,a,s=e.length-1,o=t.length-1,l=n.length-1;l>=0;--l)n[l].t===r.SES_COMMON?(a?(a.chain={file1index:s,file2index:o,chain:null},a=a.chain):(i={file1index:s,file2index:o,chain:null},a=i),s--,o--):n[l].t===r.SES_DELETE?s--:n[l].t===r.SES_ADD&&o--;var f={file1index:-1,file2index:-1,chain:null};return a?(a.chain=f,i):f}function yf(e,t){for(var r=[],n=e.length,i=t.length,a=Uw(e,t);a!==null;a=a.chain){var s=n-a.file1index-1,o=i-a.file2index-1;n=a.file1index,i=a.file2index,(s||o)&&r.push({file1:[n+1,s],file2:[i+1,o]})}return r.reverse(),r}function jw(e,t,r){var n,i=yf(t,e),a=yf(t,r),s=[];function o(N,F){s.push([N.file1[0],F,N.file1[1],N.file2[0],N.file2[1]])}for(n=0;n<i.length;n++)o(i[n],0);for(n=0;n<a.length;n++)o(a[n],2);s.sort(function(N,F){return N[0]-F[0]});var l=[],f=0;function c(N){N>f&&(l.push([1,f,N-f]),f=N)}for(var u=0;u<s.length;u++){for(var d=u,h=s[u],w=h[0],m=w+h[2];u<s.length-1;){var g=s[u+1],_=g[0];if(_>m)break;m=Math.max(m,_+g[2]),u++}if(c(w),d==u)h[4]>0&&l.push([h[1],h[3],h[4]]);else{var x={0:[e.length,-1,t.length,-1],2:[r.length,-1,t.length,-1]};for(n=d;n<=u;n++){h=s[n];var E=h[1],y=x[E],b=h[0],A=b+h[2],v=h[3],O=v+h[4];y[0]=Math.min(v,y[0]),y[1]=Math.max(O,y[1]),y[2]=Math.min(b,y[2]),y[3]=Math.max(A,y[3])}var k=x[0][0]+(w-x[0][2]),R=x[0][1]+(m-x[0][3]),S=x[2][0]+(w-x[2][2]),B=x[2][1]+(m-x[2][3]);l.push([-1,k,R-k,w,m-w,S,B-S])}f=m}return c(t.length),l}function Mw(e,t,r){var n=[],i=[e,t,r],a=jw(e,t,r),s=[];function o(){s.length&&n.push({ok:s}),s=[]}function l(h){for(var w=0;w<h.length;w++)s.push(h[w])}function f(h){if(h[2]!=h[6])return!0;for(var w=h[1],m=h[5],g=0;g<h[2];g++)if(e[g+w]!=r[g+m])return!0;return!1}for(var c=0;c<a.length;c++){var u=a[c],d=u[0];d==-1?f(u)?(o(),n.push({conflict:{a:e.slice(u[1],u[1]+u[2]),aIndex:u[1],o:t.slice(u[3],u[3]+u[4]),oIndex:u[3],b:r.slice(u[5],u[5]+u[6]),bIndex:u[5]}})):l(i[0].slice(u[1],u[1]+u[2])):l(i[d].slice(u[1],u[1]+u[2]))}return o(),n}xf.exports=Mw});var Pu=U(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});function bt(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Aa=bt(ro()),Gf=bt(ho()),zw=bt(po()),Ha=bt(rf()),va=bt(sf()),Lw=bt(mf()),We=bt(gf()),qw=bt(Ef()),M=class e extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){let r=new e(t.message);return r.code=t.code,r.data=t.data,r.caller=t.caller,r.stack=t.stack,r}get isIsomorphicGitError(){return!0}},Mr=class e extends M{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=e.code,this.data={filepaths:t}}};Mr.code="UnmergedPathsError";var D=class e extends M{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=e.code,this.data={message:t}}};D.code="InternalError";var tr=class e extends M{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=e.code,this.data={filepath:t}}};tr.code="UnsafeFilepathError";var Ie=class{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){let r=this.buffer.slice(this._start,this._start+t);return this._start+=t,r}toString(t,r){let n=this.buffer.toString(t,this._start,this._start+r);return this._start+=r,n}write(t,r,n){let i=this.buffer.write(t,this._start,r,n);return this._start+=r,i}copy(t,r,n){let i=t.copy(this.buffer,this._start,r,n);return this._start+=i,i}readUInt8(){let t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){let r=this.buffer.writeUInt8(t,this._start);return this._start+=1,r}readUInt16BE(){let t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){let r=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,r}readUInt32BE(){let t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){let r=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,r}};function Xn(e,t){return-(e<t)||+(e>t)}function Zf(e,t){return Xn(e.path,t.path)}function Wf(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let r=e&511;return r&73?r=493:r=420,t!==8&&(r=0),(t<<12)+r}var Ze=2**32;function kf(e,t,r,n){if(e!==void 0&&t!==void 0)return[e,t];r===void 0&&(r=n.valueOf());let i=Math.floor(r/1e3),a=(r-i*1e3)*1e6;return[i,a]}function rr(e){let[t,r]=kf(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[n,i]=kf(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Ze,ctimeNanoseconds:r%Ze,mtimeSeconds:n%Ze,mtimeNanoseconds:i%Ze,dev:e.dev%Ze,ino:e.ino%Ze,mode:Wf(e.mode%Ze),uid:e.uid%Ze,gid:e.gid%Ze,size:e.size>-1?e.size%Ze:0}}function Fw(e){let t="";for(let r of new Uint8Array(e))r<16&&(t+="0"),t+=r.toString(16);return t}var ba=null;async function nt(e){return ba===null&&(ba=await Gw()),ba?Vf(e):Hw(e)}function Hw(e){return new Gf().update(e).digest("hex")}async function Vf(e){let t=await crypto.subtle.digest("SHA-1",e);return Fw(t)}async function Gw(){try{if(await Vf(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function Zw(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function Ww(e){let t=e.flags;return t.extended=!1,t.nameLength=Math.min(Buffer.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}var $a=class e{constructor(t,r){this._dirty=!1,this._unmergedPaths=r||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let r=this._entries.get(t.path);r||(this._entries.set(t.path,t),r=t),r.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Buffer.isBuffer(t))return e.fromBuffer(t);if(t===null)return new e(null);throw new D("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new D("Index file is empty (.git/index)");let r=new e,n=new Ie(t),i=n.toString("utf8",4);if(i!=="DIRC")throw new D(`Invalid dircache magic file number: ${i}`);let a=await nt(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==a)throw new D(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${a}`);let o=n.readUInt32BE();if(o!==2)throw new D(`Unsupported dircache version: ${o}`);let l=n.readUInt32BE(),f=0;for(;!n.eof()&&f<l;){let c={};c.ctimeSeconds=n.readUInt32BE(),c.ctimeNanoseconds=n.readUInt32BE(),c.mtimeSeconds=n.readUInt32BE(),c.mtimeNanoseconds=n.readUInt32BE(),c.dev=n.readUInt32BE(),c.ino=n.readUInt32BE(),c.mode=n.readUInt32BE(),c.uid=n.readUInt32BE(),c.gid=n.readUInt32BE(),c.size=n.readUInt32BE(),c.oid=n.slice(20).toString("hex");let u=n.readUInt16BE();c.flags=Zw(u);let d=t.indexOf(0,n.tell()+1)-n.tell();if(d<1)throw new D(`Got a path length of: ${d}`);if(c.path=n.toString("utf8",d),c.path.includes("..\\")||c.path.includes("../"))throw new tr(c.path);let h=8-(n.tell()-12)%8;for(h===0&&(h=8);h--;){let w=n.readUInt8();if(w!==0)throw new D(`Expected 1-8 null characters but got '${w}' after ${c.path}`);if(n.eof())throw new D("Unexpected end of file")}c.stages=[],r._addEntry(c),f++}return r}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(Zf)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(r=>r):t)}*[Symbol.iterator](){for(let t of this.entries)yield t}insert({filepath:t,stats:r,oid:n,stage:i=0}){r||(r={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),r=rr(r);let a=Buffer.from(t),s={ctimeSeconds:r.ctimeSeconds,ctimeNanoseconds:r.ctimeNanoseconds,mtimeSeconds:r.mtimeSeconds,mtimeNanoseconds:r.mtimeNanoseconds,dev:r.dev,ino:r.ino,mode:r.mode||33188,uid:r.uid,gid:r.gid,size:r.size,path:t,oid:n,flags:{assumeValid:!1,extended:!1,stage:i,nameLength:a.length<4095?a.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(let r of this._entries.keys())r.startsWith(t+"/")&&this._entries.delete(r);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){let r=Buffer.from(t.path),n=Math.ceil((62+r.length+1)/8)*8,i=Buffer.alloc(n),a=new Ie(i),s=rr(t);return a.writeUInt32BE(s.ctimeSeconds),a.writeUInt32BE(s.ctimeNanoseconds),a.writeUInt32BE(s.mtimeSeconds),a.writeUInt32BE(s.mtimeNanoseconds),a.writeUInt32BE(s.dev),a.writeUInt32BE(s.ino),a.writeUInt32BE(s.mode),a.writeUInt32BE(s.uid),a.writeUInt32BE(s.gid),a.writeUInt32BE(s.size),a.write(t.oid,20,"hex"),a.writeUInt16BE(Ww(t)),a.write(t.path,r.length,"utf8"),i}async toObject(){let t=Buffer.alloc(12),r=new Ie(t);r.write("DIRC",4,"utf8"),r.writeUInt32BE(2),r.writeUInt32BE(this.entriesFlat.length);let n=[];for(let o of this.entries)if(n.push(e._entryToBuffer(o)),o.stages.length>1)for(let l of o.stages)l&&l!==o&&n.push(e._entryToBuffer(l));n=await Promise.all(n);let i=Buffer.concat(n),a=Buffer.concat([t,i]),s=await nt(a);return Buffer.concat([a,Buffer.from(s,"hex")])}};function Ln(e,t){let r=rr(e),n=rr(t);return r.mode!==n.mode||r.mtimeSeconds!==n.mtimeSeconds||r.ctimeSeconds!==n.ctimeSeconds||r.uid!==n.uid||r.gid!==n.gid||r.ino!==n.ino||r.size!==n.size}var ya=null,Jt=Symbol("IndexCache");function Vw(){return{map:new Map,stats:new Map}}async function Kw(e,t,r){let n=await e.lstat(t),i=await e.read(t),a=await $a.from(i);r.map.set(t,a),r.stats.set(t,n)}async function Xw(e,t,r){let n=r.stats.get(t);if(n===void 0)return!0;let i=await e.lstat(t);return n===null||i===null?!1:Ln(n,i)}var J=class{static async acquire({fs:t,gitdir:r,cache:n,allowUnmerged:i=!0},a){n[Jt]||(n[Jt]=Vw());let s=`${r}/index`;ya===null&&(ya=new Aa({maxPending:1/0}));let o,l=[];return await ya.acquire(s,async()=>{await Xw(t,s,n[Jt])&&await Kw(t,s,n[Jt]);let f=n[Jt].map.get(s);if(l=f.unmergedPaths,l.length&&!i)throw new Mr(l);if(o=await a(f),f._dirty){let c=await f.toObject();await t.write(s,c),n[Jt].stats.set(s,await t.lstat(s)),f._dirty=!1}}),o}};function qn(e){let t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function nr(e){let t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function Kf(e){let t=new Map,r=function(i){if(!t.has(i)){let a={type:"tree",fullpath:i,basename:qn(i),metadata:{},children:[]};t.set(i,a),a.parent=r(nr(i)),a.parent&&a.parent!==a&&a.parent.children.push(a)}return t.get(i)},n=function(i,a){if(!t.has(i)){let s={type:"blob",fullpath:i,basename:qn(i),metadata:a,parent:r(nr(i)),children:[]};s.parent&&s.parent.children.push(s),t.set(i,s)}return t.get(i)};r(".");for(let i of e)n(i.path,i);return t}function Yw(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new D(`Unexpected GitTree entry mode: ${e.toString(8)}`)}var Ia=class{constructor({fs:t,gitdir:r,cache:n}){this.treePromise=J.acquire({fs:t,gitdir:r,cache:n},async function(a){return Kf(a.entries)});let i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){let r=t._fullpath,i=(await this.treePromise).get(r);if(!i||i.type==="blob")return null;if(i.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${r}'`);let a=i.children.map(s=>s.fullpath);return a.sort(Xn),a}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){let n=(await this.treePromise).get(t._fullpath);if(!n)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=n.type==="tree"?{}:rr(n.metadata);t._type=n.type==="tree"?"tree":Yw(i.mode),t._mode=i.mode,n.type==="tree"?t._stat=void 0:t._stat=i}return t._stat}async content(t){}async oid(t){if(t._oid===!1){let n=(await this.treePromise).get(t._fullpath);t._oid=n.metadata.oid}return t._oid}},Yn=Symbol("GitWalkSymbol");function tn(){let e=Object.create(null);return Object.defineProperty(e,Yn,{value:function({fs:t,gitdir:r,cache:n}){return new Ia({fs:t,gitdir:r,cache:n})}}),Object.freeze(e),e}var H=class e extends M{constructor(t){super(`Could not find ${t}.`),this.code=this.name=e.code,this.data={what:t}}};H.code="NotFoundError";var le=class e extends M{constructor(t,r,n,i){super(`Object ${t} ${i?`at ${i}`:""}was anticipated to be a ${n} but it is a ${r}.`),this.code=this.name=e.code,this.data={oid:t,actual:r,expected:n,filepath:i}}};le.code="ObjectTypeError";var _t=class e extends M{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=e.code,this.data={value:t}}};_t.code="InvalidOidError";var zr=class e extends M{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=e.code,this.data={remote:t}}};zr.code="NoRefspecError";var Fn=class e{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let r=null;this.parsedConfig=t.trim().split(`
`).map(n=>{if(/^\s*#/.test(n))return{line:n,comment:!0};let i=n.indexOf(" ");if(n.startsWith("^")){let a=n.slice(1);return this.refs.set(r+"^{}",a),{line:n,ref:r,peeled:a}}else{let a=n.slice(0,i);return r=n.slice(i+1),this.refs.set(r,a),{line:n,ref:r,oid:a}}})}return this}static from(t){return new e(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(r=>r.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}},Hn=class e{constructor({remotePath:t,localPath:r,force:n,matchPrefix:i}){Object.assign(this,{remotePath:t,localPath:r,force:n,matchPrefix:i})}static from(t){let[r,n,i,a,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=r==="+",l=i==="*";if(l!==(s==="*"))throw new D("Invalid refspec");return new e({remotePath:n,localPath:a,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}},Ba=class e{constructor(t=[]){this.rules=t}static from(t){let r=[];for(let n of t)r.push(Hn.from(n));return new e(r)}add(t){let r=Hn.from(t);this.rules.push(r)}translate(t){let r=[];for(let n of this.rules)for(let i of t){let a=n.translate(i);a&&r.push([i,a])}return r}translateOne(t){let r=null;for(let n of this.rules){let i=n.translate(t);i&&(r=i)}return r}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}};function Jw(e,t){let r=e.replace(/\^\{\}$/,""),n=t.replace(/\^\{\}$/,""),i=-(r<n)||+(r>n);return i===0?e.endsWith("^{}")?1:-1:i}function Sf(e){return e.replace(/\/\.\//g,"/").replace(/\/{2,}/g,"/").replace(/^\/\.$/,"/").replace(/^\.\/$/,".").replace(/^\.\//,"").replace(/\/\.$/,"").replace(/(.+)\/$/,"$1").replace(/^$/,".")}function T(...e){return Sf(e.map(Sf).join("/"))}var Qw=e=>{e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},jr=e=>{if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},Of={core:{filemode:jr,bare:jr,logallrefupdates:jr,symlinks:jr,ignorecase:jr,bigFileThreshold:Qw}},ep=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,tp=/^[A-Za-z0-9-.]+$/,rp=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,np=/^[A-Za-z][A-Za-z-]*$/,ip=/^(.*?)( *[#;].*)$/,ap=e=>{let t=ep.exec(e);if(t!=null){let[r,n]=t.slice(1);return[r,n]}return null},sp=e=>{let t=rp.exec(e);if(t!=null){let[r,n="true"]=t.slice(1),i=op(n),a=cp(i);return[r,a]}return null},op=e=>{let t=ip.exec(e);if(t==null)return e;let[r,n]=t.slice(1);return Rf(r)&&Rf(n)?`${r}${n}`:r},Rf=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,cp=e=>e.split("").reduce((t,r,n,i)=>{let a=r==='"'&&i[n-1]!=="\\",s=r==="\\"&&i[n+1]==='"';return a||s?t:t+r},""),Tf=e=>e!=null?e.toLowerCase():null,Pa=(e,t,r)=>[Tf(e),t,Tf(r)].filter(n=>n!=null).join("."),Af=e=>{let t=e.split("."),r=t.shift(),n=t.pop(),i=t.length?t.join("."):void 0;return{section:r,subsection:i,name:n,path:Pa(r,i,n),sectionPath:Pa(r,i,null)}},fp=(e,t)=>e.reduce((r,n,i)=>t(n)?i:r,-1),Ca=class e{constructor(t){let r=null,n=null;this.parsedConfig=t.split(`
`).map(i=>{let a=null,s=null,o=i.trim(),l=ap(o),f=l!=null;if(f)[r,n]=l;else{let u=sp(o);u!=null&&([a,s]=u)}let c=Pa(r,n,a);return{line:i,isSection:f,section:r,subsection:n,name:a,value:s,path:c}})}static from(t){return new e(t)}async get(t,r=!1){let n=Af(t).path,i=this.parsedConfig.filter(a=>a.path===n).map(({section:a,name:s,value:o})=>{let l=Of[a]&&Of[a][s];return l?l(o):o});return r?i:i.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(r=>r.section===t&&r.isSection).map(r=>r.subsection)}async deleteSection(t,r){this.parsedConfig=this.parsedConfig.filter(n=>!(n.section===t&&n.subsection===r))}async append(t,r){return this.set(t,r,!0)}async set(t,r,n=!1){let{section:i,subsection:a,name:s,path:o,sectionPath:l}=Af(t),f=fp(this.parsedConfig,c=>c.path===o);if(r==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){let c=this.parsedConfig[f],u=Object.assign({},c,{name:s,value:r,modified:!0});n?this.parsedConfig.splice(f+1,0,u):this.parsedConfig[f]=u}else{let c=this.parsedConfig.findIndex(d=>d.path===l),u={section:i,subsection:a,name:s,value:r,modified:!0,path:o};if(tp.test(i)&&np.test(s))if(c>=0)this.parsedConfig.splice(c+1,0,u);else{let d={section:i,subsection:a,modified:!0,path:l};this.parsedConfig.push(d,u)}}}toString(){return this.parsedConfig.map(({line:t,section:r,subsection:n,name:i,value:a,modified:s=!1})=>s?i!=null&&a!=null?typeof a=="string"&&/[#;]/.test(a)?`	${i} = "${a}"`:`	${i} = ${a}`:n!=null?`[${r} "${n}"]`:`[${r}]`:t).join(`
`)}},Q=class{static async get({fs:t,gitdir:r}){let n=await t.read(`${r}/config`,{encoding:"utf8"});return Ca.from(n)}static async save({fs:t,gitdir:r,config:n}){await t.write(`${r}/config`,n.toString(),{encoding:"utf8"})}},Mn=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],lp=["config","description","index","shallow","commondir"],$=class e{static async updateRemoteRefs({fs:t,gitdir:r,remote:n,refs:i,symrefs:a,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:f=!1}){for(let g of i.values())if(!g.match(/[0-9a-f]{40}/))throw new _t(g);let c=await Q.get({fs:t,gitdir:r});if(!o){if(o=await c.getall(`remote.${n}.fetch`),o.length===0)throw new zr(n);o.unshift(`+HEAD:refs/remotes/${n}/HEAD`)}let u=Ba.from(o),d=new Map;if(f){let g=await e.listRefs({fs:t,gitdir:r,filepath:"refs/tags"});await e.deleteRefs({fs:t,gitdir:r,refs:g.map(_=>`refs/tags/${_}`)})}if(s){for(let g of i.keys())if(g.startsWith("refs/tags")&&!g.endsWith("^{}")&&!await e.exists({fs:t,gitdir:r,ref:g})){let _=i.get(g);d.set(g,_)}}let h=u.translate([...i.keys()]);for(let[g,_]of h){let x=i.get(g);d.set(_,x)}let w=u.translate([...a.keys()]);for(let[g,_]of w){let x=a.get(g),E=u.translateOne(x);E&&d.set(_,`ref: ${E}`)}let m=[];if(l){for(let g of u.localNamespaces()){let _=(await e.listRefs({fs:t,gitdir:r,filepath:g})).map(x=>`${g}/${x}`);for(let x of _)d.has(x)||m.push(x)}m.length>0&&await e.deleteRefs({fs:t,gitdir:r,refs:m})}for(let[g,_]of d)await t.write(T(r,g),`${_.trim()}
`,"utf8");return{pruned:m}}static async writeRef({fs:t,gitdir:r,ref:n,value:i}){if(!i.match(/[0-9a-f]{40}/))throw new _t(i);await t.write(T(r,n),`${i.trim()}
`,"utf8")}static async writeSymbolicRef({fs:t,gitdir:r,ref:n,value:i}){await t.write(T(r,n),`ref: ${i.trim()}
`,"utf8")}static async deleteRef({fs:t,gitdir:r,ref:n}){return e.deleteRefs({fs:t,gitdir:r,refs:[n]})}static async deleteRefs({fs:t,gitdir:r,refs:n}){await Promise.all(n.map(o=>t.rm(T(r,o))));let i=await t.read(`${r}/packed-refs`,{encoding:"utf8"}),a=Fn.from(i),s=a.refs.size;for(let o of n)a.refs.has(o)&&a.delete(o);a.refs.size<s&&(i=a.toString(),await t.write(`${r}/packed-refs`,i,{encoding:"utf8"}))}static async resolve({fs:t,gitdir:r,ref:n,depth:i=void 0}){if(i!==void 0&&(i--,i===-1))return n;let a;if(n.startsWith("ref: "))return n=n.slice(5),e.resolve({fs:t,gitdir:r,ref:n,depth:i});if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let s=await e.packedRefs({fs:t,gitdir:r}),o=Mn(n).filter(l=>!lp.includes(l));for(let l of o)if(a=await t.read(`${r}/${l}`,{encoding:"utf8"})||s.get(l),a)return e.resolve({fs:t,gitdir:r,ref:a.trim(),depth:i});throw new H(n)}static async exists({fs:t,gitdir:r,ref:n}){try{return await e.expand({fs:t,gitdir:r,ref:n}),!0}catch{return!1}}static async expand({fs:t,gitdir:r,ref:n}){if(n.length===40&&/[0-9a-f]{40}/.test(n))return n;let i=await e.packedRefs({fs:t,gitdir:r}),a=Mn(n);for(let s of a)if(await t.exists(`${r}/${s}`)||i.has(s))return s;throw new H(n)}static async expandAgainstMap({ref:t,map:r}){let n=Mn(t);for(let i of n)if(await r.has(i))return i;throw new H(t)}static resolveAgainstMap({ref:t,fullref:r=t,depth:n=void 0,map:i}){if(n!==void 0&&(n--,n===-1))return{fullref:r,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),e.resolveAgainstMap({ref:t,fullref:r,depth:n,map:i});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:r,oid:t};let a=Mn(t);for(let s of a){let o=i.get(s);if(o)return e.resolveAgainstMap({ref:o.trim(),fullref:s,depth:n,map:i})}throw new H(t)}static async packedRefs({fs:t,gitdir:r}){let n=await t.read(`${r}/packed-refs`,{encoding:"utf8"});return Fn.from(n).refs}static async listRefs({fs:t,gitdir:r,filepath:n}){let i=e.packedRefs({fs:t,gitdir:r}),a=null;try{a=await t.readdirDeep(`${r}/${n}`),a=a.map(s=>s.replace(`${r}/${n}/`,""))}catch{a=[]}for(let s of(await i).keys())s.startsWith(n)&&(s=s.replace(n+"/",""),a.includes(s)||a.push(s));return a.sort(Jw),a}static async listBranches({fs:t,gitdir:r,remote:n}){return n?e.listRefs({fs:t,gitdir:r,filepath:`refs/remotes/${n}`}):e.listRefs({fs:t,gitdir:r,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:r}){return(await e.listRefs({fs:t,gitdir:r,filepath:"refs/tags"})).filter(i=>!i.endsWith("^{}"))}};function up(e,t){return Xn($f(e),$f(t))}function $f(e){return e.mode==="040000"?e.path+"/":e.path}function Xf(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new D(`Unexpected GitTree entry mode: ${e}`)}function dp(e){let t=[],r=0;for(;r<e.length;){let n=e.indexOf(32,r);if(n===-1)throw new D(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next space character.`);let i=e.indexOf(0,r);if(i===-1)throw new D(`GitTree: Error parsing buffer at byte location ${r}: Could not find the next null character.`);let a=e.slice(r,n).toString("utf8");a==="40000"&&(a="040000");let s=Xf(a),o=e.slice(n+1,i).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new tr(o);let l=e.slice(i+1,i+21).toString("hex");r=i+21,t.push({mode:a,path:o,oid:l,type:s})}return t}function hp(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new D(`Could not understand file mode: ${e}`)}function wp(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=hp(e.mode),e.type||(e.type=Xf(e.mode)),e}var _e=class e{constructor(t){if(Buffer.isBuffer(t))this._entries=dp(t);else if(Array.isArray(t))this._entries=t.map(wp);else throw new D("invalid type passed to GitTree constructor");this._entries.sort(Zf)}static from(t){return new e(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){let t=[...this._entries];return t.sort(up),Buffer.concat(t.map(r=>{let n=Buffer.from(r.mode.replace(/^0/,"")),i=Buffer.from(" "),a=Buffer.from(r.path,"utf8"),s=Buffer.from([0]),o=Buffer.from(r.oid,"hex");return Buffer.concat([n,i,a,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(let t of this._entries)yield t}},gt=class{static wrap({type:t,object:r}){return Buffer.concat([Buffer.from(`${t} ${r.byteLength.toString()}\0`),Buffer.from(r)])}static unwrap(t){let r=t.indexOf(32),n=t.indexOf(0),i=t.slice(0,r).toString("utf8"),a=t.slice(r+1,n).toString("utf8"),s=t.length-(n+1);if(parseInt(a)!==s)throw new D(`Length mismatch: expected ${a} bytes but got ${s} instead.`);return{type:i,object:Buffer.from(t.slice(n+1))}}};async function pp({fs:e,gitdir:t,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`,i=await e.read(`${t}/${n}`);return i?{object:i,format:"deflated",source:n}:null}function mp(e,t){let r=new Ie(e),n=If(r);if(n!==t.byteLength)throw new D(`applyDelta expected source buffer to be ${n} bytes but the provided buffer was ${t.length} bytes`);let i=If(r),a,s=Pf(r,t);if(s.byteLength===i)a=s;else{a=Buffer.alloc(i);let o=new Ie(a);for(o.copy(s);!r.eof();)o.copy(Pf(r,t));let l=o.tell();if(i!==l)throw new D(`applyDelta expected target buffer to be ${i} bytes but the resulting buffer was ${l} bytes`)}return a}function If(e){let t=0,r=0,n=null;do n=e.readUInt8(),t|=(n&127)<<r,r+=7;while(n&128);return t}function Bf(e,t,r){let n=0,i=0;for(;r--;)t&1&&(n|=e.readUInt8()<<i),t>>=1,i+=8;return n}function Pf(e,t){let r=e.readUInt8(),n=128,i=15,a=112;if(r&n){let s=Bf(e,r&i,4),o=Bf(e,(r&a)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(r)}function _p(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Yf(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:_p(e)}var Gn=class{constructor(t){this.stream=Yf(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:r}=await this.stream.next();return t&&(this._ended=!0),r&&(r=Buffer.from(r)),r}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;let r=[this.buffer];for(;this.cursor+t>gp(r);){let n=await this._next();if(this._ended)break;r.push(n)}this.buffer=Buffer.concat(r)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}};function gp(e){return e.reduce((t,r)=>t+r.length,0)}async function vp(e,t){let r=new Gn(e),n=await r.read(4);if(n=n.toString("utf8"),n!=="PACK")throw new D(`Invalid PACK header '${n}'`);let i=await r.read(4);if(i=i.readUInt32BE(0),i!==2)throw new D(`Invalid packfile version: ${i}`);let a=await r.read(4);if(a=a.readUInt32BE(0),!(a<1))for(;!r.eof()&&a--;){let s=r.tell(),{type:o,length:l,ofs:f,reference:c}=await bp(r),u=new Ha.Inflate;for(;!u.result;){let d=await r.chunk();if(!d)break;if(u.push(d,!1),u.err)throw new D(`Pako error: ${u.msg}`);if(u.result){if(u.result.length!==l)throw new D("Inflated object size is different from that stated in packfile.");await r.undo(),await r.read(d.length-u.strm.avail_in);let h=r.tell();await t({data:u.result,type:o,num:a,offset:s,end:h,reference:c,ofs:f})}}}}async function bp(e){let t=await e.byte(),r=t>>4&7,n=t&15;if(t&128){let s=4;do t=await e.byte(),n|=(t&127)<<s,s+=7;while(t&128)}let i,a;if(r===6){let s=0;i=0;let o=[];do t=await e.byte(),i|=(t&127)<<s,s+=7,o.push(t);while(t&128);a=Buffer.from(o)}return r===7&&(a=await e.read(20)),{type:r,length:n,ofs:i,reference:a}}var xa=!1;async function Jf(e){return xa===null&&(xa=xp()),xa?yp(e):Ha.inflate(e)}async function yp(e){let t=new DecompressionStream("deflate"),r=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(r).arrayBuffer())}function xp(){try{if(new DecompressionStream("deflate"))return!0}catch{}return!1}function Ep(e){let t=[],r=0,n=0;do{r=e.readUInt8();let i=r&127;t.push(i),n=r&128}while(n);return t.reduce((i,a)=>i+1<<7|a,-1)}function kp(e,t){let r=t,n=4,i=null;do i=e.readUInt8(),r|=(i&127)<<n,n+=7;while(i&128);return r}var Lr=class e{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:r}){let n=new Ie(t);if(n.slice(4).toString("hex")!=="ff744f63")return;let a=n.readUInt32BE();if(a!==2)throw new D(`Unable to read version ${a} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new D("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");n.seek(n.tell()+4*255);let s=n.readUInt32BE(),o=[];for(let c=0;c<s;c++){let u=n.slice(20).toString("hex");o[c]=u}n.seek(n.tell()+4*s);let l=new Map;for(let c=0;c<s;c++)l.set(o[c],n.readUInt32BE());let f=n.slice(20).toString("hex");return new e({hashes:o,crcs:{},offsets:l,packfileSha:f,getExternalRefDelta:r})}static async fromPack({pack:t,getExternalRefDelta:r,onProgress:n}){let i={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},a={},s=t.slice(-20).toString("hex"),o=[],l={},f=new Map,c=null,u=null;await vp([t],async({data:g,type:_,reference:x,offset:E,num:y})=>{c===null&&(c=y);let b=Math.floor((c-y)*100/c);b!==u&&n&&await n({phase:"Receiving objects",loaded:c-y,total:c}),u=b,_=i[_],["commit","tree","blob","tag"].includes(_)?a[E]={type:_,offset:E}:_==="ofs-delta"?a[E]={type:_,offset:E}:_==="ref-delta"&&(a[E]={type:_,offset:E})});let d=Object.keys(a).map(Number);for(let[g,_]of d.entries()){let x=g+1===d.length?t.byteLength-20:d[g+1],E=a[_],y=zw.buf(t.slice(_,x))>>>0;E.end=x,E.crc=y}let h=new e({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:f,getExternalRefDelta:r});u=null;let w=0,m=[0,0,0,0,0,0,0,0,0,0,0,0];for(let g in a){g=Number(g);let _=Math.floor(w*100/c);_!==u&&n&&await n({phase:"Resolving deltas",loaded:w,total:c}),w++,u=_;let x=a[g];if(!x.oid)try{h.readDepth=0,h.externalReadDepth=0;let{type:E,object:y}=await h.readSlice({start:g});m[h.readDepth]+=1;let b=await nt(gt.wrap({type:E,object:y}));x.oid=b,o.push(b),f.set(b,g),l[b]=x.crc}catch{continue}}return o.sort(),h}async toBuffer(){let t=[],r=(f,c)=>{t.push(Buffer.from(f,c))};r("ff744f63","hex"),r("00000002","hex");let n=new Ie(Buffer.alloc(256*4));for(let f=0;f<256;f++){let c=0;for(let u of this.hashes)parseInt(u.slice(0,2),16)<=f&&c++;n.writeUInt32BE(c)}t.push(n.buffer);for(let f of this.hashes)r(f,"hex");let i=new Ie(Buffer.alloc(this.hashes.length*4));for(let f of this.hashes)i.writeUInt32BE(this.crcs[f]);t.push(i.buffer);let a=new Ie(Buffer.alloc(this.hashes.length*4));for(let f of this.hashes)a.writeUInt32BE(this.offsets.get(f));t.push(a.buffer),r(this.packfileSha,"hex");let s=Buffer.concat(t),o=await nt(s),l=Buffer.alloc(20);return l.write(o,"hex"),Buffer.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new D(`Could not read object ${t} from packfile`)}let r=this.offsets.get(t);return this.readSlice({start:r})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;let r={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new D("Tried to read from a GitPackIndex with no packfile loaded into memory");let n=(await this.pack).slice(t),i=new Ie(n),a=i.readUInt8(),s=a&112,o=r[s];if(o===void 0)throw new D("Unrecognized type: 0b"+s.toString(2));let l=a&15,f=l;a&128&&(f=kp(i,l));let u=null,d=null;if(o==="ofs_delta"){let w=Ep(i),m=t-w;({object:u,type:o}=await this.readSlice({start:m}))}if(o==="ref_delta"){let w=i.slice(20).toString("hex");({object:u,type:o}=await this.read({oid:w}))}let h=n.slice(i.tell());if(d=Buffer.from(await Jf(h)),d.byteLength!==f)throw new D(`Packfile told us object would have length ${f} but it had length ${d.byteLength}`);return u&&(d=Buffer.from(mp(d,u))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:d}),{type:o,format:"content",object:d}}},zn=Symbol("PackfileCache");async function Sp({fs:e,filename:t,getExternalRefDelta:r,emitter:n,emitterPrefix:i}){let a=await e.read(t);return Lr.fromIdx({idx:a,getExternalRefDelta:r})}function Ga({fs:e,cache:t,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}){t[zn]||(t[zn]=new Map);let s=t[zn].get(r);return s||(s=Sp({fs:e,filename:r,getExternalRefDelta:n,emitter:i,emitterPrefix:a}),t[zn].set(r,s)),s}async function Op({fs:e,cache:t,gitdir:r,oid:n,format:i="content",getExternalRefDelta:a}){let s=await e.readdir(T(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,f=await Ga({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(f.error)throw new D(f.error);if(f.offsets.has(n)){if(!f.pack){let u=l.replace(/idx$/,"pack");f.pack=e.read(u)}let c=await f.read({oid:n,getExternalRefDelta:a});return c.format="content",c.source=`objects/pack/${o.replace(/idx$/,"pack")}`,c}}return null}async function W({fs:e,cache:t,gitdir:r,oid:n,format:i="content"}){let a=o=>W({fs:e,cache:t,gitdir:r,oid:o}),s;if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Buffer.from("tree 0\0")}),s||(s=await pp({fs:e,gitdir:r,oid:n})),s||(s=await Op({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:a})),!s)throw new H(n);if(i==="deflated")return s;if(s.format==="deflated"&&(s.object=Buffer.from(await Jf(s.object)),s.format="wrapped"),s.format==="wrapped"){if(i==="wrapped"&&s.format==="wrapped")return s;let o=await nt(s.object);if(o!==n)throw new D(`SHA check failed! Expected ${n}, computed ${o}`);let{object:l,type:f}=gt.unwrap(s.object);s.type=f,s.object=l,s.format="content"}if(s.format==="content")return i==="content"?s:void 0;throw new D(`invalid format "${s.format}"`)}var Ne=class e extends M{constructor(t,r,n=!0){super(`Failed to create ${t} at ${r} because it already exists.${n?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=e.code,this.data={noun:t,where:r,canForce:n}}};Ne.code="AlreadyExistsError";var qr=class e extends M{constructor(t,r,n){super(`Found multiple ${t} matching "${r}" (${n.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=e.code,this.data={nouns:t,short:r,matches:n}}};qr.code="AmbiguousError";var Fr=class e extends M{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=e.code,this.data={filepaths:t}}};Fr.code="CheckoutConflictError";var Hr=class e extends M{constructor(t,r){super(`Failed to checkout "${t}" because commit ${r} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=e.code,this.data={ref:t,oid:r}}};Hr.code="CommitNotFetchedError";var Gr=class e extends M{constructor(){super("Empty response from git server."),this.code=this.name=e.code,this.data={}}};Gr.code="EmptyServerResponseError";var Zr=class e extends M{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=e.code,this.data={}}};Zr.code="FastForwardError";var Wr=class e extends M{constructor(t,r){super(`One or more branches were not updated: ${t}`),this.code=this.name=e.code,this.data={prettyDetails:t,result:r}}};Wr.code="GitPushError";var ir=class e extends M{constructor(t,r,n){super(`HTTP Error: ${t} ${r}`),this.code=this.name=e.code,this.data={statusCode:t,statusMessage:r,response:n}}};ir.code="HttpError";var vt=class e extends M{constructor(t){let r="invalid filepath";t==="leading-slash"||t==="trailing-slash"?r='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(r='"filepath" should not be a directory.'),super(r),this.code=this.name=e.code,this.data={reason:t}}};vt.code="InvalidFilepathError";var it=class e extends M{constructor(t,r){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${r}".)`),this.code=this.name=e.code,this.data={ref:t,suggestion:r}}};it.code="InvalidRefNameError";var Vr=class e extends M{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=e.code,this.data={depth:t}}};Vr.code="MaxDepthError";var ar=class e extends M{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=e.code,this.data={}}};ar.code="MergeNotSupportedError";var sr=class e extends M{constructor(t){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=e.code,this.data={filepaths:t}}};sr.code="MergeConflictError";var ue=class e extends M{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=e.code,this.data={role:t}}};ue.code="MissingNameError";var ye=class e extends M{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=e.code,this.data={parameter:t}}};ye.code="MissingParameterError";var Kr=class e extends M{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=e.code,this.data={errors:t},this.errors=t}};Kr.code="MultipleGitError";var Bt=class e extends M{constructor(t,r){super(`Expected "${t}" but received "${r}".`),this.code=this.name=e.code,this.data={expected:t,actual:r}}};Bt.code="ParseError";var or=class e extends M{constructor(t){let r="";t==="not-fast-forward"?r=" because it was not a simple fast-forward":t==="tag-exists"&&(r=" because tag already exists"),super(`Push rejected${r}. Use "force: true" to override.`),this.code=this.name=e.code,this.data={reason:t}}};or.code="PushRejectedError";var mt=class e extends M{constructor(t,r){super(`Remote does not support the "${t}" so the "${r}" parameter cannot be used.`),this.code=this.name=e.code,this.data={capability:t,parameter:r}}};mt.code="RemoteCapabilityError";var Xr=class e extends M{constructor(t,r){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=e.code,this.data={preview:t,response:r}}};Xr.code="SmartHttpError";var Yr=class e extends M{constructor(t,r,n){super(`Git remote "${t}" uses an unrecognized transport protocol: "${r}"`),this.code=this.name=e.code,this.data={url:t,transport:r,suggestion:n}}};Yr.code="UnknownTransportError";var Jr=class e extends M{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=e.code,this.data={url:t}}};Jr.code="UrlParseError";var Qr=class e extends M{constructor(){super("The operation was canceled."),this.code=this.name=e.code,this.data={}}};Qr.code="UserCanceledError";var en=class e extends M{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged chages.`),this.code=this.name=e.code,this.data={filepath:t}}};en.code="IndexResetError";var Qf=Object.freeze({__proto__:null,AlreadyExistsError:Ne,AmbiguousError:qr,CheckoutConflictError:Fr,CommitNotFetchedError:Hr,EmptyServerResponseError:Gr,FastForwardError:Zr,GitPushError:Wr,HttpError:ir,InternalError:D,InvalidFilepathError:vt,InvalidOidError:_t,InvalidRefNameError:it,MaxDepthError:Vr,MergeNotSupportedError:ar,MergeConflictError:sr,MissingNameError:ue,MissingParameterError:ye,MultipleGitError:Kr,NoRefspecError:zr,NotFoundError:H,ObjectTypeError:le,ParseError:Bt,PushRejectedError:or,RemoteCapabilityError:mt,SmartHttpError:Xr,UnknownTransportError:Yr,UnsafeFilepathError:tr,UrlParseError:Jr,UserCanceledError:Qr,UnmergedPathsError:Mr,IndexResetError:en});function Na({name:e,email:t,timestamp:r,timezoneOffset:n}){return n=Rp(n),`${e} <${t}> ${r} ${n}`}function Rp(e){let t=Tp(Ap(e));e=Math.abs(e);let r=Math.floor(e/60);e-=r*60;let n=String(r),i=String(e);return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),(t===-1?"-":"+")+n+i}function Tp(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Ap(e){return e===0?e:-e}function tt(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Zn(e){let[,t,r,n,i]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:r,timestamp:Number(n),timezoneOffset:$p(i)}}function $p(e){let[,t,r,n]=e.match(/(\+|-)(\d\d)(\d\d)/);return n=(t==="+"?1:-1)*(Number(r)*60+Number(n)),Ip(n)}function Ip(e){return e===0?e:-e}var xe=class e{constructor(t){if(typeof t=="string")this._tag=t;else if(Buffer.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=e.render(t);else throw new D("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new e(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${Na(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){let t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){let t=this.justHeaders().split(`
`),r=[];for(let i of t)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.tagger&&(n.tagger=Zn(n.tagger)),n.committer&&(n.committer=Zn(n.committer)),n}withoutSignature(){let t=tt(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;let t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return tt(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Buffer.from(this._tag,"utf8")}static async sign(t,r,n){let i=t.payload(),{signature:a}=await r({payload:i,secretKey:n});a=tt(a);let s=i+a;return e.from(s)}};function Ea(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function Bp(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}var ge=class e{constructor(t){if(typeof t=="string")this._commit=t;else if(Buffer.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=e.render(t);else throw new D("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:r}){let n=e.justHeaders(t),i=e.justMessage(t),a=tt(n+`
gpgsig`+Ea(r)+`
`+i);return new e(a)}static from(t){return new e(t)}toObject(){return Buffer.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return e.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return tt(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){let t=e.justHeaders(this._commit).split(`
`),r=[];for(let i of t)i[0]===" "?r[r.length-1]+=`
`+i.slice(1):r.push(i);let n={parent:[]};for(let i of r){let a=i.slice(0,i.indexOf(" ")),s=i.slice(i.indexOf(" ")+1);Array.isArray(n[a])?n[a].push(s):n[a]=s}return n.author&&(n.author=Zn(n.author)),n.committer&&(n.committer=Zn(n.committer)),n}static renderHeaders(t){let r="";if(t.tree?r+=`tree ${t.tree}
`:r+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new D("commit 'parent' property should be an array");for(let a of t.parent)r+=`parent ${a}
`}let n=t.author;r+=`author ${Na(n)}
`;let i=t.committer||t.author;return r+=`committer ${Na(i)}
`,t.gpgsig&&(r+="gpgsig"+Ea(t.gpgsig)),r}static render(t){return e.renderHeaders(t)+`
`+tt(t.message)}render(){return this._commit}withoutSignature(){let t=tt(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;let r=t.slice(0,t.indexOf(`
gpgsig`)),n=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return tt(r+`
`+n)}isolateSignature(){let t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Bp(t)}static async sign(t,r,n){let i=t.withoutSignature(),a=e.justMessage(t._commit),{signature:s}=await r({payload:i,secretKey:n});s=tt(s);let l=e.justHeaders(t._commit)+`
gpgsig`+Ea(s)+`
`+a;return e.from(l)}};async function cr({fs:e,cache:t,gitdir:r,oid:n}){if(n==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:_e.from([]),oid:n};let{type:i,object:a}=await W({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=xe.from(a).parse().object,cr({fs:e,cache:t,gitdir:r,oid:n});if(i==="commit")return n=ge.from(a).parse().tree,cr({fs:e,cache:t,gitdir:r,oid:n});if(i!=="tree")throw new le(n,i,"tree");return{tree:_e.from(a),oid:n}}var Da=class{constructor({fs:t,gitdir:r,ref:n,cache:i}){this.fs=t,this.cache=i,this.gitdir=r,this.mapPromise=(async()=>{let s=new Map,o;try{o=await $.resolve({fs:t,gitdir:r,ref:n})}catch(f){f instanceof H&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}let l=await cr({fs:t,cache:this.cache,gitdir:r,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){let r=t._fullpath,{fs:n,cache:i,gitdir:a}=this,s=await this.mapPromise,o=s.get(r);if(!o)throw new Error(`No obj for ${r}`);let l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;let{type:f,object:c}=await W({fs:n,cache:i,gitdir:a,oid:l});if(f!==o.type)throw new le(l,f,o.type);let u=_e.from(c);for(let d of u)s.set(T(r,d.path),d);return u.entries().map(d=>T(r,d.path))}async type(t){if(t._type===!1){let r=await this.mapPromise,{type:n}=r.get(t._fullpath);t._type=n}return t._type}async mode(t){if(t._mode===!1){let r=await this.mapPromise,{mode:n}=r.get(t._fullpath);t._mode=Wf(parseInt(n,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){let r=await this.mapPromise,{fs:n,cache:i,gitdir:a}=this,o=r.get(t._fullpath).oid,{type:l,object:f}=await W({fs:n,cache:i,gitdir:a,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(f)}return t._content}async oid(t){if(t._oid===!1){let n=(await this.mapPromise).get(t._fullpath);t._oid=n.oid}return t._oid}};function rt({ref:e="HEAD"}={}){let t=Object.create(null);return Object.defineProperty(t,Yn,{value:function({fs:r,gitdir:n,cache:i}){return new Da({fs:r,gitdir:n,ref:e,cache:i})}}),Object.freeze(t),t}var Ua=class{constructor({fs:t,dir:r,gitdir:n,cache:i}){this.fs=t,this.cache=i,this.dir=r,this.gitdir=n;let a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){let r=t._fullpath,{fs:n,dir:i}=this,a=await n.readdir(T(i,r));return a===null?null:a.map(s=>T(r,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){let{fs:r,dir:n}=this,i=await r.lstat(`${n}/${t._fullpath}`);if(!i)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let a=i.isDirectory()?"tree":"blob";a==="blob"&&!i.isFile()&&!i.isSymbolicLink()&&(a="special"),t._type=a,i=rr(i),t._mode=i.mode,i.size===-1&&t._actualSize&&(i.size=t._actualSize),t._stat=i}return t._stat}async content(t){if(t._content===!1){let{fs:r,dir:n}=this;if(await t.type()==="tree")t._content=void 0;else{let i=await r.read(`${n}/${t._fullpath}`);t._actualSize=i.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(i)}}return t._content}async oid(t){if(t._oid===!1){let{fs:r,gitdir:n,cache:i}=this,a;await J.acquire({fs:r,gitdir:n,cache:i},async function(s){let o=s.entriesMap.get(t._fullpath),l=await t.stat();!o||Ln(l,o)?await t.content()===void 0?a=void 0:(a=await nt(gt.wrap({type:"blob",object:await t.content()})),o&&a===o.oid&&l.mode===o.mode&&Ln(l,o)&&s.insert({filepath:t._fullpath,stats:l,oid:a})):a=o.oid}),t._oid=a}return t._oid}};function rn(){let e=Object.create(null);return Object.defineProperty(e,Yn,{value:function({fs:t,dir:r,gitdir:n,cache:i}){return new Ua({fs:t,dir:r,gitdir:n,cache:i})}}),Object.freeze(e),e}function Pp(e,t){let r=t-e;return Array.from({length:r},(n,i)=>e+i)}var el=typeof Array.prototype.flat>"u"?e=>e.reduce((t,r)=>t.concat(r),[]):e=>e.flat(),ja=class{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}};function*Cp(e){let t=new ja,r,n=[],i=e.length;for(let a=0;a<i;a++)n[a]=e[a].next().value,n[a]!==void 0&&t.consider(n[a]);if(t.value!==null)for(;;){let a=[];r=t.value,t.reset();for(let s=0;s<i;s++)n[s]!==void 0&&n[s]===r?(a[s]=n[s],n[s]=e[s].next().value):a[s]=null,n[s]!==void 0&&t.consider(n[s]);if(yield a,t.value===null)return}}async function fr({fs:e,cache:t,dir:r,gitdir:n,trees:i,map:a=async(l,f)=>f,reduce:s=async(l,f)=>{let c=el(f);return l!==void 0&&c.unshift(l),c},iterate:o=(l,f)=>Promise.all([...f].map(l))}){let l=i.map(h=>h[Yn]({fs:e,dir:r,gitdir:n,cache:t})),f=new Array(l.length).fill("."),c=Pp(0,l.length),u=async h=>{c.map(g=>{h[g]=h[g]&&new l[g].ConstructEntry(h[g])});let m=(await Promise.all(c.map(g=>h[g]?l[g].readdir(h[g]):[]))).map(g=>g===null?[]:g).map(g=>g[Symbol.iterator]());return{entries:h,children:Cp(m)}},d=async h=>{let{entries:w,children:m}=await u(h),g=w.find(x=>x&&x._fullpath)._fullpath,_=await a(g,w);if(_!==null){let x=await o(d,m);return x=x.filter(E=>E!==void 0),s(_,x)}};return d(f)}async function Ma(e,t){let r=await e.readdir(t);r==null?await e.rm(t):r.length?await Promise.all(r.map(n=>{let i=T(t,n);return e.lstat(i).then(a=>{if(a)return a.isDirectory()?Ma(e,i):e.rm(i)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function Np(e){return Dp(e)&&Cf(e.then)&&Cf(e.catch)}function Dp(e){return e&&typeof e=="object"}function Cf(e){return typeof e=="function"}function Nf(e){return Np((r=>{try{return r.readFile().catch(n=>n)}catch(n){return n}})(e))}var Df=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function Uf(e,t){if(Nf(t))for(let r of Df)e[`_${r}`]=t[r].bind(t);else for(let r of Df)e[`_${r}`]=va(t[r].bind(t));Nf(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=Ma.bind(null,e):t.rm?e._rm=va(t.rm.bind(t)):t.rmdir.length>2?e._rm=va(t.rmdir.bind(t)):e._rm=Ma.bind(null,e)}var P=class{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;let r=Object.getOwnPropertyDescriptor(t,"promises");r&&r.enumerable?Uf(this,t.promises):Uf(this,t),this._original_unwrapped_fs=t}async exists(t,r={}){try{return await this._stat(t),!0}catch(n){if(n.code==="ENOENT"||n.code==="ENOTDIR")return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',n),n}}async read(t,r={}){try{let n=await this._readFile(t,r);return typeof n!="string"&&(n=Buffer.from(n)),n}catch{return null}}async write(t,r,n={}){try{await this._writeFile(t,r,n);return}catch{await this.mkdir(nr(t)),await this._writeFile(t,r,n)}}async mkdir(t,r=!1){try{await this._mkdir(t);return}catch(n){if(n===null||n.code==="EEXIST")return;if(r)throw n;if(n.code==="ENOENT"){let i=nr(t);if(i==="."||i==="/"||i===t)throw n;await this.mkdir(i),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(r){if(r.code!=="ENOENT")throw r}}async rmdir(t,r){try{r&&r.recursive?await this._rm(t,r):await this._rmdir(t)}catch(n){if(n.code!=="ENOENT")throw n}}async readdir(t){try{let r=await this._readdir(t);return r.sort(Xn),r}catch(r){return r.code==="ENOTDIR"?null:[]}}async readdirDeep(t){let r=await this._readdir(t);return(await Promise.all(r.map(async i=>{let a=t+"/"+i;return(await this._stat(a)).isDirectory()?this.readdirDeep(a):a}))).reduce((i,a)=>i.concat(a),[])}async lstat(t){try{return await this._lstat(t)}catch(r){if(r.code==="ENOENT")return null;throw r}}async readlink(t,r={encoding:"buffer"}){try{let n=await this._readlink(t,r);return Buffer.isBuffer(n)?n:Buffer.from(n)}catch(n){if(n.code==="ENOENT")return null;throw n}}async writelink(t,r){return this._symlink(r.toString("utf8"),t)}};function p(e,t){if(t===void 0)throw new ye(e)}async function Wn(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function tl({fs:e,dir:t,gitdir:r=T(t,".git"),commit:n="HEAD",cache:i={}}){try{p("fs",e),p("dir",t),p("gitdir",r);let a=new P(e),s=[rt({ref:n}),rn(),tn()],o=[];await J.acquire({fs:a,gitdir:r,cache:i},async function(f){o=f.unmergedPaths});let l=await fr({fs:a,cache:i,dir:t,gitdir:r,trees:s,map:async function(f,[c,u,d]){let h=!await Wn(u,d),w=o.includes(f),m=!await Wn(d,c);if(h||w)return c?{path:f,mode:await c.mode(),oid:await c.oid(),type:await c.type(),content:await c.content()}:void 0;if(m)return!1;throw new en(f)}});await J.acquire({fs:a,gitdir:r,cache:i},async function(f){for(let c of l)if(c!==!1){if(!c){await a.rmdir(`${t}/${c.path}`,{recursive:!0}),f.delete({filepath:c.path});continue}if(c.type==="blob"){let u=new TextDecoder().decode(c.content);await a.write(`${t}/${c.path}`,u,{mode:c.mode}),f.insert({filepath:c.path,oid:c.oid,stage:0})}}})}catch(a){throw a.caller="git.abortMerge",a}}var lr=class{static async isIgnored({fs:t,dir:r,gitdir:n=T(r,".git"),filepath:i}){if(qn(i)===".git")return!0;if(i===".")return!1;let a="",s=T(n,"info","exclude");await t.exists(s)&&(a=await t.read(s,"utf8"));let o=[{gitignore:T(r,".gitignore"),filepath:i}],l=i.split("/").filter(Boolean);for(let c=1;c<l.length;c++){let u=l.slice(0,c).join("/"),d=l.slice(c).join("/");o.push({gitignore:T(r,u,".gitignore"),filepath:d})}let f=!1;for(let c of o){let u;try{u=await t.read(c.gitignore,"utf8")}catch(w){if(w.code==="NOENT")continue}let d=Lw().add(a);d.add(u);let h=nr(c.filepath);if(h!=="."&&d.ignores(h))return!0;f?f=!d.test(c.filepath).unignored:f=d.test(c.filepath).ignored}return f}};async function Up({fs:e,gitdir:t,object:r,format:n,oid:i}){if(n!=="deflated")throw new D("GitObjectStoreLoose expects objects to write to be in deflated format");let a=`objects/${i.slice(0,2)}/${i.slice(2)}`,s=`${t}/${a}`;await e.exists(s)||await e.write(s,r)}var ka=null;async function rl(e){return ka===null&&(ka=Mp()),ka?jp(e):Ha.deflate(e)}async function jp(e){let t=new CompressionStream("deflate"),r=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(r).arrayBuffer())}function Mp(){try{let e=new CompressionStream("deflate");if(new Blob([]).stream(),e)return!0}catch{}return!1}async function Ee({fs:e,gitdir:t,type:r,object:n,format:i="content",oid:a=void 0,dryRun:s=!1}){return i!=="deflated"&&(i!=="wrapped"&&(n=gt.wrap({type:r,object:n})),a=await nt(n),n=Buffer.from(await rl(n))),s||await Up({fs:e,gitdir:t,object:n,format:"deflated",oid:a}),a}function zp(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function nl({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n,cache:i={},force:a=!1,parallel:s=!0}){try{p("fs",e),p("dir",t),p("gitdir",r),p("filepath",n);let o=new P(e);await J.acquire({fs:o,gitdir:r,cache:i},async l=>za({dir:t,gitdir:r,fs:o,filepath:n,index:l,force:a,parallel:s}))}catch(o){throw o.caller="git.add",o}}async function za({dir:e,gitdir:t,fs:r,filepath:n,index:i,force:a,parallel:s}){n=Array.isArray(n)?n:[n];let o=n.map(async u=>{if(!a&&await lr.isIgnored({fs:r,dir:e,gitdir:t,filepath:u}))return;let d=await r.lstat(T(e,u));if(!d)throw new H(u);if(d.isDirectory()){let h=await r.readdir(T(e,u));if(s){let w=h.map(m=>za({dir:e,gitdir:t,fs:r,filepath:[T(u,m)],index:i,force:a,parallel:s}));await Promise.all(w)}else for(let w of h)await za({dir:e,gitdir:t,fs:r,filepath:[T(u,w)],index:i,force:a,parallel:s})}else{let h=d.isSymbolicLink()?await r.readlink(T(e,u)).then(zp):await r.read(T(e,u));if(h===null)throw new H(u);let w=await Ee({fs:r,gitdir:t,type:"blob",object:h});i.insert({filepath:u,stats:d,oid:w})}}),l=await Promise.allSettled(o),f=l.filter(u=>u.status==="rejected").map(u=>u.reason);if(f.length>1)throw new Kr(f);if(f.length===1)throw f[0];return l.filter(u=>u.status==="fulfilled"&&u.value).map(u=>u.value)}async function Jn({fs:e,cache:t,onSign:r,gitdir:n,message:i,author:a,committer:s,signingKey:o,dryRun:l=!1,noUpdateBranch:f=!1,ref:c,parent:u,tree:d}){return c||(c=await $.resolve({fs:e,gitdir:n,ref:"HEAD",depth:2})),J.acquire({fs:e,gitdir:n,cache:t,allowUnmerged:!1},async function(h){let m=Kf(h.entries).get(".");if(d||(d=await il({fs:e,gitdir:n,inode:m,dryRun:l})),u)u=await Promise.all(u.map(x=>$.resolve({fs:e,gitdir:n,ref:x})));else try{u=[await $.resolve({fs:e,gitdir:n,ref:c})]}catch{u=[]}let g=ge.from({tree:d,parent:u,author:a,committer:s,message:i});o&&(g=await ge.sign(g,r,o));let _=await Ee({fs:e,gitdir:n,type:"commit",object:g.toObject(),dryRun:l});return!f&&!l&&await $.writeRef({fs:e,gitdir:n,ref:c,value:_}),_})}async function il({fs:e,gitdir:t,inode:r,dryRun:n}){let i=r.children;for(let l of i)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await il({fs:e,gitdir:t,inode:l,dryRun:n}));let a=i.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=_e.from(a);return await Ee({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:n})}async function nn({fs:e,cache:t,gitdir:r,oid:n,filepath:i}){if(i.startsWith("/"))throw new vt("leading-slash");if(i.endsWith("/"))throw new vt("trailing-slash");let a=n,s=await cr({fs:e,cache:t,gitdir:r,oid:n}),o=s.tree;if(i==="")n=s.oid;else{let l=i.split("/");n=await al({fs:e,cache:t,gitdir:r,tree:o,pathArray:l,oid:a,filepath:i})}return n}async function al({fs:e,cache:t,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s}){let o=i.shift();for(let l of n)if(l.path===o){if(i.length===0)return l.oid;{let{type:f,object:c}=await W({fs:e,cache:t,gitdir:r,oid:l.oid});if(f!=="tree")throw new le(a,f,"tree",s);return n=_e.from(c),al({fs:e,cache:t,gitdir:r,tree:n,pathArray:i,oid:a,filepath:s})}}throw new H(`file or directory found at "${a}:${s}"`)}async function hr({fs:e,cache:t,gitdir:r,oid:n,filepath:i=void 0}){i!==void 0&&(n=await nn({fs:e,cache:t,gitdir:r,oid:n,filepath:i}));let{tree:a,oid:s}=await cr({fs:e,cache:t,gitdir:r,oid:n});return{oid:s,tree:a.entries()}}async function Za({fs:e,gitdir:t,tree:r}){let n=_e.from(r).toObject();return await Ee({fs:e,gitdir:t,type:"tree",object:n,format:"content"})}async function Lp({fs:e,cache:t,onSign:r,gitdir:n,ref:i,oid:a,note:s,force:o,author:l,committer:f,signingKey:c}){let u;try{u=await $.resolve({gitdir:n,fs:e,ref:i})}catch(_){if(!(_ instanceof H))throw _}let h=(await hr({fs:e,cache:t,gitdir:n,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)h=h.filter(_=>_.path!==a);else for(let _ of h)if(_.path===a)throw new Ne("note",a);typeof s=="string"&&(s=Buffer.from(s,"utf8"));let w=await Ee({fs:e,gitdir:n,type:"blob",object:s,format:"content"});h.push({mode:"100644",path:a,oid:w,type:"blob"});let m=await Za({fs:e,gitdir:n,tree:h});return await Jn({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tree:m,parent:u&&[u],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:f,signingKey:c})}async function La({fs:e,gitdir:t,path:r}){return(await Q.get({fs:e,gitdir:t})).get(r)}async function Ct({fs:e,gitdir:t,author:r={}}){let{name:n,email:i,timestamp:a,timezoneOffset:s}=r;if(n=n||await La({fs:e,gitdir:t,path:"user.name"}),i=i||await La({fs:e,gitdir:t,path:"user.email"})||"",n!==void 0)return a=a??Math.floor(Date.now()/1e3),s=s??new Date(a*1e3).getTimezoneOffset(),{name:n,email:i,timestamp:a,timezoneOffset:s}}async function an({fs:e,gitdir:t,author:r,committer:n}){return n=Object.assign({},n||r),r&&(n.timestamp=n.timestamp||r.timestamp,n.timezoneOffset=n.timezoneOffset||r.timezoneOffset),n=await Ct({fs:e,gitdir:t,author:n}),n}async function sl({fs:e,onSign:t,dir:r,gitdir:n=T(r,".git"),ref:i="refs/notes/commits",oid:a,note:s,force:o,author:l,committer:f,signingKey:c,cache:u={}}){try{p("fs",e),p("gitdir",n),p("oid",a),p("note",s),c&&p("onSign",t);let d=new P(e),h=await Ct({fs:d,gitdir:n,author:l});if(!h)throw new ue("author");let w=await an({fs:d,gitdir:n,author:h,committer:f});if(!w)throw new ue("committer");return await Lp({fs:new P(d),cache:u,onSign:t,gitdir:n,ref:i,oid:a,note:s,force:o,author:h,committer:w,signingKey:c})}catch(d){throw d.caller="git.addNote",d}}async function ol({fs:e,gitdir:t,remote:r,url:n,force:i}){if(r!==We.clean(r))throw new it(r,We.clean(r));let a=await Q.get({fs:e,gitdir:t});if(!i&&(await a.getSubsections("remote")).includes(r)&&n!==await a.get(`remote.${r}.url`))throw new Ne("remote",r);await a.set(`remote.${r}.url`,n),await a.set(`remote.${r}.fetch`,`+refs/heads/*:refs/remotes/${r}/*`),await Q.save({fs:e,gitdir:t,config:a})}async function cl({fs:e,dir:t,gitdir:r=T(t,".git"),remote:n,url:i,force:a=!1}){try{return p("fs",e),p("gitdir",r),p("remote",n),p("url",i),await ol({fs:new P(e),gitdir:r,remote:n,url:i,force:a})}catch(s){throw s.caller="git.addRemote",s}}async function qp({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:f,force:c=!1}){if(i=i.startsWith("refs/tags/")?i:`refs/tags/${i}`,!c&&await $.exists({fs:e,gitdir:n,ref:i}))throw new Ne("tag",i);let u=await $.resolve({fs:e,gitdir:n,ref:l||"HEAD"}),{type:d}=await W({fs:e,cache:t,gitdir:n,oid:u}),h=xe.from({object:u,type:d,tag:i.replace("refs/tags/",""),tagger:a,message:s,gpgsig:o});f&&(h=await xe.sign(h,r,f));let w=await Ee({fs:e,gitdir:n,type:"tag",object:h.toObject()});await $.writeRef({fs:e,gitdir:n,ref:i,value:w})}async function fl({fs:e,onSign:t,dir:r,gitdir:n=T(r,".git"),ref:i,tagger:a,message:s=i,gpgsig:o,object:l,signingKey:f,force:c=!1,cache:u={}}){try{p("fs",e),p("gitdir",n),p("ref",i),f&&p("onSign",t);let d=new P(e),h=await Ct({fs:d,gitdir:n,author:a});if(!h)throw new ue("tagger");return await qp({fs:d,cache:u,onSign:t,gitdir:n,ref:i,tagger:h,message:s,gpgsig:o,object:l,signingKey:f,force:c})}catch(d){throw d.caller="git.annotatedTag",d}}async function Fp({fs:e,gitdir:t,ref:r,object:n,checkout:i=!1,force:a=!1}){if(r!==We.clean(r))throw new it(r,We.clean(r));let s=`refs/heads/${r}`;if(!a&&await $.exists({fs:e,gitdir:t,ref:s}))throw new Ne("branch",r,!1);let o;try{o=await $.resolve({fs:e,gitdir:t,ref:n||"HEAD"})}catch{}o&&await $.writeRef({fs:e,gitdir:t,ref:s,value:o}),i&&await $.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function ll({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,object:i,checkout:a=!1,force:s=!1}){try{return p("fs",e),p("gitdir",r),p("ref",n),await Fp({fs:new P(e),gitdir:r,ref:n,object:i,checkout:a,force:s})}catch(o){throw o.caller="git.branch",o}}var ul=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Wa({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,remote:a,ref:s,filepaths:o,noCheckout:l,noUpdateHead:f,dryRun:c,force:u,track:d=!0}){let h;try{h=await $.resolve({fs:e,gitdir:i,ref:s})}catch(w){if(s==="HEAD")throw w;let m=`${a}/${s}`;if(h=await $.resolve({fs:e,gitdir:i,ref:m}),d){let g=await Q.get({fs:e,gitdir:i});await g.set(`branch.${s}.remote`,a),await g.set(`branch.${s}.merge`,`refs/heads/${s}`),await Q.save({fs:e,gitdir:i,config:g})}await $.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:h})}if(!l){let w;try{w=await Hp({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,ref:s,force:u,filepaths:o})}catch(E){throw E instanceof H&&E.data.what===h?new Hr(s,h):E}let m=w.filter(([E])=>E==="conflict").map(([E,y])=>y);if(m.length>0)throw new Fr(m);let g=w.filter(([E])=>E==="error").map(([E,y])=>y);if(g.length>0)throw new D(g.join(", "));if(c)return;let _=0,x=w.length;await J.acquire({fs:e,gitdir:i,cache:t},async function(E){await Promise.all(w.filter(([y])=>y==="delete"||y==="delete-index").map(async function([y,b]){let A=`${n}/${b}`;y==="delete"&&await e.rm(A),E.delete({filepath:b}),r&&await r({phase:"Updating workdir",loaded:++_,total:x})}))}),await J.acquire({fs:e,gitdir:i,cache:t},async function(E){for(let[y,b]of w)if(y==="rmdir"||y==="rmdir-index"){let A=`${n}/${b}`;try{y==="rmdir-index"&&E.delete({filepath:b}),await e.rmdir(A),r&&await r({phase:"Updating workdir",loaded:++_,total:x})}catch(v){if(v.code==="ENOTEMPTY")console.log(`Did not delete ${b} because directory is not empty`);else throw v}}}),await Promise.all(w.filter(([E])=>E==="mkdir"||E==="mkdir-index").map(async function([E,y]){let b=`${n}/${y}`;await e.mkdir(b),r&&await r({phase:"Updating workdir",loaded:++_,total:x})})),await J.acquire({fs:e,gitdir:i,cache:t},async function(E){await Promise.all(w.filter(([y])=>y==="create"||y==="create-index"||y==="update"||y==="mkdir-index").map(async function([y,b,A,v,O]){let k=`${n}/${b}`;try{if(y!=="create-index"&&y!=="mkdir-index"){let{object:S}=await W({fs:e,cache:t,gitdir:i,oid:A});if(O&&await e.rm(k),v===33188)await e.write(k,S);else if(v===33261)await e.write(k,S,{mode:511});else if(v===40960)await e.writelink(k,S);else throw new D(`Invalid mode 0o${v.toString(8)} detected in blob ${A}`)}let R=await e.lstat(k);v===33261&&(R.mode=493),y==="mkdir-index"&&(R.mode=57344),E.insert({filepath:b,stats:R,oid:A}),r&&await r({phase:"Updating workdir",loaded:++_,total:x})}catch(R){console.log(R)}}))})}if(!f){let w=await $.expand({fs:e,gitdir:i,ref:s});w.startsWith("refs/heads")?await $.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:w}):await $.writeRef({fs:e,gitdir:i,ref:"HEAD",value:h})}}async function Hp({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,ref:a,force:s,filepaths:o}){let l=0;return fr({fs:e,cache:t,dir:n,gitdir:i,trees:[rt({ref:a}),rn(),tn()],map:async function(f,[c,u,d]){if(f===".")return;if(o&&!o.some(w=>ul(f,w)))return null;switch(r&&await r({phase:"Analyzing workdir",loaded:++l}),[!!d,!!c,!!u].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(f)?["delete",f]:void 0;case"010":switch(await c.type()){case"tree":return["mkdir",f];case"blob":return["create",f,await c.oid(),await c.mode()];case"commit":return["mkdir-index",f,await c.oid(),await c.mode()];default:return["error",`new entry Unhandled type ${await c.type()}`]}case"011":switch(`${await c.type()}-${await u.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",f];case"blob-blob":return await c.oid()!==await u.oid()?s?["update",f,await c.oid(),await c.mode(),await c.mode()!==await u.mode()]:["conflict",f]:await c.mode()!==await u.mode()?s?["update",f,await c.oid(),await c.mode(),!0]:["conflict",f]:["create-index",f,await c.oid(),await c.mode()];case"commit-tree":return;case"commit-blob":return["conflict",f];default:return["error",`new entry Unhandled type ${c.type}`]}case"100":return["delete-index",f];case"101":switch(await d.type()){case"tree":return["rmdir",f];case"blob":return await d.oid()!==await u.oid()?s?["delete",f]:["conflict",f]:["delete",f];case"commit":return["rmdir-index",f];default:return["error",`delete entry Unhandled type ${await d.type()}`]}case"110":case"111":switch(`${await d.type()}-${await c.type()}`){case"tree-tree":return;case"blob-blob":{if(await d.oid()===await c.oid()&&await d.mode()===await c.mode()&&!s)return;if(u){if(await u.oid()!==await d.oid()&&await u.oid()!==await c.oid())return s?["update",f,await c.oid(),await c.mode(),await c.mode()!==await u.mode()]:["conflict",f]}else if(s)return["update",f,await c.oid(),await c.mode(),await c.mode()!==await d.mode()];return await c.mode()!==await d.mode()?["update",f,await c.oid(),await c.mode(),!0]:await c.oid()!==await d.oid()?["update",f,await c.oid(),await c.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",f,await c.oid()];case"blob-tree":return["update-blob-to-tree",f];case"commit-commit":return["mkdir-index",f,await c.oid(),await c.mode()];default:return["error",`update entry Unhandled type ${await d.type()}-${await c.type()}`]}}},reduce:async function(f,c){return c=el(c),f?f&&f[0]==="rmdir"?(c.push(f),c):(c.unshift(f),c):c}})}async function dl({fs:e,onProgress:t,dir:r,gitdir:n=T(r,".git"),remote:i="origin",ref:a,filepaths:s,noCheckout:o=!1,noUpdateHead:l=a===void 0,dryRun:f=!1,force:c=!1,track:u=!0,cache:d={}}){try{p("fs",e),p("dir",r),p("gitdir",n);let h=a||"HEAD";return await Wa({fs:new P(e),cache:d,onProgress:t,dir:r,gitdir:n,remote:i,ref:h,filepaths:s,noCheckout:o,noUpdateHead:l,dryRun:f,force:c,track:u})}catch(h){throw h.caller="git.checkout",h}}var Gp=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Qt(e){let t=Gp.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Nt({fs:e,gitdir:t,fullname:r=!1,test:n=!1}){let i=await $.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(n)try{await $.resolve({fs:e,gitdir:t,ref:i})}catch{return}if(i.startsWith("refs/"))return r?i:Qt(i)}function Zp(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function hl({username:e="",password:t=""}){return`Basic ${Buffer.from(`${e}:${t}`).toString("base64")}`}async function sn(e,t){let r=Yf(e);for(;;){let{value:n,done:i}=await r.next();if(n&&await t(n),i)break}r.return&&r.return()}async function Vn(e){let t=0,r=[];await sn(e,a=>{r.push(a),t+=a.byteLength});let n=new Uint8Array(t),i=0;for(let a of r)n.set(a,i),i+=a.byteLength;return n}function jf(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];let[r,n]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:r,password:n}}}function qa(e,t){let r=t.toString(16);return"0".repeat(e-r.length)+r}var Z=class{static flush(){return Buffer.from("0000","utf8")}static delim(){return Buffer.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Buffer.from(t));let r=t.length+4,n=qa(4,r);return Buffer.concat([Buffer.from(n,"utf8"),t])}static streamReader(t){let r=new Gn(t);return async function(){try{let i=await r.read(4);if(i==null)return!0;if(i=parseInt(i.toString("utf8"),16),i===0||i===1)return null;let a=await r.read(i-4);return a??!0}catch(i){return console.log("error",i),!0}}}};async function Mf(e){let t={},r;for(;r=await e(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");let n=r.indexOf("=");if(n>-1){let i=r.slice(0,n),a=r.slice(n+1);t[i]=a}else t[r]=!0}return{protocolVersion:2,capabilities2:t}}async function zf(e,{service:t}){let r=new Set,n=new Map,i=new Map,a=Z.streamReader(e),s=await a();for(;s===null;)s=await a();if(s===!0)throw new Gr;if(s.includes("version 2"))return Mf(a);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Bt(`# service=${t}\\n`,s.toString("utf8"));let o=await a();for(;o===null;)o=await a();if(o===!0)return{capabilities:r,refs:n,symrefs:i};if(o=o.toString("utf8"),o.includes("version 2"))return Mf(a);let[l,f]=Sa(o,"\0","\\x00");f.split(" ").map(d=>r.add(d));let[c,u]=Sa(l," "," ");for(n.set(u,c);;){let d=await a();if(d===!0)break;if(d!==null){let[h,w]=Sa(d.toString("utf8")," "," ");n.set(w,h)}}for(let d of r)if(d.startsWith("symref=")){let h=d.match(/symref=([^:]+):(.*)/);h.length===3&&i.set(h[1],h[2])}return{protocolVersion:1,capabilities:r,refs:n,symrefs:i}}function Sa(e,t,r){let n=e.trim().split(t);if(n.length!==2)throw new Bt(`Two strings separated by '${r}'`,e.toString("utf8"));return n}var Lf=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,qf=(e,t)=>{(t.username||t.password)&&(e.Authorization=hl(t)),t.headers&&Object.assign(e,t.headers)},Oa=async e=>{try{let t=Buffer.from(await Vn(e.body)),r=t.toString("utf8");return{preview:r.length<256?r:r.slice(0,256)+"...",response:r,data:t}}catch{return{}}},ur=class{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:r,onAuth:n,onAuthSuccess:i,onAuthFailure:a,corsProxy:s,service:o,url:l,headers:f,protocolVersion:c}){let{url:u,auth:d}=jf(l),h=s?Lf(s,u):u;(d.username||d.password)&&(f.Authorization=hl(d)),c===2&&(f["Git-Protocol"]="version=2");let w,m,g=!1;do if(w=await t.request({onProgress:r,method:"GET",url:`${h}/info/refs?service=${o}`,headers:f}),m=!1,w.statusCode===401||w.statusCode===203){let _=g?a:n;if(_){if(d=await _(u,{...d,headers:{...f}}),d&&d.cancel)throw new Qr;d&&(qf(f,d),g=!0,m=!0)}}else w.statusCode===200&&g&&i&&await i(u,d);while(m);if(w.statusCode!==200){let{response:_}=await Oa(w);throw new ir(w.statusCode,w.statusMessage,_)}if(w.headers["content-type"]===`application/x-${o}-advertisement`){let _=await zf(w.body,{service:o});return _.auth=d,_}else{let{preview:_,response:x,data:E}=await Oa(w);try{let y=await zf([E],{service:o});return y.auth=d,y}catch{throw new Xr(_,x)}}}static async connect({http:t,onProgress:r,corsProxy:n,service:i,url:a,auth:s,body:o,headers:l}){let f=jf(a);f&&(a=f.url),n&&(a=Lf(n,a)),l["content-type"]=`application/x-${i}-request`,l.accept=`application/x-${i}-result`,qf(l,s);let c=await t.request({onProgress:r,method:"POST",url:`${a}/${i}`,body:o,headers:l});if(c.statusCode!==200){let{response:u}=Oa(c);throw new ir(c.statusCode,c.statusMessage,u)}return c}};function Wp({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};let t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}var dr=class{static getRemoteHelperFor({url:t}){let r=new Map;r.set("http",ur),r.set("https",ur);let n=Wp({url:t});if(!n)throw new Jr(t);if(r.has(n.transport))return r.get(n.transport);throw new Yr(t,n.transport,n.transport==="ssh"?Zp(t):void 0)}},It=null,Pt=class{static async read({fs:t,gitdir:r}){It===null&&(It=new Aa);let n=T(r,"shallow"),i=new Set;return await It.acquire(n,async function(){let a=await t.read(n,{encoding:"utf8"});if(a===null||a.trim()==="")return i;a.trim().split(`
`).map(s=>i.add(s))}),i}static async write({fs:t,gitdir:r,oids:n}){It===null&&(It=new Aa);let i=T(r,"shallow");if(n.size>0){let a=[...n].join(`
`)+`
`;await It.acquire(i,async function(){await t.write(i,a,{encoding:"utf8"})})}else await It.acquire(i,async function(){await t.rm(i)})}};async function Vp({fs:e,gitdir:t,oid:r}){let n=`objects/${r.slice(0,2)}/${r.slice(2)}`;return e.exists(`${t}/${n}`)}async function Kp({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i}){let a=await e.readdir(T(r,"objects/pack"));a=a.filter(s=>s.endsWith(".idx"));for(let s of a){let o=`${r}/objects/pack/${s}`,l=await Ga({fs:e,cache:t,filename:o,getExternalRefDelta:i});if(l.error)throw new D(l.error);if(l.offsets.has(n))return!0}return!1}async function Ff({fs:e,cache:t,gitdir:r,oid:n,format:i="content"}){let a=o=>W({fs:e,cache:t,gitdir:r,oid:o}),s=await Vp({fs:e,gitdir:r,oid:n});return s||(s=await Kp({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:a})),s}function Xp(e){let t="5041434b",r="00000002",n="00000000",i=t+r+n;return e.slice(0,12).toString("hex")===i}function wl(e,t){let r=e.map(n=>n.split("=",1)[0]);return t.filter(n=>{let i=n.split("=",1)[0];return r.includes(i)})}var Qn={name:"isomorphic-git",version:"1.24.5",agent:"git/isomorphic-git@1.24.5"},er=class{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){let r=this._waiting;this._waiting=null,r({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){let t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this._ended=!0,this.error=t}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}};function Yp(e){let t=e.indexOf("\r"),r=e.indexOf(`
`);return t===-1&&r===-1?-1:t===-1?r+1:r===-1?t+1:r===t+1?r+1:Math.min(t,r)+1}function pl(e){let t=new er,r="";return(async()=>(await sn(e,n=>{for(n=n.toString("utf8"),r+=n;;){let i=Yp(r);if(i===-1)break;t.write(r.slice(0,i)),r=r.slice(i)}}),r.length>0&&t.write(r),t.end()))(),t}var Kn=class{static demux(t){let r=Z.streamReader(t),n=new er,i=new er,a=new er,s=async function(){let o=await r();if(o===null)return s();if(o===!0){n.end(),a.end(),i.end();return}switch(o[0]){case 1:{i.write(o.slice(1));break}case 2:{a.write(o.slice(1));break}case 3:{let l=o.slice(1);a.write(l),i.destroy(new Error(l.toString("utf8")));return}default:n.write(o.slice(0))}s()};return s(),{packetlines:n,packfile:i,progress:a}}};async function Jp(e){let{packetlines:t,packfile:r,progress:n}=Kn.demux(e),i=[],a=[],s=[],o=!1,l=!1;return new Promise((f,c)=>{sn(t,u=>{let d=u.toString("utf8").trim();if(d.startsWith("shallow")){let h=d.slice(-41).trim();h.length!==40&&c(new _t(h)),i.push(h)}else if(d.startsWith("unshallow")){let h=d.slice(-41).trim();h.length!==40&&c(new _t(h)),a.push(h)}else if(d.startsWith("ACK")){let[,h,w]=d.split(" ");s.push({oid:h,status:w}),w||(l=!0)}else d.startsWith("NAK")&&(o=!0,l=!0);l&&f({shallows:i,unshallows:a,acks:s,nak:o,packfile:r,progress:n})})})}function Qp({capabilities:e=[],wants:t=[],haves:r=[],shallows:n=[],depth:i=null,since:a=null,exclude:s=[]}){let o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(let f of t)o.push(Z.encode(`want ${f}${l}
`)),l="";for(let f of n)o.push(Z.encode(`shallow ${f}
`));i!==null&&o.push(Z.encode(`deepen ${i}
`)),a!==null&&o.push(Z.encode(`deepen-since ${Math.floor(a.valueOf()/1e3)}
`));for(let f of s)o.push(Z.encode(`deepen-not ${f}
`));o.push(Z.flush());for(let f of r)o.push(Z.encode(`have ${f}
`));return o.push(Z.encode(`done
`)),o}async function Va({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:f,remoteRef:c,remote:u,url:d,corsProxy:h,depth:w=null,since:m=null,exclude:g=[],relative:_=!1,tags:x=!1,singleBranch:E=!1,headers:y={},prune:b=!1,pruneTags:A=!1}){let v=f||await Nt({fs:e,gitdir:l,test:!0}),O=await Q.get({fs:e,gitdir:l}),k=u||v&&await O.get(`branch.${v}.remote`)||"origin",R=d||await O.get(`remote.${k}.url`);if(typeof R>"u")throw new ye("remote OR url");let S=c||v&&await O.get(`branch.${v}.merge`)||f||"HEAD";h===void 0&&(h=await O.get("http.corsProxy"));let B=dr.getRemoteHelperFor({url:R}),N=await B.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:h,service:"git-upload-pack",url:R,headers:y,protocolVersion:1}),F=N.auth,de=N.refs;if(de.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(w!==null&&!N.capabilities.has("shallow"))throw new mt("shallow","depth");if(m!==null&&!N.capabilities.has("deepen-since"))throw new mt("deepen-since","since");if(g.length>0&&!N.capabilities.has("deepen-not"))throw new mt("deepen-not","exclude");if(_===!0&&!N.capabilities.has("deepen-relative"))throw new mt("deepen-relative","relative");let{oid:at,fullref:he}=$.resolveAgainstMap({ref:S,map:de});for(let q of de.keys())q===he||q==="HEAD"||q.startsWith("refs/heads/")||x&&q.startsWith("refs/tags/")||de.delete(q);let Ve=wl([...N.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Qn.agent}`]);_&&Ve.push("deepen-relative");let ei=E?[at]:de.values(),De=E?[v]:await $.listRefs({fs:e,gitdir:l,filepath:"refs"}),X=[];for(let q of De)try{q=await $.expand({fs:e,gitdir:l,ref:q});let te=await $.resolve({fs:e,gitdir:l,ref:q});await Ff({fs:e,cache:t,gitdir:l,oid:te})&&X.push(te)}catch{}X=[...new Set(X)];let ae=await Pt.read({fs:e,gitdir:l}),ie=N.capabilities.has("shallow")?[...ae]:[],wr=Qp({capabilities:Ve,wants:ei,haves:X,shallows:ie,depth:w,since:m,exclude:g}),ti=Buffer.from(await Vn(wr)),pr=await B.connect({http:r,onProgress:n,corsProxy:h,service:"git-upload-pack",url:R,auth:F,body:[ti],headers:y}),ee=await Jp(pr.body);pr.headers&&(ee.headers=pr.headers);for(let q of ee.shallows)if(!ae.has(q))try{let{object:te}=await W({fs:e,cache:t,gitdir:l,oid:q}),ke=new ge(te),Ue=await Promise.all(ke.headers().parent.map(_r=>Ff({fs:e,cache:t,gitdir:l,oid:_r})));Ue.length===0||Ue.every(_r=>_r)||ae.add(q)}catch{ae.add(q)}for(let q of ee.unshallows)ae.delete(q);if(await Pt.write({fs:e,gitdir:l,oids:ae}),E){let q=new Map([[he,at]]),te=new Map,ke=10,Ue=he;for(;ke--;){let ni=N.symrefs.get(Ue);if(ni===void 0)break;te.set(Ue,ni),Ue=ni}let ri=de.get(Ue);ri&&q.set(Ue,ri);let{pruned:_r}=await $.updateRemoteRefs({fs:e,gitdir:l,remote:k,refs:q,symrefs:te,tags:x,prune:b});b&&(ee.pruned=_r)}else{let{pruned:q}=await $.updateRemoteRefs({fs:e,gitdir:l,remote:k,refs:de,symrefs:N.symrefs,tags:x,prune:b,pruneTags:A});b&&(ee.pruned=q)}if(ee.HEAD=N.symrefs.get("HEAD"),ee.HEAD===void 0){let{oid:q}=$.resolveAgainstMap({ref:"HEAD",map:de});for(let[te,ke]of de.entries())if(te!=="HEAD"&&ke===q){ee.HEAD=te;break}}let Du=he.startsWith("refs/tags")?"tag":"branch";if(ee.FETCH_HEAD={oid:at,description:`${Du} '${Qt(he)}' of ${R}`},n||i){let q=pl(ee.progress);sn(q,async te=>{if(i&&await i(te),n){let ke=te.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);ke&&await n({phase:ke[1].trim(),loaded:parseInt(ke[2],10),total:parseInt(ke[3],10)})}})}let on=Buffer.from(await Vn(ee.packfile)),Xa=on.slice(-20).toString("hex"),mr={defaultBranch:ee.HEAD,fetchHead:ee.FETCH_HEAD.oid,fetchHeadDescription:ee.FETCH_HEAD.description};if(ee.headers&&(mr.headers=ee.headers),b&&(mr.pruned=ee.pruned),Xa!==""&&!Xp(on)){mr.packfile=`objects/pack/pack-${Xa}.pack`;let q=T(l,mr.packfile);await e.write(q,on);let te=Ue=>W({fs:e,cache:t,gitdir:l,oid:Ue}),ke=await Lr.fromPack({pack:on,getExternalRefDelta:te,onProgress:n});await e.write(q.replace(/\.pack$/,".idx"),await ke.toBuffer())}return mr}async function ml({fs:e,bare:t=!1,dir:r,gitdir:n=t?r:T(r,".git"),defaultBranch:i="master"}){if(await e.exists(n+"/config"))return;let a=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];a=a.map(s=>n+"/"+s);for(let s of a)await e.mkdir(s);await e.write(n+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(n+"/HEAD",`ref: refs/heads/${i}
`)}async function em({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:f,url:c,corsProxy:u,ref:d,remote:h,depth:w,since:m,exclude:g,relative:_,singleBranch:x,noCheckout:E,noTags:y,headers:b}){try{if(await ml({fs:e,gitdir:f}),await ol({fs:e,gitdir:f,remote:h,url:c,force:!1}),u){let O=await Q.get({fs:e,gitdir:f});await O.set("http.corsProxy",u),await Q.save({fs:e,gitdir:f,config:O})}let{defaultBranch:A,fetchHead:v}=await Va({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:f,ref:d,remote:h,corsProxy:u,depth:w,since:m,exclude:g,relative:_,singleBranch:x,headers:b,tags:!y});if(v===null)return;d=d||A,d=d.replace("refs/heads/",""),await Wa({fs:e,cache:t,onProgress:n,dir:l,gitdir:f,ref:d,remote:h,noCheckout:E})}catch(A){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),A}}async function _l({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=T(o,".git"),url:f,corsProxy:c=void 0,ref:u=void 0,remote:d="origin",depth:h=void 0,since:w=void 0,exclude:m=[],relative:g=!1,singleBranch:_=!1,noCheckout:x=!1,noTags:E=!1,headers:y={},cache:b={}}){try{return p("fs",e),p("http",t),p("gitdir",l),x||p("dir",o),p("url",f),await em({fs:new P(e),cache:b,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l,url:f,corsProxy:c,ref:u,remote:d,depth:h,since:w,exclude:m,relative:g,singleBranch:_,noCheckout:x,noTags:E,headers:y})}catch(A){throw A.caller="git.clone",A}}async function gl({fs:e,onSign:t,dir:r,gitdir:n=T(r,".git"),message:i,author:a,committer:s,signingKey:o,dryRun:l=!1,noUpdateBranch:f=!1,ref:c,parent:u,tree:d,cache:h={}}){try{p("fs",e),p("message",i),o&&p("onSign",t);let w=new P(e),m=await Ct({fs:w,gitdir:n,author:a});if(!m)throw new ue("author");let g=await an({fs:w,gitdir:n,author:m,committer:s});if(!g)throw new ue("committer");return await Jn({fs:w,cache:h,onSign:t,gitdir:n,message:i,author:m,committer:g,signingKey:o,dryRun:l,noUpdateBranch:f,ref:c,parent:u,tree:d})}catch(w){throw w.caller="git.commit",w}}async function vl({fs:e,dir:t,gitdir:r=T(t,".git"),fullname:n=!1,test:i=!1}){try{return p("fs",e),p("gitdir",r),await Nt({fs:new P(e),gitdir:r,fullname:n,test:i})}catch(a){throw a.caller="git.currentBranch",a}}async function tm({fs:e,gitdir:t,ref:r}){if(r=r.startsWith("refs/heads/")?r:`refs/heads/${r}`,!await $.exists({fs:e,gitdir:t,ref:r}))throw new H(r);let i=await $.expand({fs:e,gitdir:t,ref:r}),a=await Nt({fs:e,gitdir:t,fullname:!0});if(i===a){let s=await $.resolve({fs:e,gitdir:t,ref:i});await $.writeRef({fs:e,gitdir:t,ref:"HEAD",value:s})}await $.deleteRef({fs:e,gitdir:t,ref:i})}async function bl({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n}){try{return p("fs",e),p("ref",n),await tm({fs:new P(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteBranch",i}}async function yl({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n}){try{p("fs",e),p("ref",n),await $.deleteRef({fs:new P(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteRef",i}}async function rm({fs:e,gitdir:t,remote:r}){let n=await Q.get({fs:e,gitdir:t});await n.deleteSection("remote",r),await Q.save({fs:e,gitdir:t,config:n})}async function xl({fs:e,dir:t,gitdir:r=T(t,".git"),remote:n}){try{return p("fs",e),p("remote",n),await rm({fs:new P(e),gitdir:r,remote:n})}catch(i){throw i.caller="git.deleteRemote",i}}async function nm({fs:e,gitdir:t,ref:r}){r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`,await $.deleteRef({fs:e,gitdir:t,ref:r})}async function El({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n}){try{return p("fs",e),p("ref",n),await nm({fs:new P(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.deleteTag",i}}async function im({fs:e,gitdir:t,oid:r}){let n=r.slice(0,2);return(await e.readdir(`${t}/objects/${n}`)).map(a=>`${n}${a}`).filter(a=>a.startsWith(r))}async function am({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i}){let a=[],s=await e.readdir(T(r,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(let o of s){let l=`${r}/objects/pack/${o}`,f=await Ga({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(f.error)throw new D(f.error);for(let c of f.offsets.keys())c.startsWith(n)&&a.push(c)}return a}async function sm({fs:e,cache:t,gitdir:r,oid:n}){let i=o=>W({fs:e,cache:t,gitdir:r,oid:o}),a=await im({fs:e,gitdir:r,oid:n}),s=await am({fs:e,cache:t,gitdir:r,oid:n,getExternalRefDelta:i});for(let o of s)a.indexOf(o)===-1&&a.push(o);if(a.length===1)return a[0];throw a.length>1?new qr("oids",n,a):new H(`an object matching "${n}"`)}async function kl({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,cache:i={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),await sm({fs:new P(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.expandOid",a}}async function Sl({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n}){try{return p("fs",e),p("gitdir",r),p("ref",n),await $.expand({fs:new P(e),gitdir:r,ref:n})}catch(i){throw i.caller="git.expandRef",i}}async function Ka({fs:e,cache:t,gitdir:r,oids:n}){let i={},a=n.length,s=n.map((o,l)=>({index:l,oid:o}));for(;s.length;){let o=new Set;for(let{oid:f,index:c}of s)i[f]||(i[f]=new Set),i[f].add(c),i[f].size===a&&o.add(f);if(o.size>0)return[...o];let l=new Map;for(let{oid:f,index:c}of s)try{let{object:u}=await W({fs:e,cache:t,gitdir:r,oid:f}),d=ge.from(u),{parent:h}=d.parseHeaders();for(let w of h)(!i[w]||!i[w].has(c))&&l.set(w+":"+c,{oid:w,index:c})}catch{}s=Array.from(l.values())}return[]}var Ra=/^.*(\r?\n|$)/gm;function om({branches:e,contents:t}){let r=e[1],n=e[2],i=t[0],a=t[1],s=t[2],o=a.match(Ra),l=i.match(Ra),f=s.match(Ra),c=qw(o,l,f),u=7,d="",h=!0;for(let w of c)w.ok&&(d+=w.ok.join("")),w.conflict&&(h=!1,d+=`${"<".repeat(u)} ${r}
`,d+=w.conflict.a.join(""),d+=`${"=".repeat(u)}
`,d+=w.conflict.b.join(""),d+=`${">".repeat(u)} ${n}
`);return{cleanMerge:h,mergedText:d}}async function cm({fs:e,cache:t,dir:r,gitdir:n=T(r,".git"),index:i,ourOid:a,baseOid:s,theirOid:o,ourName:l="ours",baseName:f="base",theirName:c="theirs",dryRun:u=!1,abortOnConflict:d=!0,mergeDriver:h}){let w=rt({ref:a}),m=rt({ref:s}),g=rt({ref:o}),_=[],x=await fr({fs:e,cache:t,dir:r,gitdir:n,trees:[w,m,g],map:async function(E,[y,b,A]){let v=qn(E),O=await Wn(y,b),k=await Wn(A,b);switch(`${O}-${k}`){case"false-false":return{mode:await b.mode(),path:v,oid:await b.oid(),type:await b.type()};case"false-true":return A?{mode:await A.mode(),path:v,oid:await A.oid(),type:await A.type()}:void 0;case"true-false":return y?{mode:await y.mode(),path:v,oid:await y.oid(),type:await y.type()}:void 0;case"true-true":{if(y&&b&&A&&await y.type()==="blob"&&await b.type()==="blob"&&await A.type()==="blob")return fm({fs:e,gitdir:n,path:v,ours:y,base:b,theirs:A,ourName:l,baseName:f,theirName:c,mergeDriver:h}).then(async R=>{if(R.cleanMerge)d||i.insert({filepath:E,oid:R.mergeResult.oid,stage:0});else if(_.push(E),!d){let S=await b.oid(),B=await y.oid(),N=await A.oid();i.delete({filepath:E}),i.insert({filepath:E,oid:S,stage:1}),i.insert({filepath:E,oid:B,stage:2}),i.insert({filepath:E,oid:N,stage:3})}return R.mergeResult});throw new ar}}},reduce:_.length!==0&&(!r||d)?void 0:async(E,y)=>{let b=y.filter(Boolean);if(E&&!(E&&E.type==="tree"&&b.length===0)){if(b.length>0){let v=new _e(b).toObject(),O=await Ee({fs:e,gitdir:n,type:"tree",object:v,dryRun:u});E.oid=O}return E}}});return _.length!==0?(r&&!d&&await fr({fs:e,cache:t,dir:r,gitdir:n,trees:[rt({ref:x.oid})],map:async function(E,[y]){let b=`${r}/${E}`;if(await y.type()==="blob"){let A=await y.mode(),v=new TextDecoder().decode(await y.content());await e.write(b,v,{mode:A})}return!0}}),new sr(_)):x.oid}async function fm({fs:e,gitdir:t,path:r,ours:n,base:i,theirs:a,ourName:s,theirName:o,baseName:l,dryRun:f,mergeDriver:c=om}){let u="blob",d=await i.mode()===await n.mode()?await a.mode():await n.mode();if(await n.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:r,oid:await n.oid(),type:u}};if(await n.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:r,oid:await a.oid(),type:u}};if(await a.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:d,path:r,oid:await n.oid(),type:u}};let h=Buffer.from(await n.content()).toString("utf8"),w=Buffer.from(await i.content()).toString("utf8"),m=Buffer.from(await a.content()).toString("utf8"),{mergedText:g,cleanMerge:_}=await c({branches:[l,s,o],contents:[w,h,m],path:r}),x=await Ee({fs:e,gitdir:t,type:"blob",object:Buffer.from(g,"utf8"),dryRun:f});return{cleanMerge:_,mergeResult:{mode:d,path:r,oid:x,type:u}}}async function Ol({fs:e,cache:t,dir:r,gitdir:n,ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:f=!1,abortOnConflict:c=!0,message:u,author:d,committer:h,signingKey:w,onSign:m,mergeDriver:g}){i===void 0&&(i=await Nt({fs:e,gitdir:n,fullname:!0})),i=await $.expand({fs:e,gitdir:n,ref:i}),a=await $.expand({fs:e,gitdir:n,ref:a});let _=await $.resolve({fs:e,gitdir:n,ref:i}),x=await $.resolve({fs:e,gitdir:n,ref:a}),E=await Ka({fs:e,cache:t,gitdir:n,oids:[_,x]});if(E.length!==1)throw new ar;let y=E[0];if(y===x)return{oid:_,alreadyMerged:!0};if(s&&y===_)return!l&&!f&&await $.writeRef({fs:e,gitdir:n,ref:i,value:x}),{oid:x,fastForward:!0};{if(o)throw new Zr;let b=await J.acquire({fs:e,gitdir:n,cache:t,allowUnmerged:!1},async v=>cm({fs:e,cache:t,dir:r,gitdir:n,index:v,ourOid:_,theirOid:x,baseOid:y,ourName:Qt(i),baseName:"base",theirName:Qt(a),dryRun:l,abortOnConflict:c,mergeDriver:g}));if(b instanceof sr)throw b;return u||(u=`Merge branch '${Qt(a)}' into ${Qt(i)}`),{oid:await Jn({fs:e,cache:t,gitdir:n,message:u,ref:i,tree:b,parent:[_,x],author:d,committer:h,signingKey:w,onSign:m,dryRun:l,noUpdateBranch:f}),tree:b,mergeCommit:!0}}}async function Rl({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:f,ref:c,url:u,remote:d,remoteRef:h,prune:w,pruneTags:m,fastForward:g,fastForwardOnly:_,corsProxy:x,singleBranch:E,headers:y,author:b,committer:A,signingKey:v}){try{if(!c){let R=await Nt({fs:e,gitdir:f});if(!R)throw new ye("ref");c=R}let{fetchHead:O,fetchHeadDescription:k}=await Va({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:f,corsProxy:x,ref:c,url:u,remote:d,remoteRef:h,singleBranch:E,headers:y,prune:w,pruneTags:m});await Ol({fs:e,cache:t,gitdir:f,ours:c,theirs:O,fastForward:g,fastForwardOnly:_,message:`Merge ${k}`,author:b,committer:A,signingKey:v,dryRun:!1,noUpdateBranch:!1}),await Wa({fs:e,cache:t,onProgress:n,dir:l,gitdir:f,ref:c,remote:d,noCheckout:!1})}catch(O){throw O.caller="git.pull",O}}async function Tl({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=T(o,".git"),ref:f,url:c,remote:u,remoteRef:d,corsProxy:h,singleBranch:w,headers:m={},cache:g={}}){try{p("fs",e),p("http",t),p("gitdir",l);let _={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await Rl({fs:new P(e),cache:g,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l,ref:f,url:c,remote:u,remoteRef:d,fastForwardOnly:!0,corsProxy:h,singleBranch:w,headers:m,author:_,committer:_})}catch(_){throw _.caller="git.fastForward",_}}async function Al({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=T(o,".git"),ref:f,remote:c,remoteRef:u,url:d,corsProxy:h,depth:w=null,since:m=null,exclude:g=[],relative:_=!1,tags:x=!1,singleBranch:E=!1,headers:y={},prune:b=!1,pruneTags:A=!1,cache:v={}}){try{return p("fs",e),p("http",t),p("gitdir",l),await Va({fs:new P(e),cache:v,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,gitdir:l,ref:f,remote:c,remoteRef:u,url:d,corsProxy:h,depth:w,since:m,exclude:g,relative:_,tags:x,singleBranch:E,headers:y,prune:b,pruneTags:A})}catch(O){throw O.caller="git.fetch",O}}async function $l({fs:e,dir:t,gitdir:r=T(t,".git"),oids:n,cache:i={}}){try{return p("fs",e),p("gitdir",r),p("oids",n),await Ka({fs:new P(e),cache:i,gitdir:r,oids:n})}catch(a){throw a.caller="git.findMergeBase",a}}async function Il({fs:e,filepath:t}){if(await e.exists(T(t,".git")))return t;{let r=nr(t);if(r===t)throw new H(`git root for ${t}`);return Il({fs:e,filepath:r})}}async function Bl({fs:e,filepath:t}){try{return p("fs",e),p("filepath",t),await Il({fs:new P(e),filepath:t})}catch(r){throw r.caller="git.findRoot",r}}async function Pl({fs:e,dir:t,gitdir:r=T(t,".git"),path:n}){try{return p("fs",e),p("gitdir",r),p("path",n),await La({fs:new P(e),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfig",i}}async function lm({fs:e,gitdir:t,path:r}){return(await Q.get({fs:e,gitdir:t})).getall(r)}async function Cl({fs:e,dir:t,gitdir:r=T(t,".git"),path:n}){try{return p("fs",e),p("gitdir",r),p("path",n),await lm({fs:new P(e),gitdir:r,path:n})}catch(i){throw i.caller="git.getConfigAll",i}}async function Nl({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1}){try{p("http",e),p("url",a);let f=await dr.getRemoteHelperFor({url:a}).discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:1}),c={capabilities:[...f.capabilities]};for(let[u,d]of f.refs){let h=u.split("/"),w=h.pop(),m=c;for(let g of h)m[g]=m[g]||{},m=m[g];m[w]=d}for(let[u,d]of f.symrefs){let h=u.split("/"),w=h.pop(),m=c;for(let g of h)m[g]=m[g]||{},m=m[g];m[w]=d}return c}catch(l){throw l.caller="git.getRemoteInfo",l}}function Dl(e,t,r,n){let i=[];for(let[a,s]of e.refs){if(t&&!a.startsWith(t))continue;if(a.endsWith("^{}")){if(n){let l=a.replace("^{}",""),f=i[i.length-1],c=f.ref===l?f:i.find(u=>u.ref===l);if(c===void 0)throw new Error("I did not expect this to happen");c.peeled=s}continue}let o={ref:a,oid:s};r&&e.symrefs.has(a)&&(o.target=e.symrefs.get(a)),i.push(o)}return i}async function Ul({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{p("http",e),p("url",a);let c=await dr.getRemoteHelperFor({url:a}).discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(c.protocolVersion===2)return{protocolVersion:c.protocolVersion,capabilities:c.capabilities2};let u={};for(let d of c.capabilities){let[h,w]=d.split("=");w?u[h]=w:u[h]=!0}return{protocolVersion:1,capabilities:u,refs:Dl(c,void 0,!0,!0)}}catch(f){throw f.caller="git.getRemoteInfo2",f}}async function um({type:e,object:t,format:r="content",oid:n=void 0}){return r!=="deflated"&&(r!=="wrapped"&&(t=gt.wrap({type:e,object:t})),n=await nt(t)),{oid:n,object:t}}async function jl({object:e}){try{p("object",e),typeof e=="string"?e=Buffer.from(e,"utf8"):e=Buffer.from(e);let t="blob",{oid:r,object:n}=await um({type:"blob",format:"content",object:e});return{oid:r,type:t,object:new Uint8Array(n),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function dm({fs:e,cache:t,onProgress:r,dir:n,gitdir:i,filepath:a}){try{a=T(n,a);let s=await e.read(a),o=f=>W({fs:e,cache:t,gitdir:i,oid:f}),l=await Lr.fromPack({pack:s,getExternalRefDelta:o,onProgress:r});return await e.write(a.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function Ml({fs:e,onProgress:t,dir:r,gitdir:n=T(r,".git"),filepath:i,cache:a={}}){try{return p("fs",e),p("dir",r),p("gitdir",r),p("filepath",i),await dm({fs:new P(e),cache:a,onProgress:t,dir:r,gitdir:n,filepath:i})}catch(s){throw s.caller="git.indexPack",s}}async function zl({fs:e,bare:t=!1,dir:r,gitdir:n=t?r:T(r,".git"),defaultBranch:i="master"}){try{return p("fs",e),p("gitdir",n),t||p("dir",r),await ml({fs:new P(e),bare:t,dir:r,gitdir:n,defaultBranch:i})}catch(a){throw a.caller="git.init",a}}async function Ll({fs:e,cache:t,gitdir:r,oid:n,ancestor:i,depth:a}){let s=await Pt.read({fs:e,gitdir:r});if(!n)throw new ye("oid");if(!i)throw new ye("ancestor");if(n===i)return!1;let o=[n],l=new Set,f=0;for(;o.length;){if(f++===a)throw new Vr(a);let c=o.shift(),{type:u,object:d}=await W({fs:e,cache:t,gitdir:r,oid:c});if(u!=="commit")throw new le(c,u,"commit");let h=ge.from(d).parse();for(let w of h.parent)if(w===i)return!0;if(!s.has(c))for(let w of h.parent)l.has(w)||(o.push(w),l.add(w))}return!1}async function ql({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,ancestor:i,depth:a=-1,cache:s={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),p("ancestor",i),await Ll({fs:new P(e),cache:s,gitdir:r,oid:n,ancestor:i,depth:a})}catch(o){throw o.caller="git.isDescendent",o}}async function Fl({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n}){try{return p("fs",e),p("dir",t),p("gitdir",r),p("filepath",n),lr.isIgnored({fs:new P(e),dir:t,gitdir:r,filepath:n})}catch(i){throw i.caller="git.isIgnored",i}}async function Hl({fs:e,dir:t,gitdir:r=T(t,".git"),remote:n}){try{return p("fs",e),p("gitdir",r),$.listBranches({fs:new P(e),gitdir:r,remote:n})}catch(i){throw i.caller="git.listBranches",i}}async function hm({fs:e,gitdir:t,ref:r,cache:n}){if(r){let i=await $.resolve({gitdir:t,fs:e,ref:r}),a=[];return await Gl({fs:e,cache:n,gitdir:t,oid:i,filenames:a,prefix:""}),a}else return J.acquire({fs:e,gitdir:t,cache:n},async function(i){return i.entries.map(a=>a.path)})}async function Gl({fs:e,cache:t,gitdir:r,oid:n,filenames:i,prefix:a}){let{tree:s}=await hr({fs:e,cache:t,gitdir:r,oid:n});for(let o of s)o.type==="tree"?await Gl({fs:e,cache:t,gitdir:r,oid:o.oid,filenames:i,prefix:T(a,o.path)}):i.push(T(a,o.path))}async function Zl({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,cache:i={}}){try{return p("fs",e),p("gitdir",r),await hm({fs:new P(e),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listFiles",a}}async function wm({fs:e,cache:t,gitdir:r,ref:n}){let i;try{i=await $.resolve({gitdir:r,fs:e,ref:n})}catch(o){if(o instanceof H)return[]}return(await hr({fs:e,cache:t,gitdir:r,oid:i})).tree.map(o=>({target:o.path,note:o.oid}))}async function Wl({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n="refs/notes/commits",cache:i={}}){try{return p("fs",e),p("gitdir",r),p("ref",n),await wm({fs:new P(e),cache:i,gitdir:r,ref:n})}catch(a){throw a.caller="git.listNotes",a}}async function pm({fs:e,gitdir:t}){let r=await Q.get({fs:e,gitdir:t}),n=await r.getSubsections("remote");return Promise.all(n.map(async a=>{let s=await r.get(`remote.${a}.url`);return{remote:a,url:s}}))}async function Vl({fs:e,dir:t,gitdir:r=T(t,".git")}){try{return p("fs",e),p("gitdir",r),await pm({fs:new P(e),gitdir:r})}catch(n){throw n.caller="git.listRemotes",n}}async function mm(e){let t=Z.streamReader(e),r=[],n;for(;n=await t(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");let[i,a,...s]=n.split(" "),o={ref:a,oid:i};for(let l of s){let[f,c]=l.split(":");f==="symref-target"?o.target=c:f==="peeled"&&(o.peeled=c)}r.push(o)}return r}async function _m({prefix:e,symrefs:t,peelTags:r}){let n=[];return n.push(Z.encode(`command=ls-refs
`)),n.push(Z.encode(`agent=${Qn.agent}
`)),(r||t||e)&&n.push(Z.delim()),r&&n.push(Z.encode("peel")),t&&n.push(Z.encode("symrefs")),e&&n.push(Z.encode(`ref-prefix ${e}`)),n.push(Z.flush()),n}async function Kl({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,url:a,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:f,symrefs:c,peelTags:u}){try{p("http",e),p("url",a);let d=await ur.discover({http:e,onAuth:t,onAuthSuccess:r,onAuthFailure:n,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,headers:s,protocolVersion:l});if(d.protocolVersion===1)return Dl(d,f,c,u);let h=await _m({prefix:f,symrefs:c,peelTags:u}),w=await ur.connect({http:e,auth:d.auth,headers:s,corsProxy:i,service:o?"git-receive-pack":"git-upload-pack",url:a,body:h});return mm(w.body)}catch(d){throw d.caller="git.listServerRefs",d}}async function Xl({fs:e,dir:t,gitdir:r=T(t,".git")}){try{return p("fs",e),p("gitdir",r),$.listTags({fs:new P(e),gitdir:r})}catch(n){throw n.caller="git.listTags",n}}async function Yl({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await W({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=xe.from(a).parse().object,Yl({fs:e,cache:t,gitdir:r,oid:n});if(i!=="commit")throw new le(n,i,"commit");return{commit:ge.from(a),oid:n}}async function Fa({fs:e,cache:t,gitdir:r,oid:n}){let{commit:i,oid:a}=await Yl({fs:e,cache:t,gitdir:r,oid:n});return{oid:a,commit:i.parse(),payload:i.withoutSignature()}}function gm(e,t){return e.committer.timestamp-t.committer.timestamp}var vm="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function Hf({fs:e,cache:t,gitdir:r,oid:n,fileId:i}){if(i===vm)return;let a=n,s,o=await cr({fs:e,cache:t,gitdir:r,oid:n}),l=o.tree;return i===o.oid?s=o.path:(s=await Jl({fs:e,cache:t,gitdir:r,tree:l,fileId:i,oid:a}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function Jl({fs:e,cache:t,gitdir:r,tree:n,fileId:i,oid:a,filepaths:s=[],parentPath:o=""}){let l=n.entries().map(function(f){let c;return f.oid===i?(c=T(o,f.path),s.push(c)):f.type==="tree"&&(c=W({fs:e,cache:t,gitdir:r,oid:f.oid}).then(function({object:u}){return Jl({fs:e,cache:t,gitdir:r,tree:_e.from(u),fileId:i,oid:a,filepaths:s,parentPath:T(o,f.path)})})),c});return await Promise.all(l),s}async function bm({fs:e,cache:t,gitdir:r,filepath:n,ref:i,depth:a,since:s,force:o,follow:l}){let f=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),c=[],u=await Pt.read({fs:e,gitdir:r}),d=await $.resolve({fs:e,gitdir:r,ref:i}),h=[await Fa({fs:e,cache:t,gitdir:r,oid:d})],w,m,g;function _(x){g&&n&&c.push(x)}for(;h.length>0;){let x=h.pop();if(f!==void 0&&x.commit.committer.timestamp<=f)break;if(n){let E;try{E=await nn({fs:e,cache:t,gitdir:r,oid:x.commit.tree,filepath:n}),m&&w!==E&&c.push(m),w=E,m=x,g=!0}catch(y){if(y instanceof H){let b=l&&w;if(b&&(b=await Hf({fs:e,cache:t,gitdir:r,oid:x.commit.tree,fileId:w}),b))if(Array.isArray(b)){if(m){let A=await Hf({fs:e,cache:t,gitdir:r,oid:m.commit.tree,fileId:w});if(Array.isArray(A))if(b=b.filter(v=>A.indexOf(v)===-1),b.length===1)b=b[0],n=b,m&&c.push(m);else{b=!1,m&&c.push(m);break}}}else n=b,m&&c.push(m);if(!b){if(g&&w&&(c.push(m),!o))break;if(!o&&!l)throw y}m=x,g=!1}else throw y}}else c.push(x);if(a!==void 0&&c.length===a){_(x);break}if(!u.has(x.oid))for(let E of x.commit.parent){let y=await Fa({fs:e,cache:t,gitdir:r,oid:E});h.map(b=>b.oid).includes(y.oid)||h.push(y)}h.length===0&&_(x),h.sort((E,y)=>gm(E.commit,y.commit))}return c}async function Ql({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n,ref:i="HEAD",depth:a,since:s,force:o,follow:l,cache:f={}}){try{return p("fs",e),p("gitdir",r),p("ref",i),await bm({fs:new P(e),cache:f,gitdir:r,filepath:n,ref:i,depth:a,since:s,force:o,follow:l})}catch(c){throw c.caller="git.log",c}}async function eu({fs:e,onSign:t,dir:r,gitdir:n=T(r,".git"),ours:i,theirs:a,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:f=!1,abortOnConflict:c=!0,message:u,author:d,committer:h,signingKey:w,cache:m={},mergeDriver:g}){try{p("fs",e),w&&p("onSign",t);let _=new P(e),x=await Ct({fs:_,gitdir:n,author:d});if(!x&&(!o||!s))throw new ue("author");let E=await an({fs:_,gitdir:n,author:x,committer:h});if(!E&&(!o||!s))throw new ue("committer");return await Ol({fs:_,cache:m,dir:r,gitdir:n,ours:i,theirs:a,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:f,abortOnConflict:c,message:u,author:x,committer:E,signingKey:w,onSign:t,mergeDriver:g})}catch(_){throw _.caller="git.merge",_}}var ym={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function tu({fs:e,cache:t,dir:r,gitdir:n=T(r,".git"),oids:i}){let a=new Gf,s=[];function o(c,u){let d=Buffer.from(c,u);s.push(d),a.update(d)}async function l({stype:c,object:u}){let d=ym[c],h=u.length,w=h>15?128:0,m=h&15;h=h>>>4;let g=(w|d|m).toString(16);for(o(g,"hex");w;)w=h>127?128:0,g=w|h&127,o(qa(2,g),"hex"),h=h>>>7;o(Buffer.from(await rl(u)))}o("PACK"),o("00000002","hex"),o(qa(8,i.length),"hex");for(let c of i){let{type:u,object:d}=await W({fs:e,cache:t,gitdir:n,oid:c});await l({write:o,object:d,stype:u})}let f=a.digest();return s.push(f),s}async function xm({fs:e,cache:t,gitdir:r,oids:n,write:i}){let a=await tu({fs:e,cache:t,gitdir:r,oids:n}),s=Buffer.from(await Vn(a)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return i?(await e.write(T(r,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function ru({fs:e,dir:t,gitdir:r=T(t,".git"),oids:n,write:i=!1,cache:a={}}){try{return p("fs",e),p("gitdir",r),p("oids",n),await xm({fs:new P(e),cache:a,gitdir:r,oids:n,write:i})}catch(s){throw s.caller="git.packObjects",s}}async function nu({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=T(o,".git"),ref:f,url:c,remote:u,remoteRef:d,prune:h=!1,pruneTags:w=!1,fastForward:m=!0,fastForwardOnly:g=!1,corsProxy:_,singleBranch:x,headers:E={},author:y,committer:b,signingKey:A,cache:v={}}){try{p("fs",e),p("gitdir",l);let O=new P(e),k=await Ct({fs:O,gitdir:l,author:y});if(!k)throw new ue("author");let R=await an({fs:O,gitdir:l,author:k,committer:b});if(!R)throw new ue("committer");return await Rl({fs:O,cache:v,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l,ref:f,url:c,remote:u,remoteRef:d,fastForward:m,fastForwardOnly:g,corsProxy:_,singleBranch:x,headers:E,author:k,committer:R,signingKey:A,prune:h,pruneTags:w})}catch(O){throw O.caller="git.pull",O}}async function Em({fs:e,cache:t,dir:r,gitdir:n=T(r,".git"),start:i,finish:a}){let s=await Pt.read({fs:e,gitdir:n}),o=new Set,l=new Set;for(let u of i)o.add(await $.resolve({fs:e,gitdir:n,ref:u}));for(let u of a)try{let d=await $.resolve({fs:e,gitdir:n,ref:u});l.add(d)}catch{}let f=new Set;async function c(u){f.add(u);let{type:d,object:h}=await W({fs:e,cache:t,gitdir:n,oid:u});if(d==="tag"){let m=xe.from(h).headers().object;return c(m)}if(d!=="commit")throw new le(u,d,"commit");if(!s.has(u)){let m=ge.from(h).headers().parent;for(u of m)!l.has(u)&&!f.has(u)&&await c(u)}}for(let u of o)await c(u);return f}async function Ta({fs:e,cache:t,dir:r,gitdir:n=T(r,".git"),oids:i}){let a=new Set;async function s(o){if(a.has(o))return;a.add(o);let{type:l,object:f}=await W({fs:e,cache:t,gitdir:n,oid:o});if(l==="tag"){let u=xe.from(f).headers().object;await s(u)}else if(l==="commit"){let u=ge.from(f).headers().tree;await s(u)}else if(l==="tree"){let c=_e.from(f);for(let u of c)u.type==="blob"&&a.add(u.oid),u.type==="tree"&&await s(u.oid)}}for(let o of i)await s(o);return a}async function km(e){let t={},r="",n=Z.streamReader(e),i=await n();for(;i!==!0;)i!==null&&(r+=i.toString("utf8")+`
`),i=await n();let a=r.toString("utf8").split(`
`);if(i=a.shift(),!i.startsWith("unpack "))throw new Bt('unpack ok" or "unpack [error message]',i);t.ok=i==="unpack ok",t.ok||(t.error=i.slice(7)),t.refs={};for(let s of a){if(s.trim()==="")continue;let o=s.slice(0,2),l=s.slice(3),f=l.indexOf(" ");f===-1&&(f=l.length);let c=l.slice(0,f),u=l.slice(f+1);t.refs[c]={ok:o==="ok",error:u}}return t}async function Sm({capabilities:e=[],triplets:t=[]}){let r=[],n=`\0 ${e.join(" ")}`;for(let i of t)r.push(Z.encode(`${i.oldoid} ${i.oid} ${i.fullRef}${n}
`)),n="";return r.push(Z.flush()),r}async function Om({fs:e,cache:t,http:r,onProgress:n,onMessage:i,onAuth:a,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:f,remoteRef:c,remote:u,url:d,force:h=!1,delete:w=!1,corsProxy:m,headers:g={}}){let _=f||await Nt({fs:e,gitdir:l});if(typeof _>"u")throw new ye("ref");let x=await Q.get({fs:e,gitdir:l});u=u||await x.get(`branch.${_}.pushRemote`)||await x.get("remote.pushDefault")||await x.get(`branch.${_}.remote`)||"origin";let E=d||await x.get(`remote.${u}.pushurl`)||await x.get(`remote.${u}.url`);if(typeof E>"u")throw new ye("remote OR url");let y=c||await x.get(`branch.${_}.merge`);if(typeof E>"u")throw new ye("remoteRef");m===void 0&&(m=await x.get("http.corsProxy"));let b=await $.expand({fs:e,gitdir:l,ref:_}),A=w?"0000000000000000000000000000000000000000":await $.resolve({fs:e,gitdir:l,ref:b}),v=dr.getRemoteHelperFor({url:E}),O=await v.discover({http:r,onAuth:a,onAuthSuccess:s,onAuthFailure:o,corsProxy:m,service:"git-receive-pack",url:E,headers:g,protocolVersion:1}),k=O.auth,R;if(!y)R=b;else try{R=await $.expandAgainstMap({ref:y,map:O.refs})}catch(X){if(X instanceof H)R=y.startsWith("refs/")?y:`refs/heads/${y}`;else throw X}let S=O.refs.get(R)||"0000000000000000000000000000000000000000",B=!O.capabilities.has("no-thin"),N=new Set;if(!w){let X=[...O.refs.values()],ae=new Set;if(S!=="0000000000000000000000000000000000000000"){let ie=await Ka({fs:e,cache:t,gitdir:l,oids:[A,S]});for(let wr of ie)X.push(wr);B&&(ae=await Ta({fs:e,cache:t,gitdir:l,oids:ie}))}if(!X.includes(A)){let ie=await Em({fs:e,cache:t,gitdir:l,start:[A],finish:X});N=await Ta({fs:e,cache:t,gitdir:l,oids:ie})}if(B){try{let ie=await $.resolve({fs:e,gitdir:l,ref:`refs/remotes/${u}/HEAD`,depth:2}),{oid:wr}=await $.resolveAgainstMap({ref:ie.replace(`refs/remotes/${u}/`,""),fullref:ie,map:O.refs}),ti=[wr];for(let pr of await Ta({fs:e,cache:t,gitdir:l,oids:ti}))ae.add(pr)}catch{}for(let ie of ae)N.delete(ie)}if(A===S&&(h=!0),!h){if(b.startsWith("refs/tags")&&S!=="0000000000000000000000000000000000000000")throw new or("tag-exists");if(A!=="0000000000000000000000000000000000000000"&&S!=="0000000000000000000000000000000000000000"&&!await Ll({fs:e,cache:t,gitdir:l,oid:A,ancestor:S,depth:-1}))throw new or("not-fast-forward")}}let F=wl([...O.capabilities],["report-status","side-band-64k",`agent=${Qn.agent}`]),de=await Sm({capabilities:F,triplets:[{oldoid:S,oid:A,fullRef:R}]}),at=w?[]:await tu({fs:e,cache:t,gitdir:l,oids:[...N]}),he=await v.connect({http:r,onProgress:n,corsProxy:m,service:"git-receive-pack",url:E,auth:k,headers:g,body:[...de,...at]}),{packfile:Ve,progress:ei}=await Kn.demux(he.body);if(i){let X=pl(ei);sn(X,async ae=>{await i(ae)})}let De=await km(Ve);if(he.headers&&(De.headers=he.headers),u&&De.ok&&De.refs[R].ok){let X=`refs/remotes/${u}/${R.replace("refs/heads","")}`;w?await $.deleteRef({fs:e,gitdir:l,ref:X}):await $.writeRef({fs:e,gitdir:l,ref:X,value:A})}if(De.ok&&Object.values(De.refs).every(X=>X.ok))return De;{let X=Object.entries(De.refs).filter(([ae,ie])=>!ie.ok).map(([ae,ie])=>`
  - ${ae}: ${ie.error}`).join("");throw new Wr(X,De)}}async function iu({fs:e,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,dir:o,gitdir:l=T(o,".git"),ref:f,remoteRef:c,remote:u="origin",url:d,force:h=!1,delete:w=!1,corsProxy:m,headers:g={},cache:_={}}){try{return p("fs",e),p("http",t),p("gitdir",l),await Om({fs:new P(e),cache:_,http:t,onProgress:r,onMessage:n,onAuth:i,onAuthSuccess:a,onAuthFailure:s,gitdir:l,ref:f,remoteRef:c,remote:u,url:d,force:h,delete:w,corsProxy:m,headers:g})}catch(x){throw x.caller="git.push",x}}async function au({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await W({fs:e,cache:t,gitdir:r,oid:n});if(i==="tag")return n=xe.from(a).parse().object,au({fs:e,cache:t,gitdir:r,oid:n});if(i!=="blob")throw new le(n,i,"blob");return{oid:n,blob:new Uint8Array(a)}}async function su({fs:e,cache:t,gitdir:r,oid:n,filepath:i=void 0}){return i!==void 0&&(n=await nn({fs:e,cache:t,gitdir:r,oid:n,filepath:i})),await au({fs:e,cache:t,gitdir:r,oid:n})}async function ou({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,filepath:i,cache:a={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),await su({fs:new P(e),cache:a,gitdir:r,oid:n,filepath:i})}catch(s){throw s.caller="git.readBlob",s}}async function cu({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,cache:i={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),await Fa({fs:new P(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readCommit",a}}async function Rm({fs:e,cache:t,gitdir:r,ref:n="refs/notes/commits",oid:i}){let a=await $.resolve({gitdir:r,fs:e,ref:n}),{blob:s}=await su({fs:e,cache:t,gitdir:r,oid:a,filepath:i});return s}async function fu({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n="refs/notes/commits",oid:i,cache:a={}}){try{return p("fs",e),p("gitdir",r),p("ref",n),p("oid",i),await Rm({fs:new P(e),cache:a,gitdir:r,ref:n,oid:i})}catch(s){throw s.caller="git.readNote",s}}async function lu({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,format:i="parsed",filepath:a=void 0,encoding:s=void 0,cache:o={}}){try{p("fs",e),p("gitdir",r),p("oid",n);let l=new P(e);a!==void 0&&(n=await nn({fs:l,cache:o,gitdir:r,oid:n,filepath:a}));let c=await W({fs:l,cache:o,gitdir:r,oid:n,format:i==="parsed"?"content":i});if(c.oid=n,i==="parsed")switch(c.format="parsed",c.type){case"commit":c.object=ge.from(c.object).parse();break;case"tree":c.object=_e.from(c.object).entries();break;case"blob":s?c.object=c.object.toString(s):(c.object=new Uint8Array(c.object),c.format="content");break;case"tag":c.object=xe.from(c.object).parse();break;default:throw new le(c.oid,c.type,"blob|commit|tag|tree")}else(c.format==="deflated"||c.format==="wrapped")&&(c.type=c.format);return c}catch(l){throw l.caller="git.readObject",l}}async function Tm({fs:e,cache:t,gitdir:r,oid:n}){let{type:i,object:a}=await W({fs:e,cache:t,gitdir:r,oid:n,format:"content"});if(i!=="tag")throw new le(n,i,"tag");let s=xe.from(a);return{oid:n,tag:s.parse(),payload:s.payload()}}async function uu({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,cache:i={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),await Tm({fs:new P(e),cache:i,gitdir:r,oid:n})}catch(a){throw a.caller="git.readTag",a}}async function du({fs:e,dir:t,gitdir:r=T(t,".git"),oid:n,filepath:i=void 0,cache:a={}}){try{return p("fs",e),p("gitdir",r),p("oid",n),await hr({fs:new P(e),cache:a,gitdir:r,oid:n,filepath:i})}catch(s){throw s.caller="git.readTree",s}}async function hu({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n,cache:i={}}){try{p("fs",e),p("gitdir",r),p("filepath",n),await J.acquire({fs:new P(e),gitdir:r,cache:i},async function(a){a.delete({filepath:n})})}catch(a){throw a.caller="git.remove",a}}async function Am({fs:e,cache:t,onSign:r,gitdir:n,ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l}){let f;try{f=await $.resolve({gitdir:n,fs:e,ref:i})}catch(w){if(!(w instanceof H))throw w}let u=(await hr({fs:e,gitdir:n,oid:f||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;u=u.filter(w=>w.path!==a);let d=await Za({fs:e,gitdir:n,tree:u});return await Jn({fs:e,cache:t,onSign:r,gitdir:n,ref:i,tree:d,parent:f&&[f],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function wu({fs:e,onSign:t,dir:r,gitdir:n=T(r,".git"),ref:i="refs/notes/commits",oid:a,author:s,committer:o,signingKey:l,cache:f={}}){try{p("fs",e),p("gitdir",n),p("oid",a);let c=new P(e),u=await Ct({fs:c,gitdir:n,author:s});if(!u)throw new ue("author");let d=await an({fs:c,gitdir:n,author:u,committer:o});if(!d)throw new ue("committer");return await Am({fs:c,cache:f,onSign:t,gitdir:n,ref:i,oid:a,author:u,committer:d,signingKey:l})}catch(c){throw c.caller="git.removeNote",c}}async function $m({fs:e,gitdir:t,oldref:r,ref:n,checkout:i=!1}){if(n!==We.clean(n))throw new it(n,We.clean(n));if(r!==We.clean(r))throw new it(r,We.clean(r));let a=`refs/heads/${r}`,s=`refs/heads/${n}`;if(await $.exists({fs:e,gitdir:t,ref:s}))throw new Ne("branch",n,!1);let l=await $.resolve({fs:e,gitdir:t,ref:a,depth:1});await $.writeRef({fs:e,gitdir:t,ref:s,value:l}),await $.deleteRef({fs:e,gitdir:t,ref:a});let c=await Nt({fs:e,gitdir:t,fullname:!0})===a;(i||c)&&await $.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function pu({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,oldref:i,checkout:a=!1}){try{return p("fs",e),p("gitdir",r),p("ref",n),p("oldref",i),await $m({fs:new P(e),gitdir:r,ref:n,oldref:i,checkout:a})}catch(s){throw s.caller="git.renameBranch",s}}async function mu({gitdir:e,type:t,object:r}){return nt(gt.wrap({type:t,object:r}))}async function _u({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n,ref:i,cache:a={}}){try{p("fs",e),p("gitdir",r),p("filepath",n);let s=new P(e),o,l;try{o=await $.resolve({fs:s,gitdir:r,ref:i||"HEAD"})}catch(u){if(i)throw u}if(o)try{o=await nn({fs:s,cache:a,gitdir:r,oid:o,filepath:n})}catch{o=null}let f={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0},c=t&&await s.read(T(t,n));c&&(l=await mu({gitdir:r,type:"blob",object:c}),o===l&&(f=await s.lstat(T(t,n)))),await J.acquire({fs:s,gitdir:r,cache:a},async function(u){u.delete({filepath:n}),o&&u.insert({filepath:n,stats:f,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function gu({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,depth:i}){try{return p("fs",e),p("gitdir",r),p("ref",n),await $.resolve({fs:new P(e),gitdir:r,ref:n,depth:i})}catch(a){throw a.caller="git.resolveRef",a}}async function vu({fs:e,dir:t,gitdir:r=T(t,".git"),path:n,value:i,append:a=!1}){try{p("fs",e),p("gitdir",r),p("path",n);let s=new P(e),o=await Q.get({fs:s,gitdir:r});a?await o.append(n,i):await o.set(n,i),await Q.save({fs:s,gitdir:r,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function bu({fs:e,dir:t,gitdir:r=T(t,".git"),filepath:n,cache:i={}}){try{p("fs",e),p("gitdir",r),p("filepath",n);let a=new P(e);if(await lr.isIgnored({fs:a,gitdir:r,dir:t,filepath:n}))return"ignored";let o=await Im({fs:a,cache:i,gitdir:r}),l=await yu({fs:a,cache:i,gitdir:r,tree:o,path:n}),f=await J.acquire({fs:a,gitdir:r,cache:i},async function(m){for(let g of m)if(g.path===n)return g;return null}),c=await a.lstat(T(t,n)),u=l!==null,d=f!==null,h=c!==null,w=async()=>{if(d&&!Ln(f,c))return f.oid;{let m=await a.read(T(t,n)),g=await mu({gitdir:r,type:"blob",object:m});return d&&f.oid===g&&c.size!==-1&&J.acquire({fs:a,gitdir:r,cache:i},async function(_){_.insert({filepath:n,stats:c,oid:g})}),g}};if(!u&&!h&&!d)return"absent";if(!u&&!h&&d)return"*absent";if(!u&&h&&!d)return"*added";if(!u&&h&&d)return await w()===f.oid?"added":"*added";if(u&&!h&&!d)return"deleted";if(u&&!h&&d)return l===f.oid,"*deleted";if(u&&h&&!d)return await w()===l?"*undeleted":"*undeletemodified";if(u&&h&&d){let m=await w();return m===l?m===f.oid?"unmodified":"*unmodified":m===f.oid?"modified":"*modified"}}catch(a){throw a.caller="git.status",a}}async function yu({fs:e,cache:t,gitdir:r,tree:n,path:i}){typeof i=="string"&&(i=i.split("/"));let a=i.shift();for(let s of n)if(s.path===a){if(i.length===0)return s.oid;let{type:o,object:l}=await W({fs:e,cache:t,gitdir:r,oid:s.oid});if(o==="tree"){let f=_e.from(l);return yu({fs:e,cache:t,gitdir:r,tree:f,path:i})}if(o==="blob")throw new le(s.oid,o,"blob",i.join("/"))}return null}async function Im({fs:e,cache:t,gitdir:r}){let n;try{n=await $.resolve({fs:e,gitdir:r,ref:"HEAD"})}catch(a){if(a instanceof H)return[]}let{tree:i}=await hr({fs:e,cache:t,gitdir:r,oid:n});return i}async function xu({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n="HEAD",filepaths:i=["."],filter:a,cache:s={},ignored:o=!1}){try{p("fs",e),p("gitdir",r),p("ref",n);let l=new P(e);return await fr({fs:l,cache:s,dir:t,gitdir:r,trees:[rt({ref:n}),rn(),tn()],map:async function(f,[c,u,d]){if(!c&&!d&&u&&!o&&await lr.isIgnored({fs:l,dir:t,filepath:f})||!i.some(A=>ul(f,A)))return null;if(a&&!a(f))return;let[h,w,m]=await Promise.all([c&&c.type(),u&&u.type(),d&&d.type()]),g=[h,w,m].includes("blob");if((h==="tree"||h==="special")&&!g)return;if(h==="commit")return null;if((w==="tree"||w==="special")&&!g)return;if(m==="commit")return null;if((m==="tree"||m==="special")&&!g)return;let _=h==="blob"?await c.oid():void 0,x=m==="blob"?await d.oid():void 0,E;h!=="blob"&&w==="blob"&&m!=="blob"?E="42":w==="blob"&&(E=await u.oid());let y=[void 0,_,E,x],b=y.map(A=>y.indexOf(A));return b.shift(),[f,...b]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function Eu({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,object:i,force:a=!1}){try{p("fs",e),p("gitdir",r),p("ref",n);let s=new P(e);if(n===void 0)throw new ye("ref");n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`;let o=await $.resolve({fs:s,gitdir:r,ref:i||"HEAD"});if(!a&&await $.exists({fs:s,gitdir:r,ref:n}))throw new Ne("tag",n);await $.writeRef({fs:s,gitdir:r,ref:n,value:o})}catch(s){throw s.caller="git.tag",s}}async function ku({fs:e,dir:t,gitdir:r=T(t,".git"),cache:n={},filepath:i,oid:a,mode:s,add:o,remove:l,force:f}){try{p("fs",e),p("gitdir",r),p("filepath",i);let c=new P(e);if(l)return await J.acquire({fs:c,gitdir:r,cache:n},async function(d){let h;if(!f&&(h=await c.lstat(T(t,i)),h)){if(h.isDirectory())throw new vt("directory");return}d.has({filepath:i})&&d.delete({filepath:i})});let u;if(!a){if(u=await c.lstat(T(t,i)),!u)throw new H(`file at "${i}" on disk and "remove" not set`);if(u.isDirectory())throw new vt("directory")}return await J.acquire({fs:c,gitdir:r,cache:n},async function(d){if(!o&&!d.has({filepath:i}))throw new H(`file at "${i}" in index and "add" not set`);let h={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};if(!a){h=u;let w=h.isSymbolicLink()?await c.readlink(T(t,i)):await c.read(T(t,i));a=await Ee({fs:c,gitdir:r,type:"blob",format:"content",object:w})}return d.insert({filepath:i,oid:a,stats:h}),a})}catch(c){throw c.caller="git.updateIndex",c}}function Su(){try{return Qn.version}catch(e){throw e.caller="git.version",e}}async function Ou({fs:e,dir:t,gitdir:r=T(t,".git"),trees:n,map:i,reduce:a,iterate:s,cache:o={}}){try{return p("fs",e),p("gitdir",r),p("trees",n),await fr({fs:new P(e),cache:o,dir:t,gitdir:r,trees:n,map:i,reduce:a,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function Ru({fs:e,dir:t,gitdir:r=T(t,".git"),blob:n}){try{return p("fs",e),p("gitdir",r),p("blob",n),await Ee({fs:new P(e),gitdir:r,type:"blob",object:n,format:"content"})}catch(i){throw i.caller="git.writeBlob",i}}async function Bm({fs:e,gitdir:t,commit:r}){let n=ge.from(r).toObject();return await Ee({fs:e,gitdir:t,type:"commit",object:n,format:"content"})}async function Tu({fs:e,dir:t,gitdir:r=T(t,".git"),commit:n}){try{return p("fs",e),p("gitdir",r),p("commit",n),await Bm({fs:new P(e),gitdir:r,commit:n})}catch(i){throw i.caller="git.writeCommit",i}}async function Au({fs:e,dir:t,gitdir:r=T(t,".git"),type:n,object:i,format:a="parsed",oid:s,encoding:o=void 0}){try{let l=new P(e);if(a==="parsed"){switch(n){case"commit":i=ge.from(i).toObject();break;case"tree":i=_e.from(i).toObject();break;case"blob":i=Buffer.from(i,o);break;case"tag":i=xe.from(i).toObject();break;default:throw new le(s||"",n,"blob|commit|tag|tree")}a="content"}return s=await Ee({fs:l,gitdir:r,type:n,object:i,oid:s,format:a}),s}catch(l){throw l.caller="git.writeObject",l}}async function $u({fs:e,dir:t,gitdir:r=T(t,".git"),ref:n,value:i,force:a=!1,symbolic:s=!1}){try{p("fs",e),p("gitdir",r),p("ref",n),p("value",i);let o=new P(e);if(n!==We.clean(n))throw new it(n,We.clean(n));if(!a&&await $.exists({fs:o,gitdir:r,ref:n}))throw new Ne("ref",n);s?await $.writeSymbolicRef({fs:o,gitdir:r,ref:n,value:i}):(i=await $.resolve({fs:o,gitdir:r,ref:i}),await $.writeRef({fs:o,gitdir:r,ref:n,value:i}))}catch(o){throw o.caller="git.writeRef",o}}async function Pm({fs:e,gitdir:t,tag:r}){let n=xe.from(r).toObject();return await Ee({fs:e,gitdir:t,type:"tag",object:n,format:"content"})}async function Iu({fs:e,dir:t,gitdir:r=T(t,".git"),tag:n}){try{return p("fs",e),p("gitdir",r),p("tag",n),await Pm({fs:new P(e),gitdir:r,tag:n})}catch(i){throw i.caller="git.writeTag",i}}async function Bu({fs:e,dir:t,gitdir:r=T(t,".git"),tree:n}){try{return p("fs",e),p("gitdir",r),p("tree",n),await Za({fs:new P(e),gitdir:r,tree:n})}catch(i){throw i.caller="git.writeTree",i}}var Cm={Errors:Qf,STAGE:tn,TREE:rt,WORKDIR:rn,add:nl,abortMerge:tl,addNote:sl,addRemote:cl,annotatedTag:fl,branch:ll,checkout:dl,clone:_l,commit:gl,getConfig:Pl,getConfigAll:Cl,setConfig:vu,currentBranch:vl,deleteBranch:bl,deleteRef:yl,deleteRemote:xl,deleteTag:El,expandOid:kl,expandRef:Sl,fastForward:Tl,fetch:Al,findMergeBase:$l,findRoot:Bl,getRemoteInfo:Nl,getRemoteInfo2:Ul,hashBlob:jl,indexPack:Ml,init:zl,isDescendent:ql,isIgnored:Fl,listBranches:Hl,listFiles:Zl,listNotes:Wl,listRemotes:Vl,listServerRefs:Kl,listTags:Xl,log:Ql,merge:eu,packObjects:ru,pull:nu,push:iu,readBlob:ou,readCommit:cu,readNote:fu,readObject:lu,readTag:uu,readTree:du,remove:hu,removeNote:wu,renameBranch:pu,resetIndex:_u,updateIndex:ku,resolveRef:gu,status:bu,statusMatrix:xu,tag:Eu,version:Su,walk:Ou,writeBlob:Ru,writeCommit:Tu,writeObject:Au,writeRef:$u,writeTag:Iu,writeTree:Bu};I.Errors=Qf;I.STAGE=tn;I.TREE=rt;I.WORKDIR=rn;I.abortMerge=tl;I.add=nl;I.addNote=sl;I.addRemote=cl;I.annotatedTag=fl;I.branch=ll;I.checkout=dl;I.clone=_l;I.commit=gl;I.currentBranch=vl;I.default=Cm;I.deleteBranch=bl;I.deleteRef=yl;I.deleteRemote=xl;I.deleteTag=El;I.expandOid=kl;I.expandRef=Sl;I.fastForward=Tl;I.fetch=Al;I.findMergeBase=$l;I.findRoot=Bl;I.getConfig=Pl;I.getConfigAll=Cl;I.getRemoteInfo=Nl;I.getRemoteInfo2=Ul;I.hashBlob=jl;I.indexPack=Ml;I.init=zl;I.isDescendent=ql;I.isIgnored=Fl;I.listBranches=Hl;I.listFiles=Zl;I.listNotes=Wl;I.listRemotes=Vl;I.listServerRefs=Kl;I.listTags=Xl;I.log=Ql;I.merge=eu;I.packObjects=ru;I.pull=nu;I.push=iu;I.readBlob=ou;I.readCommit=cu;I.readNote=fu;I.readObject=lu;I.readTag=uu;I.readTree=du;I.remove=hu;I.removeNote=wu;I.renameBranch=pu;I.resetIndex=_u;I.resolveRef=gu;I.setConfig=vu;I.status=bu;I.statusMatrix=xu;I.tag=Eu;I.updateIndex=ku;I.version=Su;I.walk=Ou;I.writeBlob=Ru;I.writeCommit=Tu;I.writeObject=Au;I.writeRef=$u;I.writeTag=Iu;I.writeTree=Bu});var Cu=Dt(yi()),Nu=Dt(Pu()),Nm=Dt(require("fs"));async function Dm(){let e=await(0,Nu.statusMatrix)({fs:Nm,dir:process.cwd()}),t=[];e.forEach(r=>{r[2]!==1&&t.push(r[0])}),t.length&&(0,Cu.setFailed)(`The following files have been modified: ${t.join(", ")}`)}Dm();
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)
*/
